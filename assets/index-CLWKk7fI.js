(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _0={exports:{}},bc={},w0={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),MI=Symbol.for("react.portal"),LI=Symbol.for("react.fragment"),VI=Symbol.for("react.strict_mode"),FI=Symbol.for("react.profiler"),jI=Symbol.for("react.provider"),UI=Symbol.for("react.context"),BI=Symbol.for("react.forward_ref"),zI=Symbol.for("react.suspense"),WI=Symbol.for("react.memo"),$I=Symbol.for("react.lazy"),lv=Symbol.iterator;function HI(t){return t===null||typeof t!="object"?null:(t=lv&&t[lv]||t["@@iterator"],typeof t=="function"?t:null)}var E0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T0=Object.assign,S0={};function go(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||E0}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I0(){}I0.prototype=go.prototype;function wp(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||E0}var Ep=wp.prototype=new I0;Ep.constructor=wp;T0(Ep,go.prototype);Ep.isPureReactComponent=!0;var uv=Array.isArray,C0=Object.prototype.hasOwnProperty,Tp={current:null},A0={key:!0,ref:!0,__self:!0,__source:!0};function P0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)C0.call(e,r)&&!A0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hl,type:t,key:s,ref:o,props:i,_owner:Tp.current}}function qI(t,e){return{$$typeof:hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===hl}function GI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cv=/\/+/g;function Dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GI(""+t.key):e.toString(36)}function _u(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hl:case MI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Dh(o,0):r,uv(i)?(n="",t!=null&&(n=t.replace(cv,"$&/")+"/"),_u(i,e,n,"",function(c){return c})):i!=null&&(Sp(i)&&(i=qI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uv(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Dh(s,a);o+=_u(s,e,n,u,i)}else if(u=HI(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Dh(s,a++),o+=_u(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],i=0;return _u(t,r,"","",function(s){return e.call(n,s,i++)}),r}function KI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},wu={transition:null},QI={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:wu,ReactCurrentOwner:Tp};function k0(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=go;_e.Fragment=LI;_e.Profiler=FI;_e.PureComponent=wp;_e.StrictMode=VI;_e.Suspense=zI;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QI;_e.act=k0;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=T0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Tp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)C0.call(e,u)&&!A0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hl,type:t.type,key:i,ref:s,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:UI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jI,_context:t},t.Consumer=t};_e.createElement=P0;_e.createFactory=function(t){var e=P0.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:BI,render:t}};_e.isValidElement=Sp;_e.lazy=function(t){return{$$typeof:$I,_payload:{_status:-1,_result:t},_init:KI}};_e.memo=function(t,e){return{$$typeof:WI,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=wu.transition;wu.transition={};try{t()}finally{wu.transition=e}};_e.unstable_act=k0;_e.useCallback=function(t,e){return ln.current.useCallback(t,e)};_e.useContext=function(t){return ln.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};_e.useEffect=function(t,e){return ln.current.useEffect(t,e)};_e.useId=function(){return ln.current.useId()};_e.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return ln.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};_e.useRef=function(t){return ln.current.useRef(t)};_e.useState=function(t){return ln.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return ln.current.useTransition()};_e.version="18.3.1";w0.exports=_e;var Q=w0.exports;const ji=Oc(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YI=Q,XI=Symbol.for("react.element"),JI=Symbol.for("react.fragment"),ZI=Object.prototype.hasOwnProperty,eC=YI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tC={key:!0,ref:!0,__self:!0,__source:!0};function R0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZI.call(e,r)&&!tC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XI,type:t,key:s,ref:o,props:i,_owner:eC.current}}bc.Fragment=JI;bc.jsx=R0;bc.jsxs=R0;_0.exports=bc;var O=_0.exports,x0={exports:{}},Rn={},N0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,J){var Y=H.length;H.push(J);e:for(;0<Y;){var se=Y-1>>>1,ne=H[se];if(0<i(ne,J))H[se]=J,H[Y]=ne,Y=se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var J=H[0],Y=H.pop();if(Y!==J){H[0]=Y;e:for(var se=0,ne=H.length,ae=ne>>>1;se<ae;){var pe=2*(se+1)-1,je=H[pe],Ue=pe+1,$e=H[Ue];if(0>i(je,Y))Ue<ne&&0>i($e,je)?(H[se]=$e,H[Ue]=Y,se=Ue):(H[se]=je,H[pe]=Y,se=pe);else if(Ue<ne&&0>i($e,Y))H[se]=$e,H[Ue]=Y,se=Ue;else break e}}return J}function i(H,J){var Y=H.sortIndex-J.sortIndex;return Y!==0?Y:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,y=!1,w=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=H)r(c),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(c)}}function D(H){if(k=!1,A(H),!w)if(n(u)!==null)w=!0,ve(F);else{var J=n(c);J!==null&&Ve(D,J.startTime-H)}}function F(H,J){w=!1,k&&(k=!1,T(v),v=-1),y=!0;var Y=m;try{for(A(J),f=n(u);f!==null&&(!(f.expirationTime>J)||H&&!P());){var se=f.callback;if(typeof se=="function"){f.callback=null,m=f.priorityLevel;var ne=se(f.expirationTime<=J);J=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(u)&&r(u),A(J)}else r(u);f=n(u)}if(f!==null)var ae=!0;else{var pe=n(c);pe!==null&&Ve(D,pe.startTime-J),ae=!1}return ae}finally{f=null,m=Y,y=!1}}var U=!1,I=null,v=-1,S=5,E=-1;function P(){return!(t.unstable_now()-E<S)}function R(){if(I!==null){var H=t.unstable_now();E=H;var J=!0;try{J=I(!0,H)}finally{J?C():(U=!1,I=null)}}else U=!1}var C;if(typeof _=="function")C=function(){_(R)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Te=de.port2;de.port1.onmessage=R,C=function(){Te.postMessage(null)}}else C=function(){x(R,0)};function ve(H){I=H,U||(U=!0,C())}function Ve(H,J){v=x(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ve(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var Y=m;m=J;try{return H()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=m;m=H;try{return J()}finally{m=Y}},t.unstable_scheduleCallback=function(H,J,Y){var se=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?se+Y:se):Y=se,H){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,H={id:h++,callback:J,priorityLevel:H,startTime:Y,expirationTime:ne,sortIndex:-1},Y>se?(H.sortIndex=Y,e(c,H),n(u)===null&&H===n(c)&&(k?(T(v),v=-1):k=!0,Ve(D,Y-se))):(H.sortIndex=ne,e(u,H),w||y||(w=!0,ve(F))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var J=m;return function(){var Y=m;m=J;try{return H.apply(this,arguments)}finally{m=Y}}}})(D0);N0.exports=D0;var nC=N0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC=Q,kn=nC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O0=new Set,Oa={};function os(t,e){Xs(t,e),Xs(t+"Capture",e)}function Xs(t,e){for(Oa[t]=e,t=0;t<e.length;t++)O0.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,iC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hv={},dv={};function sC(t){return xd.call(dv,t)?!0:xd.call(hv,t)?!1:iC.test(t)?dv[t]=!0:(hv[t]=!0,!1)}function oC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aC(t,e,n,r){if(e===null||typeof e>"u"||oC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ip=/[\-:]([a-z])/g;function Cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ip,Cp);Bt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ip,Cp);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ip,Cp);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aC(e,n,i,r)&&(n=null),r||i===null?sC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=rC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gl=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),M0=Symbol.for("react.context"),kp=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),Od=Symbol.for("react.suspense_list"),Rp=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),L0=Symbol.for("react.offscreen"),fv=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=fv&&t[fv]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Oh;function sa(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var bh=!1;function Mh(t,e){if(!t||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sa(t):""}function lC(t){switch(t.tag){case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return t=Mh(t.type,!1),t;case 11:return t=Mh(t.type.render,!1),t;case 1:return t=Mh(t.type,!0),t;default:return""}}function bd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Cs:return"Portal";case Nd:return"Profiler";case Pp:return"StrictMode";case Dd:return"Suspense";case Od:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M0:return(t.displayName||"Context")+".Consumer";case b0:return(t._context.displayName||"Context")+".Provider";case kp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rp:return e=t.displayName||null,e!==null?e:bd(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return bd(t(e))}catch{}}return null}function uC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bd(e);case 8:return e===Pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cC(t){var e=V0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=cC(t))}function F0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Md(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j0(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function Ld(t,e){j0(t,e);var n=di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vd(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vd(t,e,n){(e!=="number"||ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oa=Array.isArray;function Bs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(oa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function U0(t,e){var n=di(e.value),r=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,z0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hC=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){hC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function W0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function $0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dC=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(dC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wd=null,zs=null,Ws=null;function yv(t){if(t=pl(t)){if(typeof Wd!="function")throw Error($(280));var e=t.stateNode;e&&(e=jc(e),Wd(t.stateNode,t.type,e))}}function H0(t){zs?Ws?Ws.push(t):Ws=[t]:zs=t}function q0(){if(zs){var t=zs,e=Ws;if(Ws=zs=null,yv(t),e)for(t=0;t<e.length;t++)yv(e[t])}}function G0(t,e){return t(e)}function K0(){}var Lh=!1;function Q0(t,e,n){if(Lh)return t(e,n);Lh=!0;try{return G0(t,e,n)}finally{Lh=!1,(zs!==null||Ws!==null)&&(K0(),q0())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var $d=!1;if(Nr)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){$d=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{$d=!1}function fC(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ga=!1,Uu=null,Bu=!1,Hd=null,pC={onError:function(t){ga=!0,Uu=t}};function mC(t,e,n,r,i,s,o,a,u){ga=!1,Uu=null,fC.apply(pC,arguments)}function gC(t,e,n,r,i,s,o,a,u){if(mC.apply(this,arguments),ga){if(ga){var c=Uu;ga=!1,Uu=null}else throw Error($(198));Bu||(Bu=!0,Hd=c)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _v(t){if(as(t)!==t)throw Error($(188))}function vC(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _v(i),t;if(s===r)return _v(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function X0(t){return t=vC(t),t!==null?J0(t):null}function J0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J0(t);if(e!==null)return e;t=t.sibling}return null}var Z0=kn.unstable_scheduleCallback,wv=kn.unstable_cancelCallback,yC=kn.unstable_shouldYield,_C=kn.unstable_requestPaint,ft=kn.unstable_now,wC=kn.unstable_getCurrentPriorityLevel,Np=kn.unstable_ImmediatePriority,ew=kn.unstable_UserBlockingPriority,zu=kn.unstable_NormalPriority,EC=kn.unstable_LowPriority,tw=kn.unstable_IdlePriority,Mc=null,dr=null;function TC(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Mc,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:CC,SC=Math.log,IC=Math.LN2;function CC(t){return t>>>=0,t===0?32:31-(SC(t)/IC|0)|0}var Yl=64,Xl=4194304;function aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=aa(a):(s&=o,s!==0&&(r=aa(s)))}else o=n&~i,o!==0?r=aa(o):s!==0&&(r=aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),i=1<<n,r|=t[n],e&=~i;return r}function AC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=AC(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function qd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nw(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function kC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Dp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Le=0;function rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iw,Op,sw,ow,aw,Gd=!1,Jl=[],ei=null,ti=null,ni=null,La=new Map,Va=new Map,Kr=[],RC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ev(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":La.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(e.pointerId)}}function qo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&Op(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xC(t,e,n,r,i){switch(e){case"focusin":return ei=qo(ei,t,e,n,r,i),!0;case"dragenter":return ti=qo(ti,t,e,n,r,i),!0;case"mouseover":return ni=qo(ni,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return La.set(s,qo(La.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Va.set(s,qo(Va.get(s)||null,t,e,n,r,i)),!0}return!1}function lw(t){var e=bi(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=Y0(n),e!==null){t.blockedOn=e,aw(t.priority,function(){sw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zd=r,n.target.dispatchEvent(r),zd=null}else return e=pl(n),e!==null&&Op(e),t.blockedOn=n,!1;e.shift()}return!0}function Tv(t,e,n){Eu(t)&&n.delete(e)}function NC(){Gd=!1,ei!==null&&Eu(ei)&&(ei=null),ti!==null&&Eu(ti)&&(ti=null),ni!==null&&Eu(ni)&&(ni=null),La.forEach(Tv),Va.forEach(Tv)}function Go(t,e){t.blockedOn===e&&(t.blockedOn=null,Gd||(Gd=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,NC)))}function Fa(t){function e(i){return Go(i,t)}if(0<Jl.length){Go(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ei!==null&&Go(ei,t),ti!==null&&Go(ti,t),ni!==null&&Go(ni,t),La.forEach(e),Va.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)lw(n),n.blockedOn===null&&Kr.shift()}var $s=Ur.ReactCurrentBatchConfig,$u=!0;function DC(t,e,n,r){var i=Le,s=$s.transition;$s.transition=null;try{Le=1,bp(t,e,n,r)}finally{Le=i,$s.transition=s}}function OC(t,e,n,r){var i=Le,s=$s.transition;$s.transition=null;try{Le=4,bp(t,e,n,r)}finally{Le=i,$s.transition=s}}function bp(t,e,n,r){if($u){var i=Kd(t,e,n,r);if(i===null)Gh(t,e,r,Hu,n),Ev(t,r);else if(xC(i,t,e,n,r))r.stopPropagation();else if(Ev(t,r),e&4&&-1<RC.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&iw(s),s=Kd(t,e,n,r),s===null&&Gh(t,e,r,Hu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Gh(t,e,r,null,n)}}var Hu=null;function Kd(t,e,n,r){if(Hu=null,t=xp(r),t=bi(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hu=t,null}function uw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wC()){case Np:return 1;case ew:return 4;case zu:case EC:return 16;case tw:return 536870912;default:return 16}default:return 16}}var Yr=null,Mp=null,Tu=null;function cw(){if(Tu)return Tu;var t,e=Mp,n=e.length,r,i="value"in Yr?Yr.value:Yr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Tu=i.slice(t,1<r?1-r:void 0)}function Su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function Sv(){return!1}function xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zl:Sv,this.isPropagationStopped=Sv,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lp=xn(vo),fl=ot({},vo,{view:0,detail:0}),bC=xn(fl),Fh,jh,Ko,Lc=ot({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ko&&(Ko&&t.type==="mousemove"?(Fh=t.screenX-Ko.screenX,jh=t.screenY-Ko.screenY):jh=Fh=0,Ko=t),Fh)},movementY:function(t){return"movementY"in t?t.movementY:jh}}),Iv=xn(Lc),MC=ot({},Lc,{dataTransfer:0}),LC=xn(MC),VC=ot({},fl,{relatedTarget:0}),Uh=xn(VC),FC=ot({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),jC=xn(FC),UC=ot({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BC=xn(UC),zC=ot({},vo,{data:0}),Cv=xn(zC),WC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HC[t])?!!e[t]:!1}function Vp(){return qC}var GC=ot({},fl,{key:function(t){if(t.key){var e=WC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$C[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(t){return t.type==="keypress"?Su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KC=xn(GC),QC=ot({},Lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Av=xn(QC),YC=ot({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),XC=xn(YC),JC=ot({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZC=xn(JC),eA=ot({},Lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tA=xn(eA),nA=[9,13,27,32],Fp=Nr&&"CompositionEvent"in window,va=null;Nr&&"documentMode"in document&&(va=document.documentMode);var rA=Nr&&"TextEvent"in window&&!va,hw=Nr&&(!Fp||va&&8<va&&11>=va),Pv=" ",kv=!1;function dw(t,e){switch(t){case"keyup":return nA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function iA(t,e){switch(t){case"compositionend":return fw(e);case"keypress":return e.which!==32?null:(kv=!0,Pv);case"textInput":return t=e.data,t===Pv&&kv?null:t;default:return null}}function sA(t,e){if(Ps)return t==="compositionend"||!Fp&&dw(t,e)?(t=cw(),Tu=Mp=Yr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hw&&e.locale!=="ko"?null:e.data;default:return null}}var oA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oA[t.type]:e==="textarea"}function pw(t,e,n,r){H0(r),e=qu(e,"onChange"),0<e.length&&(n=new Lp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ya=null,ja=null;function aA(t){Cw(t,0)}function Vc(t){var e=xs(t);if(F0(e))return t}function lA(t,e){if(t==="change")return e}var mw=!1;if(Nr){var Bh;if(Nr){var zh="oninput"in document;if(!zh){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),zh=typeof xv.oninput=="function"}Bh=zh}else Bh=!1;mw=Bh&&(!document.documentMode||9<document.documentMode)}function Nv(){ya&&(ya.detachEvent("onpropertychange",gw),ja=ya=null)}function gw(t){if(t.propertyName==="value"&&Vc(ja)){var e=[];pw(e,ja,t,xp(t)),Q0(aA,e)}}function uA(t,e,n){t==="focusin"?(Nv(),ya=e,ja=n,ya.attachEvent("onpropertychange",gw)):t==="focusout"&&Nv()}function cA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vc(ja)}function hA(t,e){if(t==="click")return Vc(e)}function dA(t,e){if(t==="input"||t==="change")return Vc(e)}function fA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:fA;function Ua(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xd.call(e,i)||!er(t[i],e[i]))return!1}return!0}function Dv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ov(t,e){var n=Dv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dv(n)}}function vw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yw(){for(var t=window,e=ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ju(t.document)}return e}function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pA(t){var e=yw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vw(n.ownerDocument.documentElement,n)){if(r!==null&&jp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ov(n,s);var o=Ov(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mA=Nr&&"documentMode"in document&&11>=document.documentMode,ks=null,Qd=null,_a=null,Yd=!1;function bv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yd||ks==null||ks!==ju(r)||(r=ks,"selectionStart"in r&&jp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_a&&Ua(_a,r)||(_a=r,r=qu(Qd,"onSelect"),0<r.length&&(e=new Lp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ks)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Wh={},_w={};Nr&&(_w=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Fc(t){if(Wh[t])return Wh[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _w)return Wh[t]=e[n];return t}var ww=Fc("animationend"),Ew=Fc("animationiteration"),Tw=Fc("animationstart"),Sw=Fc("transitionend"),Iw=new Map,Mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,e){Iw.set(t,e),os(e,[t])}for(var $h=0;$h<Mv.length;$h++){var Hh=Mv[$h],gA=Hh.toLowerCase(),vA=Hh[0].toUpperCase()+Hh.slice(1);yi(gA,"on"+vA)}yi(ww,"onAnimationEnd");yi(Ew,"onAnimationIteration");yi(Tw,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(Sw,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yA=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function Lv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gC(r,e,void 0,t),t.currentTarget=null}function Cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Lv(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Lv(i,a,c),s=u}}}if(Bu)throw t=Hd,Bu=!1,Hd=null,t}function Qe(t,e){var n=e[tf];n===void 0&&(n=e[tf]=new Set);var r=t+"__bubble";n.has(r)||(Aw(e,t,2,!1),n.add(r))}function qh(t,e,n){var r=0;e&&(r|=4),Aw(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ba(t){if(!t[tu]){t[tu]=!0,O0.forEach(function(n){n!=="selectionchange"&&(yA.has(n)||qh(n,!1,t),qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,qh("selectionchange",!1,e))}}function Aw(t,e,n,r){switch(uw(e)){case 1:var i=DC;break;case 4:i=OC;break;default:i=bp}n=i.bind(null,e,n,t),i=void 0,!$d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=bi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Q0(function(){var c=s,h=xp(n),f=[];e:{var m=Iw.get(t);if(m!==void 0){var y=Lp,w=t;switch(t){case"keypress":if(Su(n)===0)break e;case"keydown":case"keyup":y=KC;break;case"focusin":w="focus",y=Uh;break;case"focusout":w="blur",y=Uh;break;case"beforeblur":case"afterblur":y=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=LC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=XC;break;case ww:case Ew:case Tw:y=jC;break;case Sw:y=ZC;break;case"scroll":y=bC;break;case"wheel":y=tA;break;case"copy":case"cut":case"paste":y=BC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Av}var k=(e&4)!==0,x=!k&&t==="scroll",T=k?m!==null?m+"Capture":null:m;k=[];for(var _=c,A;_!==null;){A=_;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,T!==null&&(D=Ma(_,T),D!=null&&k.push(za(_,D,A)))),x)break;_=_.return}0<k.length&&(m=new y(m,w,null,n,h),f.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==zd&&(w=n.relatedTarget||n.fromElement)&&(bi(w)||w[Dr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?bi(w):null,w!==null&&(x=as(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(k=Iv,D="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Av,D="onPointerLeave",T="onPointerEnter",_="pointer"),x=y==null?m:xs(y),A=w==null?m:xs(w),m=new k(D,_+"leave",y,n,h),m.target=x,m.relatedTarget=A,D=null,bi(h)===c&&(k=new k(T,_+"enter",w,n,h),k.target=A,k.relatedTarget=x,D=k),x=D,y&&w)t:{for(k=y,T=w,_=0,A=k;A;A=ys(A))_++;for(A=0,D=T;D;D=ys(D))A++;for(;0<_-A;)k=ys(k),_--;for(;0<A-_;)T=ys(T),A--;for(;_--;){if(k===T||T!==null&&k===T.alternate)break t;k=ys(k),T=ys(T)}k=null}else k=null;y!==null&&Vv(f,m,y,k,!1),w!==null&&x!==null&&Vv(f,x,w,k,!0)}}e:{if(m=c?xs(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var F=lA;else if(Rv(m))if(mw)F=dA;else{F=cA;var U=uA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=hA);if(F&&(F=F(t,c))){pw(f,F,n,h);break e}U&&U(t,m,c),t==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&Vd(m,"number",m.value)}switch(U=c?xs(c):window,t){case"focusin":(Rv(U)||U.contentEditable==="true")&&(ks=U,Qd=c,_a=null);break;case"focusout":_a=Qd=ks=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,bv(f,n,h);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":bv(f,n,h)}var I;if(Fp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ps?dw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(hw&&n.locale!=="ko"&&(Ps||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ps&&(I=cw()):(Yr=h,Mp="value"in Yr?Yr.value:Yr.textContent,Ps=!0)),U=qu(c,v),0<U.length&&(v=new Cv(v,t,null,n,h),f.push({event:v,listeners:U}),I?v.data=I:(I=fw(n),I!==null&&(v.data=I)))),(I=rA?iA(t,n):sA(t,n))&&(c=qu(c,"onBeforeInput"),0<c.length&&(h=new Cv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=I))}Cw(f,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ma(t,n),s!=null&&r.unshift(za(t,s,i)),s=Ma(t,e),s!=null&&r.push(za(t,s,i))),t=t.return}return r}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Ma(n,s),u!=null&&o.unshift(za(n,u,a))):i||(u=Ma(n,s),u!=null&&o.push(za(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _A=/\r\n?/g,wA=/\u0000|\uFFFD/g;function Fv(t){return(typeof t=="string"?t:""+t).replace(_A,`
`).replace(wA,"")}function nu(t,e,n){if(e=Fv(e),Fv(t)!==e&&n)throw Error($(425))}function Gu(){}var Xd=null,Jd=null;function Zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,TA=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(t){return jv.resolve(null).then(t).catch(SA)}:ef;function SA(t){setTimeout(function(){throw t})}function Kh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yo=Math.random().toString(36).slice(2),ur="__reactFiber$"+yo,Wa="__reactProps$"+yo,Dr="__reactContainer$"+yo,tf="__reactEvents$"+yo,IA="__reactListeners$"+yo,CA="__reactHandles$"+yo;function bi(t){var e=t[ur];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[ur]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uv(t);t!==null;){if(n=t[ur])return n;t=Uv(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[ur]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function jc(t){return t[Wa]||null}var nf=[],Ns=-1;function _i(t){return{current:t}}function Je(t){0>Ns||(t.current=nf[Ns],nf[Ns]=null,Ns--)}function Ge(t,e){Ns++,nf[Ns]=t.current,t.current=e}var fi={},tn=_i(fi),mn=_i(!1),Ki=fi;function Js(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Ku(){Je(mn),Je(tn)}function Bv(t,e,n){if(tn.current!==fi)throw Error($(168));Ge(tn,e),Ge(mn,n)}function Pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,uC(t)||"Unknown",i));return ot({},n,r)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,Ki=tn.current,Ge(tn,t),Ge(mn,mn.current),!0}function zv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Pw(t,e,Ki),r.__reactInternalMemoizedMergedChildContext=t,Je(mn),Je(tn),Ge(tn,t)):Je(mn),Ge(mn,n)}var Ir=null,Uc=!1,Qh=!1;function kw(t){Ir===null?Ir=[t]:Ir.push(t)}function AA(t){Uc=!0,kw(t)}function wi(){if(!Qh&&Ir!==null){Qh=!0;var t=0,e=Le;try{var n=Ir;for(Le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ir=null,Uc=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),Z0(Np,wi),i}finally{Le=e,Qh=!1}}return null}var Ds=[],Os=0,Yu=null,Xu=0,Dn=[],On=0,Qi=null,Cr=1,Ar="";function Ri(t,e){Ds[Os++]=Xu,Ds[Os++]=Yu,Yu=t,Xu=e}function Rw(t,e,n){Dn[On++]=Cr,Dn[On++]=Ar,Dn[On++]=Qi,Qi=t;var r=Cr;t=Ar;var i=32-Xn(r)-1;r&=~(1<<i),n+=1;var s=32-Xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-Xn(e)+i|n<<i|r,Ar=s+t}else Cr=1<<s|n<<i|r,Ar=t}function Up(t){t.return!==null&&(Ri(t,1),Rw(t,1,0))}function Bp(t){for(;t===Yu;)Yu=Ds[--Os],Ds[Os]=null,Xu=Ds[--Os],Ds[Os]=null;for(;t===Qi;)Qi=Dn[--On],Dn[On]=null,Ar=Dn[--On],Dn[On]=null,Cr=Dn[--On],Dn[On]=null}var An=null,Cn=null,et=!1,Gn=null;function xw(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Cn=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:Cr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Cn=null,!0):!1;default:return!1}}function rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sf(t){if(et){var e=Cn;if(e){var n=e;if(!Wv(t,e)){if(rf(t))throw Error($(418));e=ri(n.nextSibling);var r=An;e&&Wv(t,e)?xw(r,n):(t.flags=t.flags&-4097|2,et=!1,An=t)}}else{if(rf(t))throw Error($(418));t.flags=t.flags&-4097|2,et=!1,An=t}}}function $v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function ru(t){if(t!==An)return!1;if(!et)return $v(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zd(t.type,t.memoizedProps)),e&&(e=Cn)){if(rf(t))throw Nw(),Error($(418));for(;e;)xw(t,e),e=ri(e.nextSibling)}if($v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=An?ri(t.stateNode.nextSibling):null;return!0}function Nw(){for(var t=Cn;t;)t=ri(t.nextSibling)}function Zs(){Cn=An=null,et=!1}function zp(t){Gn===null?Gn=[t]:Gn.push(t)}var PA=Ur.ReactCurrentBatchConfig;function Qo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hv(t){var e=t._init;return e(t._payload)}function Dw(t){function e(T,_){if(t){var A=T.deletions;A===null?(T.deletions=[_],T.flags|=16):A.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function i(T,_){return T=ai(T,_),T.index=0,T.sibling=null,T}function s(T,_,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<_?(T.flags|=2,_):A):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,_,A,D){return _===null||_.tag!==6?(_=nd(A,T.mode,D),_.return=T,_):(_=i(_,A),_.return=T,_)}function u(T,_,A,D){var F=A.type;return F===As?h(T,_,A.props.children,D,A.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===qr&&Hv(F)===_.type)?(D=i(_,A.props),D.ref=Qo(T,_,A),D.return=T,D):(D=xu(A.type,A.key,A.props,null,T.mode,D),D.ref=Qo(T,_,A),D.return=T,D)}function c(T,_,A,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=rd(A,T.mode,D),_.return=T,_):(_=i(_,A.children||[]),_.return=T,_)}function h(T,_,A,D,F){return _===null||_.tag!==7?(_=Bi(A,T.mode,D,F),_.return=T,_):(_=i(_,A),_.return=T,_)}function f(T,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=nd(""+_,T.mode,A),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gl:return A=xu(_.type,_.key,_.props,null,T.mode,A),A.ref=Qo(T,null,_),A.return=T,A;case Cs:return _=rd(_,T.mode,A),_.return=T,_;case qr:var D=_._init;return f(T,D(_._payload),A)}if(oa(_)||$o(_))return _=Bi(_,T.mode,A,null),_.return=T,_;iu(T,_)}return null}function m(T,_,A,D){var F=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:a(T,_,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Gl:return A.key===F?u(T,_,A,D):null;case Cs:return A.key===F?c(T,_,A,D):null;case qr:return F=A._init,m(T,_,F(A._payload),D)}if(oa(A)||$o(A))return F!==null?null:h(T,_,A,D,null);iu(T,A)}return null}function y(T,_,A,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(A)||null,a(_,T,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Gl:return T=T.get(D.key===null?A:D.key)||null,u(_,T,D,F);case Cs:return T=T.get(D.key===null?A:D.key)||null,c(_,T,D,F);case qr:var U=D._init;return y(T,_,A,U(D._payload),F)}if(oa(D)||$o(D))return T=T.get(A)||null,h(_,T,D,F,null);iu(_,D)}return null}function w(T,_,A,D){for(var F=null,U=null,I=_,v=_=0,S=null;I!==null&&v<A.length;v++){I.index>v?(S=I,I=null):S=I.sibling;var E=m(T,I,A[v],D);if(E===null){I===null&&(I=S);break}t&&I&&E.alternate===null&&e(T,I),_=s(E,_,v),U===null?F=E:U.sibling=E,U=E,I=S}if(v===A.length)return n(T,I),et&&Ri(T,v),F;if(I===null){for(;v<A.length;v++)I=f(T,A[v],D),I!==null&&(_=s(I,_,v),U===null?F=I:U.sibling=I,U=I);return et&&Ri(T,v),F}for(I=r(T,I);v<A.length;v++)S=y(I,T,v,A[v],D),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?v:S.key),_=s(S,_,v),U===null?F=S:U.sibling=S,U=S);return t&&I.forEach(function(P){return e(T,P)}),et&&Ri(T,v),F}function k(T,_,A,D){var F=$o(A);if(typeof F!="function")throw Error($(150));if(A=F.call(A),A==null)throw Error($(151));for(var U=F=null,I=_,v=_=0,S=null,E=A.next();I!==null&&!E.done;v++,E=A.next()){I.index>v?(S=I,I=null):S=I.sibling;var P=m(T,I,E.value,D);if(P===null){I===null&&(I=S);break}t&&I&&P.alternate===null&&e(T,I),_=s(P,_,v),U===null?F=P:U.sibling=P,U=P,I=S}if(E.done)return n(T,I),et&&Ri(T,v),F;if(I===null){for(;!E.done;v++,E=A.next())E=f(T,E.value,D),E!==null&&(_=s(E,_,v),U===null?F=E:U.sibling=E,U=E);return et&&Ri(T,v),F}for(I=r(T,I);!E.done;v++,E=A.next())E=y(I,T,v,E.value,D),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?v:E.key),_=s(E,_,v),U===null?F=E:U.sibling=E,U=E);return t&&I.forEach(function(R){return e(T,R)}),et&&Ri(T,v),F}function x(T,_,A,D){if(typeof A=="object"&&A!==null&&A.type===As&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Gl:e:{for(var F=A.key,U=_;U!==null;){if(U.key===F){if(F=A.type,F===As){if(U.tag===7){n(T,U.sibling),_=i(U,A.props.children),_.return=T,T=_;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===qr&&Hv(F)===U.type){n(T,U.sibling),_=i(U,A.props),_.ref=Qo(T,U,A),_.return=T,T=_;break e}n(T,U);break}else e(T,U);U=U.sibling}A.type===As?(_=Bi(A.props.children,T.mode,D,A.key),_.return=T,T=_):(D=xu(A.type,A.key,A.props,null,T.mode,D),D.ref=Qo(T,_,A),D.return=T,T=D)}return o(T);case Cs:e:{for(U=A.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(T,_.sibling),_=i(_,A.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=rd(A,T.mode,D),_.return=T,T=_}return o(T);case qr:return U=A._init,x(T,_,U(A._payload),D)}if(oa(A))return w(T,_,A,D);if($o(A))return k(T,_,A,D);iu(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(n(T,_.sibling),_=i(_,A),_.return=T,T=_):(n(T,_),_=nd(A,T.mode,D),_.return=T,T=_),o(T)):n(T,_)}return x}var eo=Dw(!0),Ow=Dw(!1),Ju=_i(null),Zu=null,bs=null,Wp=null;function $p(){Wp=bs=Zu=null}function Hp(t){var e=Ju.current;Je(Ju),t._currentValue=e}function of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){Zu=t,Wp=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(Wp!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(Zu===null)throw Error($(308));bs=t,Zu.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Mi=null;function qp(t){Mi===null?Mi=[t]:Mi.push(t)}function bw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,qp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gr=!1;function Gp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Or(t,n)}return i=r.interleaved,i===null?(e.next=e,qp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Or(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dp(t,n)}}function qv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ec(t,e,n,r){var i=t.updateQueue;Gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,k=a;switch(m=e,y=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){f=w.call(y,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,m=typeof w=="function"?w.call(y,f,m):w,m==null)break e;f=ot({},f,m);break e;case 2:Gr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xi|=o,t.lanes=o,t.memoizedState=f}}function Gv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var ml={},fr=_i(ml),$a=_i(ml),Ha=_i(ml);function Li(t){if(t===ml)throw Error($(174));return t}function Kp(t,e){switch(Ge(Ha,e),Ge($a,t),Ge(fr,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jd(e,t)}Je(fr),Ge(fr,e)}function to(){Je(fr),Je($a),Je(Ha)}function Lw(t){Li(Ha.current);var e=Li(fr.current),n=jd(e,t.type);e!==n&&(Ge($a,t),Ge(fr,n))}function Qp(t){$a.current===t&&(Je(fr),Je($a))}var it=_i(0);function tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function Yp(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var Cu=Ur.ReactCurrentDispatcher,Xh=Ur.ReactCurrentBatchConfig,Yi=0,st=null,_t=null,Rt=null,nc=!1,wa=!1,qa=0,kA=0;function Ht(){throw Error($(321))}function Xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function Jp(t,e,n,r,i,s){if(Yi=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cu.current=t===null||t.memoizedState===null?DA:OA,t=n(r,i),wa){s=0;do{if(wa=!1,qa=0,25<=s)throw Error($(301));s+=1,Rt=_t=null,e.updateQueue=null,Cu.current=bA,t=n(r,i)}while(wa)}if(Cu.current=rc,e=_t!==null&&_t.next!==null,Yi=0,Rt=_t=st=null,nc=!1,e)throw Error($(300));return t}function Zp(){var t=qa!==0;return qa=0,t}function lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?st.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Un(){if(_t===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Rt===null?st.memoizedState:Rt.next;if(e!==null)Rt=e,_t=t;else{if(t===null)throw Error($(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Rt===null?st.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Ga(t,e){return typeof e=="function"?e(t):e}function Jh(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Yi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,st.lanes|=h,Xi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,er(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,Xi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zh(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);er(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Vw(){}function Fw(t,e){var n=st,r=Un(),i=e(),s=!er(r.memoizedState,i);if(s&&(r.memoizedState=i,pn=!0),r=r.queue,em(Bw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Ka(9,Uw.bind(null,n,r,i,e),void 0,null),Nt===null)throw Error($(349));Yi&30||jw(n,e,i)}return i}function jw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uw(t,e,n,r){e.value=n,e.getSnapshot=r,zw(e)&&Ww(t)}function Bw(t,e,n){return n(function(){zw(e)&&Ww(t)})}function zw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function Ww(t){var e=Or(t,1);e!==null&&Jn(e,t,1,-1)}function Kv(t){var e=lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=NA.bind(null,st,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $w(){return Un().memoizedState}function Au(t,e,n,r){var i=lr();st.flags|=t,i.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function Bc(t,e,n,r){var i=Un();r=r===void 0?null:r;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,r!==null&&Xp(r,o.deps)){i.memoizedState=Ka(e,n,s,r);return}}st.flags|=t,i.memoizedState=Ka(1|e,n,s,r)}function Qv(t,e){return Au(8390656,8,t,e)}function em(t,e){return Bc(2048,8,t,e)}function Hw(t,e){return Bc(4,2,t,e)}function qw(t,e){return Bc(4,4,t,e)}function Gw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kw(t,e,n){return n=n!=null?n.concat([t]):null,Bc(4,4,Gw.bind(null,e,t),n)}function tm(){}function Qw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xw(t,e,n){return Yi&21?(er(n,e)||(n=nw(),st.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function RA(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{Le=n,Xh.transition=r}}function Jw(){return Un().memoizedState}function xA(t,e,n){var r=oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zw(t))eE(e,n);else if(n=bw(t,e,n,r),n!==null){var i=on();Jn(n,t,r,i),tE(n,e,r)}}function NA(t,e,n){var r=oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zw(t))eE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,er(a,o)){var u=e.interleaved;u===null?(i.next=i,qp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=bw(t,e,i,r),n!==null&&(i=on(),Jn(n,t,r,i),tE(n,e,r))}}function Zw(t){var e=t.alternate;return t===st||e!==null&&e===st}function eE(t,e){wa=nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dp(t,n)}}var rc={readContext:jn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},DA={readContext:jn,useCallback:function(t,e){return lr().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:Qv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Au(4194308,4,Gw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Au(4194308,4,t,e)},useInsertionEffect:function(t,e){return Au(4,2,t,e)},useMemo:function(t,e){var n=lr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=lr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xA.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=lr();return t={current:t},e.memoizedState=t},useState:Kv,useDebugValue:tm,useDeferredValue:function(t){return lr().memoizedState=t},useTransition:function(){var t=Kv(!1),e=t[0];return t=RA.bind(null,t[1]),lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=lr();if(et){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Nt===null)throw Error($(349));Yi&30||jw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Qv(Bw.bind(null,r,s,t),[t]),r.flags|=2048,Ka(9,Uw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=lr(),e=Nt.identifierPrefix;if(et){var n=Ar,r=Cr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OA={readContext:jn,useCallback:Qw,useContext:jn,useEffect:em,useImperativeHandle:Kw,useInsertionEffect:Hw,useLayoutEffect:qw,useMemo:Yw,useReducer:Jh,useRef:$w,useState:function(){return Jh(Ga)},useDebugValue:tm,useDeferredValue:function(t){var e=Un();return Xw(e,_t.memoizedState,t)},useTransition:function(){var t=Jh(Ga)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1},bA={readContext:jn,useCallback:Qw,useContext:jn,useEffect:em,useImperativeHandle:Kw,useInsertionEffect:Hw,useLayoutEffect:qw,useMemo:Yw,useReducer:Zh,useRef:$w,useState:function(){return Zh(Ga)},useDebugValue:tm,useDeferredValue:function(t){var e=Un();return _t===null?e.memoizedState=t:Xw(e,_t.memoizedState,t)},useTransition:function(){var t=Zh(Ga)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zc={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=on(),i=oi(t),s=kr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Jn(e,t,i,r),Iu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=on(),i=oi(t),s=kr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Jn(e,t,i,r),Iu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),r=oi(t),i=kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ii(t,i,r),e!==null&&(Jn(e,t,r,n),Iu(e,t,r))}};function Yv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ua(n,r)||!Ua(i,s):!0}function nE(t,e,n){var r=!1,i=fi,s=e.contextType;return typeof s=="object"&&s!==null?s=jn(s):(i=gn(e)?Ki:tn.current,r=e.contextTypes,s=(r=r!=null)?Js(t,i):fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Xv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zc.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jn(s):(s=gn(e)?Ki:tn.current,i.context=Js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(af(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zc.enqueueReplaceState(i,i.state,null),ec(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,e){try{var n="",r=e;do n+=lC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ed(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MA=typeof WeakMap=="function"?WeakMap:Map;function rE(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sc||(sc=!0,_f=r),uf(t,e)},n}function iE(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uf(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Jv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=QA.bind(null,t,e,n),e.then(t,t))}function Zv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ey(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var LA=Ur.ReactCurrentOwner,pn=!1;function sn(t,e,n,r){e.child=t===null?Ow(e,null,n,r):eo(e,t.child,n,r)}function ty(t,e,n,r,i){n=n.render;var s=e.ref;return Hs(e,i),r=Jp(t,e,n,r,s,i),n=Zp(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(et&&n&&Up(e),e.flags|=1,sn(t,e,r,i),e.child)}function ny(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!um(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,sE(t,e,s,r,i)):(t=xu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ua,n(o,r)&&t.ref===e.ref)return br(t,e,i)}return e.flags|=1,t=ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function sE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ua(s,r)&&t.ref===e.ref)if(pn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,br(t,e,i)}return cf(t,e,n,r,i)}function oE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Ls,Sn),Sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Ls,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ge(Ls,Sn),Sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ge(Ls,Sn),Sn|=r;return sn(t,e,i,n),e.child}function aE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cf(t,e,n,r,i){var s=gn(n)?Ki:tn.current;return s=Js(e,s),Hs(e,i),n=Jp(t,e,n,r,s,i),r=Zp(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(et&&r&&Up(e),e.flags|=1,sn(t,e,n,i),e.child)}function ry(t,e,n,r,i){if(gn(n)){var s=!0;Qu(e)}else s=!1;if(Hs(e,i),e.stateNode===null)Pu(t,e),nE(e,n,r),lf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=gn(n)?Ki:tn.current,c=Js(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Xv(e,o,r,c),Gr=!1;var m=e.memoizedState;o.state=m,ec(e,r,o,i),u=e.memoizedState,a!==r||m!==u||mn.current||Gr?(typeof h=="function"&&(af(e,n,h,r),u=e.memoizedState),(a=Gr||Yv(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=jn(u):(u=gn(n)?Ki:tn.current,u=Js(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Xv(e,o,r,u),Gr=!1,m=e.memoizedState,o.state=m,ec(e,r,o,i);var w=e.memoizedState;a!==f||m!==w||mn.current||Gr?(typeof y=="function"&&(af(e,n,y,r),w=e.memoizedState),(c=Gr||Yv(e,n,c,r,m,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return hf(t,e,n,r,s,i)}function hf(t,e,n,r,i,s){aE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zv(e,n,!1),br(t,e,s);r=e.stateNode,LA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,s),e.child=eo(e,null,a,s)):sn(t,e,a,s),e.memoizedState=r.state,i&&zv(e,n,!0),e.child}function lE(t){var e=t.stateNode;e.pendingContext?Bv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bv(t,e.context,!1),Kp(t,e.containerInfo)}function iy(t,e,n,r,i){return Zs(),zp(i),e.flags|=256,sn(t,e,n,r),e.child}var df={dehydrated:null,treeContext:null,retryLane:0};function ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function uE(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(it,i&1),t===null)return sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hc(o,r,0,null),t=Bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ff(n),e.memoizedState=df,t):nm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return VA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ai(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ai(a,s):(s=Bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=df,r}return s=t.child,t=s.sibling,r=ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&zp(r),eo(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ed(Error($(422))),su(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hc({mode:"visible",children:r.children},i,0,null),s=Bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=ff(o),e.memoizedState=df,s);if(!(e.mode&1))return su(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=ed(s,r,void 0),su(t,e,o,r)}if(a=(o&t.childLanes)!==0,pn||a){if(r=Nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Or(t,i),Jn(r,t,i,-1))}return lm(),r=ed(Error($(421))),su(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=YA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cn=ri(i.nextSibling),An=e,et=!0,Gn=null,t!==null&&(Dn[On++]=Cr,Dn[On++]=Ar,Dn[On++]=Qi,Cr=t.id,Ar=t.overflow,Qi=e),e=nm(e,r.children),e.flags|=4096,e)}function sy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),of(t.return,e,n)}function td(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sy(t,n,e);else if(t.tag===19)sy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),td(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}td(e,!0,n,null,s);break;case"together":td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FA(t,e,n){switch(e.tag){case 3:lE(e),Zs();break;case 5:Lw(e);break;case 1:gn(e.type)&&Qu(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ge(Ju,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?uE(t,e,n):(Ge(it,it.current&1),t=br(t,e,n),t!==null?t.sibling:null);Ge(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,oE(t,e,n)}return br(t,e,n)}var hE,pf,dE,fE;hE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pf=function(){};dE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Li(fr.current);var s=null;switch(n){case"input":i=Md(t,i),r=Md(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Fd(t,i),r=Fd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gu)}Ud(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Qe("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yo(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jA(t,e,n){var r=e.pendingProps;switch(Bp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return gn(e.type)&&Ku(),qt(e),null;case 3:return r=e.stateNode,to(),Je(mn),Je(tn),Yp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(Tf(Gn),Gn=null))),pf(t,e),qt(e),null;case 5:Qp(e);var i=Li(Ha.current);if(n=e.type,t!==null&&e.stateNode!=null)dE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return qt(e),null}if(t=Li(fr.current),ru(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ur]=e,r[Wa]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<la.length;i++)Qe(la[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":pv(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":gv(r,s),Qe("invalid",r)}Ud(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,a,t),i=["children",""+a]):Oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":Kl(r),mv(r,s,!0);break;case"textarea":Kl(r),vv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ur]=e,t[Wa]=r,hE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<la.length;i++)Qe(la[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":pv(t,r),i=Md(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":gv(t,r),i=Fd(t,r),Qe("invalid",t);break;default:i=r}Ud(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&z0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ba(t,u):typeof u=="number"&&ba(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Qe("scroll",t):u!=null&&Ap(t,s,u,o))}switch(n){case"input":Kl(t),mv(t,r,!1);break;case"textarea":Kl(t),vv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+di(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)fE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Li(Ha.current),Li(fr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[ur]=e,(s=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ur]=e,e.stateNode=r}return qt(e),null;case 13:if(Je(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Cn!==null&&e.mode&1&&!(e.flags&128))Nw(),Zs(),e.flags|=98560,s=!1;else if(s=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[ur]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),s=!1}else Gn!==null&&(Tf(Gn),Gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Et===0&&(Et=3):lm())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return to(),pf(t,e),t===null&&Ba(e.stateNode.containerInfo),qt(e),null;case 10:return Hp(e.type._context),qt(e),null;case 17:return gn(e.type)&&Ku(),qt(e),null;case 19:if(Je(it),s=e.memoizedState,s===null)return qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yo(s,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tc(t),o!==null){for(e.flags|=128,Yo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&ft()>ro&&(e.flags|=128,r=!0,Yo(s,!1),e.lanes=4194304)}else{if(!r)if(t=tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return qt(e),null}else 2*ft()-s.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Yo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,n=it.current,Ge(it,r?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sn&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function UA(t,e){switch(Bp(e),e.tag){case 1:return gn(e.type)&&Ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Je(mn),Je(tn),Yp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qp(e),null;case 13:if(Je(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(it),null;case 4:return to(),null;case 10:return Hp(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var ou=!1,Yt=!1,BA=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function mf(t,e,n){try{n()}catch(r){ut(t,e,r)}}var oy=!1;function zA(t,e){if(Xd=$u,t=yw(),jp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jd={focusedElem:t,selectionRange:n},$u=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,x=w.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?k:Hn(e.type,k),x);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){ut(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return w=oy,oy=!1,w}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mf(e,n,s)}i=i.next}while(i!==r)}}function Wc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pE(t){var e=t.alternate;e!==null&&(t.alternate=null,pE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ur],delete e[Wa],delete e[tf],delete e[IA],delete e[CA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mE(t){return t.tag===5||t.tag===3||t.tag===4}function ay(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(r!==4&&(t=t.child,t!==null))for(vf(t,e,n),t=t.sibling;t!==null;)vf(t,e,n),t=t.sibling}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}var Mt=null,qn=!1;function Hr(t,e,n){for(n=n.child;n!==null;)gE(t,e,n),n=n.sibling}function gE(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Mc,n)}catch{}switch(n.tag){case 5:Yt||Ms(n,e);case 6:var r=Mt,i=qn;Mt=null,Hr(t,e,n),Mt=r,qn=i,Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?Kh(t.parentNode,n):t.nodeType===1&&Kh(t,n),Fa(t)):Kh(Mt,n.stateNode));break;case 4:r=Mt,i=qn,Mt=n.stateNode.containerInfo,qn=!0,Hr(t,e,n),Mt=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mf(n,e,o),i=i.next}while(i!==r)}Hr(t,e,n);break;case 1:if(!Yt&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ut(n,e,a)}Hr(t,e,n);break;case 21:Hr(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Hr(t,e,n),Yt=r):Hr(t,e,n);break;default:Hr(t,e,n)}}function ly(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BA),e.forEach(function(r){var i=XA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mt=a.stateNode,qn=!1;break e;case 3:Mt=a.stateNode.containerInfo,qn=!0;break e;case 4:Mt=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(Mt===null)throw Error($(160));gE(s,o,i),Mt=null,qn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vE(e,t),e=e.sibling}function vE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),or(t),r&4){try{Ea(3,t,t.return),Wc(3,t)}catch(k){ut(t,t.return,k)}try{Ea(5,t,t.return)}catch(k){ut(t,t.return,k)}}break;case 1:$n(e,t),or(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if($n(e,t),or(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var i=t.stateNode;try{ba(i,"")}catch(k){ut(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&j0(i,s),Bd(a,o);var c=Bd(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?$0(i,f):h==="dangerouslySetInnerHTML"?z0(i,f):h==="children"?ba(i,f):Ap(i,h,f,c)}switch(a){case"input":Ld(i,s);break;case"textarea":U0(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Bs(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Bs(i,!!s.multiple,s.defaultValue,!0):Bs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wa]=s}catch(k){ut(t,t.return,k)}}break;case 6:if($n(e,t),or(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){ut(t,t.return,k)}}break;case 3:if($n(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(k){ut(t,t.return,k)}break;case 4:$n(e,t),or(t);break;case 13:$n(e,t),or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sm=ft())),r&4&&ly(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||h,$n(e,t),Yt=c):$n(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(m=Z,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ea(4,m,m.return);break;case 1:Ms(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(k){ut(r,n,k)}}break;case 5:Ms(m,m.return);break;case 22:if(m.memoizedState!==null){cy(f);continue}}y!==null?(y.return=m,Z=y):cy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=W0("display",o))}catch(k){ut(t,t.return,k)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(k){ut(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$n(e,t),or(t),r&4&&ly(t);break;case 21:break;default:$n(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ba(i,""),r.flags&=-33);var s=ay(t);yf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ay(t);vf(t,a,o);break;default:throw Error($(161))}}catch(u){ut(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WA(t,e,n){Z=t,yE(t)}function yE(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ou;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Yt;a=ou;var c=Yt;if(ou=o,(Yt=u)&&!c)for(Z=i;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?hy(i):u!==null?(u.return=o,Z=u):hy(i);for(;s!==null;)Z=s,yE(s),s=s.sibling;Z=i,ou=a,Yt=c}uy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):uy(t)}}function uy(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Wc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Fa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Yt||e.flags&512&&gf(e)}catch(m){ut(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function cy(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function hy(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wc(4,e)}catch(u){ut(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ut(e,i,u)}}var s=e.return;try{gf(e)}catch(u){ut(e,s,u)}break;case 5:var o=e.return;try{gf(e)}catch(u){ut(e,o,u)}}}catch(u){ut(e,e.return,u)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var $A=Math.ceil,ic=Ur.ReactCurrentDispatcher,rm=Ur.ReactCurrentOwner,Vn=Ur.ReactCurrentBatchConfig,Pe=0,Nt=null,vt=null,jt=0,Sn=0,Ls=_i(0),Et=0,Qa=null,Xi=0,$c=0,im=0,Ta=null,fn=null,sm=0,ro=1/0,Sr=null,sc=!1,_f=null,si=null,au=!1,Xr=null,oc=0,Sa=0,wf=null,ku=-1,Ru=0;function on(){return Pe&6?ft():ku!==-1?ku:ku=ft()}function oi(t){return t.mode&1?Pe&2&&jt!==0?jt&-jt:PA.transition!==null?(Ru===0&&(Ru=nw()),Ru):(t=Le,t!==0||(t=window.event,t=t===void 0?16:uw(t.type)),t):1}function Jn(t,e,n,r){if(50<Sa)throw Sa=0,wf=null,Error($(185));dl(t,n,r),(!(Pe&2)||t!==Nt)&&(t===Nt&&(!(Pe&2)&&($c|=n),Et===4&&Qr(t,jt)),vn(t,r),n===1&&Pe===0&&!(e.mode&1)&&(ro=ft()+500,Uc&&wi()))}function vn(t,e){var n=t.callbackNode;PC(t,e);var r=Wu(t,t===Nt?jt:0);if(r===0)n!==null&&wv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wv(n),e===1)t.tag===0?AA(dy.bind(null,t)):kw(dy.bind(null,t)),TA(function(){!(Pe&6)&&wi()}),n=null;else{switch(rw(r)){case 1:n=Np;break;case 4:n=ew;break;case 16:n=zu;break;case 536870912:n=tw;break;default:n=zu}n=AE(n,_E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _E(t,e){if(ku=-1,Ru=0,Pe&6)throw Error($(327));var n=t.callbackNode;if(qs()&&t.callbackNode!==n)return null;var r=Wu(t,t===Nt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var i=Pe;Pe|=2;var s=EE();(Nt!==t||jt!==e)&&(Sr=null,ro=ft()+500,Ui(t,e));do try{GA();break}catch(a){wE(t,a)}while(!0);$p(),ic.current=s,Pe=i,vt!==null?e=0:(Nt=null,jt=0,e=Et)}if(e!==0){if(e===2&&(i=qd(t),i!==0&&(r=i,e=Ef(t,i))),e===1)throw n=Qa,Ui(t,0),Qr(t,r),vn(t,ft()),n;if(e===6)Qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!HA(i)&&(e=ac(t,r),e===2&&(s=qd(t),s!==0&&(r=s,e=Ef(t,s))),e===1))throw n=Qa,Ui(t,0),Qr(t,r),vn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:xi(t,fn,Sr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=sm+500-ft(),10<e)){if(Wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){on(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ef(xi.bind(null,t,fn,Sr),e);break}xi(t,fn,Sr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$A(r/1960))-r,10<r){t.timeoutHandle=ef(xi.bind(null,t,fn,Sr),r);break}xi(t,fn,Sr);break;case 5:xi(t,fn,Sr);break;default:throw Error($(329))}}}return vn(t,ft()),t.callbackNode===n?_E.bind(null,t):null}function Ef(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=ac(t,e),t!==2&&(e=fn,fn=n,e!==null&&Tf(e)),t}function Tf(t){fn===null?fn=t:fn.push.apply(fn,t)}function HA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!er(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~im,e&=~$c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function dy(t){if(Pe&6)throw Error($(327));qs();var e=Wu(t,0);if(!(e&1))return vn(t,ft()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=qd(t);r!==0&&(e=r,n=Ef(t,r))}if(n===1)throw n=Qa,Ui(t,0),Qr(t,e),vn(t,ft()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xi(t,fn,Sr),vn(t,ft()),null}function om(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(ro=ft()+500,Uc&&wi())}}function Ji(t){Xr!==null&&Xr.tag===0&&!(Pe&6)&&qs();var e=Pe;Pe|=1;var n=Vn.transition,r=Le;try{if(Vn.transition=null,Le=1,t)return t()}finally{Le=r,Vn.transition=n,Pe=e,!(Pe&6)&&wi()}}function am(){Sn=Ls.current,Je(Ls)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EA(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(Bp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ku();break;case 3:to(),Je(mn),Je(tn),Yp();break;case 5:Qp(r);break;case 4:to();break;case 13:Je(it);break;case 19:Je(it);break;case 10:Hp(r.type._context);break;case 22:case 23:am()}n=n.return}if(Nt=t,vt=t=ai(t.current,null),jt=Sn=e,Et=0,Qa=null,im=$c=Xi=0,fn=Ta=null,Mi!==null){for(e=0;e<Mi.length;e++)if(n=Mi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mi=null}return t}function wE(t,e){do{var n=vt;try{if($p(),Cu.current=rc,nc){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nc=!1}if(Yi=0,Rt=_t=st=null,wa=!1,qa=0,rm.current=null,n===null||n.return===null){Et=1,Qa=e,vt=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=jt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Zv(o);if(y!==null){y.flags&=-257,ey(y,o,a,s,e),y.mode&1&&Jv(s,c,e),e=y,u=c;var w=e.updateQueue;if(w===null){var k=new Set;k.add(u),e.updateQueue=k}else w.add(u);break e}else{if(!(e&1)){Jv(s,c,e),lm();break e}u=Error($(426))}}else if(et&&a.mode&1){var x=Zv(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ey(x,o,a,s,e),zp(no(u,a));break e}}s=u=no(u,a),Et!==4&&(Et=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=rE(s,u,e);qv(s,T);break e;case 1:a=u;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(si===null||!si.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=iE(s,a,e);qv(s,D);break e}}s=s.return}while(s!==null)}SE(n)}catch(F){e=F,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function EE(){var t=ic.current;return ic.current=rc,t===null?rc:t}function lm(){(Et===0||Et===3||Et===2)&&(Et=4),Nt===null||!(Xi&268435455)&&!($c&268435455)||Qr(Nt,jt)}function ac(t,e){var n=Pe;Pe|=2;var r=EE();(Nt!==t||jt!==e)&&(Sr=null,Ui(t,e));do try{qA();break}catch(i){wE(t,i)}while(!0);if($p(),Pe=n,ic.current=r,vt!==null)throw Error($(261));return Nt=null,jt=0,Et}function qA(){for(;vt!==null;)TE(vt)}function GA(){for(;vt!==null&&!yC();)TE(vt)}function TE(t){var e=CE(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?SE(t):vt=e,rm.current=null}function SE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UA(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,vt=null;return}}else if(n=jA(n,e,Sn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Et===0&&(Et=5)}function xi(t,e,n){var r=Le,i=Vn.transition;try{Vn.transition=null,Le=1,KA(t,e,n,r)}finally{Vn.transition=i,Le=r}return null}function KA(t,e,n,r){do qs();while(Xr!==null);if(Pe&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kC(t,s),t===Nt&&(vt=Nt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,AE(zu,function(){return qs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vn.transition,Vn.transition=null;var o=Le;Le=1;var a=Pe;Pe|=4,rm.current=null,zA(t,n),vE(n,t),pA(Jd),$u=!!Xd,Jd=Xd=null,t.current=n,WA(n),_C(),Pe=a,Le=o,Vn.transition=s}else t.current=n;if(au&&(au=!1,Xr=t,oc=i),s=t.pendingLanes,s===0&&(si=null),TC(n.stateNode),vn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sc)throw sc=!1,t=_f,_f=null,t;return oc&1&&t.tag!==0&&qs(),s=t.pendingLanes,s&1?t===wf?Sa++:(Sa=0,wf=t):Sa=0,wi(),null}function qs(){if(Xr!==null){var t=rw(oc),e=Vn.transition,n=Le;try{if(Vn.transition=null,Le=16>t?16:t,Xr===null)var r=!1;else{if(t=Xr,Xr=null,oc=0,Pe&6)throw Error($(331));var i=Pe;for(Pe|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Z=c;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:Ea(8,h,s)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var m=h.sibling,y=h.return;if(pE(h),h===c){Z=null;break}if(m!==null){m.return=y,Z=m;break}Z=y}}}var w=s.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,Z=T;break e}Z=s.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Z=A;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wc(9,a)}}catch(F){ut(a,a.return,F)}if(a===o){Z=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,Z=D;break e}Z=a.return}}if(Pe=i,wi(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Mc,t)}catch{}r=!0}return r}finally{Le=n,Vn.transition=e}}return!1}function fy(t,e,n){e=no(n,e),e=rE(t,e,1),t=ii(t,e,1),e=on(),t!==null&&(dl(t,1,e),vn(t,e))}function ut(t,e,n){if(t.tag===3)fy(t,t,n);else for(;e!==null;){if(e.tag===3){fy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=no(n,t),t=iE(e,t,1),e=ii(e,t,1),t=on(),e!==null&&(dl(e,1,t),vn(e,t));break}}e=e.return}}function QA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(jt&n)===n&&(Et===4||Et===3&&(jt&130023424)===jt&&500>ft()-sm?Ui(t,0):im|=n),vn(t,e)}function IE(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=on();t=Or(t,e),t!==null&&(dl(t,e,n),vn(t,n))}function YA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IE(t,n)}function XA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),IE(t,n)}var CE;CE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,FA(t,e,n);pn=!!(t.flags&131072)}else pn=!1,et&&e.flags&1048576&&Rw(e,Xu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pu(t,e),t=e.pendingProps;var i=Js(e,tn.current);Hs(e,n),i=Jp(null,e,r,t,i,n);var s=Zp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(s=!0,Qu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gp(e),i.updater=zc,e.stateNode=i,i._reactInternals=e,lf(e,r,t,n),e=hf(null,e,r,!0,s,n)):(e.tag=0,et&&s&&Up(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZA(r),t=Hn(r,t),i){case 0:e=cf(null,e,r,t,n);break e;case 1:e=ry(null,e,r,t,n);break e;case 11:e=ty(null,e,r,t,n);break e;case 14:e=ny(null,e,r,Hn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),cf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),ry(t,e,r,i,n);case 3:e:{if(lE(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mw(t,e),ec(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=no(Error($(423)),e),e=iy(t,e,r,n,i);break e}else if(r!==i){i=no(Error($(424)),e),e=iy(t,e,r,n,i);break e}else for(Cn=ri(e.stateNode.containerInfo.firstChild),An=e,et=!0,Gn=null,n=Ow(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===i){e=br(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return Lw(e),t===null&&sf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Zd(r,i)?o=null:s!==null&&Zd(r,s)&&(e.flags|=32),aE(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&sf(e),null;case 13:return uE(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),ty(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ge(Ju,r._currentValue),r._currentValue=o,s!==null)if(er(s.value,o)){if(s.children===i.children&&!mn.current){e=br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),of(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),of(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hs(e,n),i=jn(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=Hn(r,e.pendingProps),i=Hn(r.type,i),ny(t,e,r,i,n);case 15:return sE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),Pu(t,e),e.tag=1,gn(r)?(t=!0,Qu(e)):t=!1,Hs(e,n),nE(e,r,i),lf(e,r,i,n),hf(null,e,r,!0,t,n);case 19:return cE(t,e,n);case 22:return oE(t,e,n)}throw Error($(156,e.tag))};function AE(t,e){return Z0(t,e)}function JA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new JA(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZA(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kp)return 11;if(t===Rp)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")um(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return Bi(n.children,i,s,e);case Pp:o=8,i|=8;break;case Nd:return t=Mn(12,n,e,i|2),t.elementType=Nd,t.lanes=s,t;case Dd:return t=Mn(13,n,e,i),t.elementType=Dd,t.lanes=s,t;case Od:return t=Mn(19,n,e,i),t.elementType=Od,t.lanes=s,t;case L0:return Hc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b0:o=10;break e;case M0:o=9;break e;case kp:o=11;break e;case Rp:o=14;break e;case qr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bi(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Hc(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=L0,t.lanes=n,t.stateNode={isHidden:!1},t}function nd(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function rd(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cm(t,e,n,r,i,s,o,a,u){return t=new eP(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(s),t}function tP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PE(t){if(!t)return fi;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(gn(n))return Pw(t,n,e)}return e}function kE(t,e,n,r,i,s,o,a,u){return t=cm(n,r,!0,t,i,s,o,a,u),t.context=PE(null),n=t.current,r=on(),i=oi(n),s=kr(r,i),s.callback=e??null,ii(n,s,i),t.current.lanes=i,dl(t,i,r),vn(t,r),t}function qc(t,e,n,r){var i=e.current,s=on(),o=oi(i);return n=PE(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(i,e,o),t!==null&&(Jn(t,i,o,s),Iu(t,i,o)),o}function lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){py(t,e),(t=t.alternate)&&py(t,e)}function nP(){return null}var RE=typeof reportError=="function"?reportError:function(t){console.error(t)};function dm(t){this._internalRoot=t}Gc.prototype.render=dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));qc(t,e,null,null)};Gc.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){qc(null,t,null,null)}),e[Dr]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ow();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&lw(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function my(){}function rP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lc(o);s.call(c)}}var o=kE(e,r,t,0,null,!1,!1,"",my);return t._reactRootContainer=o,t[Dr]=o.current,Ba(t.nodeType===8?t.parentNode:t),Ji(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=lc(u);a.call(c)}}var u=cm(t,0,!1,null,null,!1,!1,"",my);return t._reactRootContainer=u,t[Dr]=u.current,Ba(t.nodeType===8?t.parentNode:t),Ji(function(){qc(e,u,n,r)}),u}function Qc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=lc(o);a.call(u)}}qc(e,o,t,i)}else o=rP(n,e,t,i,r);return lc(o)}iw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=aa(e.pendingLanes);n!==0&&(Dp(e,n|1),vn(e,ft()),!(Pe&6)&&(ro=ft()+500,wi()))}break;case 13:Ji(function(){var r=Or(t,1);if(r!==null){var i=on();Jn(r,t,1,i)}}),hm(t,1)}};Op=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=on();Jn(e,t,134217728,n)}hm(t,134217728)}};sw=function(t){if(t.tag===13){var e=oi(t),n=Or(t,e);if(n!==null){var r=on();Jn(n,t,e,r)}hm(t,e)}};ow=function(){return Le};aw=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};Wd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jc(r);if(!i)throw Error($(90));F0(r),Ld(r,i)}}}break;case"textarea":U0(t,n);break;case"select":e=n.value,e!=null&&Bs(t,!!n.multiple,e,!1)}};G0=om;K0=Ji;var iP={usingClientEntryPoint:!1,Events:[pl,xs,jc,H0,q0,om]},Xo={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sP={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X0(t),t===null?null:t.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance||nP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Mc=lu.inject(sP),dr=lu}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error($(200));return tP(t,e,null,n)};Rn.createRoot=function(t,e){if(!fm(t))throw Error($(299));var n=!1,r="",i=RE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cm(t,1,!1,null,null,n,!1,r,i),t[Dr]=e.current,Ba(t.nodeType===8?t.parentNode:t),new dm(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=X0(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return Ji(t)};Rn.hydrate=function(t,e,n){if(!Kc(e))throw Error($(200));return Qc(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!fm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kE(e,null,t,1,n??null,i,!1,s,o),t[Dr]=e.current,Ba(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)};Rn.render=function(t,e,n){if(!Kc(e))throw Error($(200));return Qc(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!Kc(t))throw Error($(40));return t._reactRootContainer?(Ji(function(){Qc(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};Rn.unstable_batchedUpdates=om;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Qc(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function xE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xE)}catch(t){console.error(t)}}xE(),x0.exports=Rn;var NE=x0.exports,DE,gy=NE;DE=gy.createRoot,gy.hydrateRoot;var OE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vy=ji.createContext&&ji.createContext(OE),oP=["attr","size","title"];function aP(t,e){if(t==null)return{};var n=lP(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lP(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}function yy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yy(Object(n),!0).forEach(function(r){uP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uP(t,e,n){return e=cP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cP(t){var e=hP(t,"string");return typeof e=="symbol"?e:e+""}function hP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bE(t){return t&&t.map((e,n)=>ji.createElement(e.tag,cc({key:n},e.attr),bE(e.child)))}function ME(t){return e=>ji.createElement(dP,uc({attr:cc({},t.attr)},e),bE(t.child))}function dP(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=aP(t,oP),a=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ji.createElement("svg",uc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:cc(cc({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ji.createElement("title",null,s),t.children)};return vy!==void 0?ji.createElement(vy.Consumer,null,n=>e(n)):e(OE)}function fP(t){return ME({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(t)}function pP(t){return ME({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function LE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=LE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Mr(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=LE(t))&&(r&&(r+=" "),r+=e);return r}const mP=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!gP(i,s)&&r||Object.defineProperty(t,n,s)},gP=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},vP=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},yP=(t,e)=>`/* Wrapped ${t}*/
${e}`,_P=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),wP=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),EP=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=yP.bind(null,r,e.toString());Object.defineProperty(i,"name",wP),Object.defineProperty(t,"toString",{..._P,value:i})},TP=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))mP(t,e,i,n);return vP(t,e),EP(t,e,r),t};var SP=TP,Sf={exports:{}},IP=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=ia&&ia.__awaiter||function(o,a,u,c){return new(u||(u=Promise))(function(h,f){function m(k){try{w(c.next(k))}catch(x){f(x)}}function y(k){try{w(c.throw(k))}catch(x){f(x)}}function w(k){k.done?h(k.value):new u(function(x){x(k.value)}).then(m,y)}w((c=c.apply(o,a||[])).next())})},r=ia&&ia.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(IP);function s(o,a="maxAge"){let u,c,h;const f=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const w=k=>n(this,void 0,void 0,function*(){h=i.default();const x=k[1][a]-Date.now();if(x<=0){o.delete(k[0]),h.resolve();return}return u=k[0],c=setTimeout(()=>{o.delete(k[0]),h&&h.resolve()},x),typeof c.unref=="function"&&c.unref(),h.promise});try{for(const k of o)yield w(k)}catch{}u=void 0}),m=()=>{u=void 0,c!==void 0&&(clearTimeout(c),c=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},y=o.set.bind(o);return o.set=(w,k)=>{o.has(w)&&o.delete(w);const x=y(w,k);return u&&u===w&&m(),f(),x},f(),o}e.default=s,t.exports=s,t.exports.default=s})(Sf,Sf.exports);var CP=Sf.exports;const AP=SP,PP=CP,id=new WeakMap,VE=new WeakMap,hc=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&PP(n);const i=function(...s){const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const u=t.apply(this,s);return n.set(o,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return AP(i,t,{ignoreNonConfigurable:!0}),VE.set(i,n),i};hc.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!id.has(this)){const s=hc(i,t);return id.set(this,s),s}return id.get(this)}};hc.clear=t=>{const e=VE.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var kP=hc;const FE=Oc(kP);function RP(t){return typeof t=="string"}function xP(t,e,n){return n.indexOf(t)===e}function NP(t){return t.toLowerCase()===t}function _y(t){return t.indexOf(",")===-1?t:t.split(",")}function If(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return If(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return If(n)}if(t.indexOf("-")===-1||!NP(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function DP(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],u=[],c=0,h=a;c<h.length;c++){var f=h[c];u=u.concat(_y(f))}var m=navigator.language,y=m&&_y(m);o=o.concat(u,y)}return r&&o.push(s),o.filter(RP).map(If).filter(xP)}var OP=FE(DP,{cacheKey:JSON.stringify});function bP(t){return OP(t)[0]||null}var gl=FE(bP,{cacheKey:JSON.stringify});function Br(t,e,n){return function(i,s){s===void 0&&(s=n);var o=t(i)+s;return e(o)}}function vl(t){return function(n){return new Date(t(n).getTime()-1)}}function yl(t,e){return function(r){return[t(r),e(r)]}}function tt(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function Ei(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function Yc(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function an(t){if(t instanceof Date)return t.getHours();if(typeof t=="string"){var e=t.split(":");if(e.length>=2){var n=e[0];if(n){var r=parseInt(n,10);if(!isNaN(r))return r}}}throw new Error("Failed to get hours from date: ".concat(t,"."))}function Rr(t){if(t instanceof Date)return t.getMinutes();if(typeof t=="string"){var e=t.split(":");if(e.length>=2){var n=e[1]||"0",r=parseInt(n,10);if(!isNaN(r))return r}}throw new Error("Failed to get minutes from date: ".concat(t,"."))}function zi(t){if(t instanceof Date)return t.getSeconds();if(typeof t=="string"){var e=t.split(":");if(e.length>=2){var n=e[2]||"0",r=parseInt(n,10);if(!isNaN(r))return r}}throw new Error("Failed to get seconds from date: ".concat(t,"."))}function sd(t){if(t instanceof Date)return t.getMilliseconds();if(typeof t=="string"){var e=t.split(":");if(e.length>=2){var n=e[2]||"0",r=n.split(".")[1]||"0",i=parseInt(r,10);if(!isNaN(i))return i}}throw new Error("Failed to get seconds from date: ".concat(t,"."))}function _o(t){var e=tt(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var MP=Br(tt,_o,-100),jE=Br(tt,_o,100),pm=vl(jE),LP=Br(tt,pm,-100),UE=yl(_o,pm);function Ti(t){var e=tt(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var BE=Br(tt,Ti,-10),mm=Br(tt,Ti,10),Xc=vl(mm),zE=Br(tt,Xc,-10),WE=yl(Ti,Xc);function wo(t){var e=tt(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var $E=Br(tt,wo,-1),gm=Br(tt,wo,1),Jc=vl(gm),HE=Br(tt,Jc,-1),VP=yl(wo,Jc);function vm(t,e){return function(r,i){i===void 0&&(i=e);var s=tt(r),o=Ei(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function ls(t){var e=tt(t),n=Ei(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var qE=vm(ls,-1),ym=vm(ls,1),_l=vl(ym),GE=vm(_l,-1),FP=yl(ls,_l);function jP(t,e){return function(r,i){i===void 0&&(i=e);var s=tt(r),o=Ei(r),a=Yc(r)+i,u=new Date;return u.setFullYear(s,o,a),u.setHours(0,0,0,0),t(u)}}function wl(t){var e=tt(t),n=Ei(t),r=Yc(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var UP=jP(wl,1),_m=vl(UP),BP=yl(wl,_m);function KE(t){return Yc(_l(t))}function Ia(t,e){e===void 0&&(e=2);var n="".concat(t);return n.length>=e?t:"0000".concat(n).slice(-e)}function QE(t){var e=Ia(an(t)),n=Ia(Rr(t));return"".concat(e,":").concat(n)}function YE(t){var e=Ia(an(t)),n=Ia(Rr(t)),r=Ia(zi(t));return"".concat(e,":").concat(n,":").concat(r)}var Jo,yt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},zP=(Jo={},Jo[yt.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],Jo[yt.HEBREW]=["he","he-IL"],Jo[yt.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],Jo),wm=[0,1,2,3,4,5,6],od=new Map;function WP(t){return function(n,r){var i=n||gl();od.has(i)||od.set(i,new Map);var s=od.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function $P(t){var e=new Date(t);return new Date(e.setHours(12))}function us(t){return function(e,n){return WP(t)(e,$P(n))}}var HP={day:"numeric"},qP={day:"numeric",month:"long",year:"numeric"},GP={month:"long"},KP={month:"long",year:"numeric"},QP={weekday:"short"},YP={weekday:"long"},XP={year:"numeric"},JP=us(HP),ZP=us(qP),ek=us(GP),XE=us(KP),tk=us(QP),nk=us(YP),Zc=us(XP),rk=wm[0],ik=wm[5],wy=wm[6];function Ya(t,e){e===void 0&&(e=yt.ISO_8601);var n=t.getDay();switch(e){case yt.ISO_8601:return(n+6)%7;case yt.ISLAMIC:return(n+1)%7;case yt.HEBREW:case yt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function sk(t){var e=_o(t);return tt(e)}function ok(t){var e=Ti(t);return tt(e)}function Cf(t,e){e===void 0&&(e=yt.ISO_8601);var n=tt(t),r=Ei(t),i=t.getDate()-Ya(t,e);return new Date(n,r,i)}function ak(t,e){e===void 0&&(e=yt.ISO_8601);var n=e===yt.GREGORY?yt.GREGORY:yt.ISO_8601,r=Cf(t,e),i=tt(t)+1,s,o;do s=new Date(i,0,n===yt.ISO_8601?4:1),o=Cf(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Wi(t,e){switch(t){case"century":return _o(e);case"decade":return Ti(e);case"year":return wo(e);case"month":return ls(e);case"day":return wl(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function lk(t,e){switch(t){case"century":return MP(e);case"decade":return BE(e);case"year":return $E(e);case"month":return qE(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function JE(t,e){switch(t){case"century":return jE(e);case"decade":return mm(e);case"year":return gm(e);case"month":return ym(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function uk(t,e){switch(t){case"decade":return BE(e,-100);case"year":return $E(e,-10);case"month":return qE(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function ck(t,e){switch(t){case"decade":return mm(e,100);case"year":return gm(e,10);case"month":return ym(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function ZE(t,e){switch(t){case"century":return pm(e);case"decade":return Xc(e);case"year":return Jc(e);case"month":return _l(e);case"day":return _m(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function hk(t,e){switch(t){case"century":return LP(e);case"decade":return zE(e);case"year":return HE(e);case"month":return GE(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function dk(t,e){switch(t){case"decade":return zE(e,-100);case"year":return HE(e,-10);case"month":return GE(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Ey(t,e){switch(t){case"century":return UE(e);case"decade":return WE(e);case"year":return VP(e);case"month":return FP(e);case"day":return BP(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function fk(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Wi(t,r[0]),ZE(t,r[1])]}function e1(t,e,n){return e===void 0&&(e=Zc),n.map(function(r){return e(t,r)}).join(" – ")}function pk(t,e,n){return e1(t,e,UE(n))}function t1(t,e,n){return e1(t,e,WE(n))}function mk(t){return t.getDay()===new Date().getDay()}function n1(t,e){e===void 0&&(e=yt.ISO_8601);var n=t.getDay();switch(e){case yt.ISLAMIC:case yt.HEBREW:return n===ik||n===wy;case yt.ISO_8601:case yt.GREGORY:return n===wy||n===rk;default:throw new Error("Unsupported calendar type.")}}var ar="react-calendar__navigation";function gk(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?XE:r,s=t.formatYear,o=s===void 0?Zc:s,a=t.locale,u=t.maxDate,c=t.minDate,h=t.navigationAriaLabel,f=h===void 0?"":h,m=t.navigationAriaLive,y=t.navigationLabel,w=t.next2AriaLabel,k=w===void 0?"":w,x=t.next2Label,T=x===void 0?"»":x,_=t.nextAriaLabel,A=_===void 0?"":_,D=t.nextLabel,F=D===void 0?"›":D,U=t.prev2AriaLabel,I=U===void 0?"":U,v=t.prev2Label,S=v===void 0?"«":v,E=t.prevAriaLabel,P=E===void 0?"":E,R=t.prevLabel,C=R===void 0?"‹":R,de=t.setActiveStartDate,Te=t.showDoubleView,ve=t.view,Ve=t.views,H=Ve.indexOf(ve)>0,J=ve!=="century",Y=lk(ve,e),se=J?uk(ve,e):void 0,ne=JE(ve,e),ae=J?ck(ve,e):void 0,pe=function(){if(Y.getFullYear()<0)return!0;var X=hk(ve,e);return c&&c>=X}(),je=J&&function(){if(se.getFullYear()<0)return!0;var X=dk(ve,e);return c&&c>=X}(),Ue=u&&u<ne,$e=J&&u&&u<ae;function M(){de(Y,"prev")}function V(){de(se,"prev2")}function j(){de(ne,"next")}function L(){de(ae,"next2")}function te(X){var ue=function(){switch(ve){case"century":return pk(a,o,X);case"decade":return t1(a,o,X);case"year":return o(a,X);case"month":return i(a,X);default:throw new Error("Invalid view: ".concat(ve,"."))}}();return y?y({date:X,label:ue,locale:a||gl()||void 0,view:ve}):ue}function z(){var X="".concat(ar,"__label");return O.jsxs("button",{"aria-label":f,"aria-live":m,className:X,disabled:!H,onClick:n,style:{flexGrow:1},type:"button",children:[O.jsx("span",{className:"".concat(X,"__labelText ").concat(X,"__labelText--from"),children:te(e)}),Te?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"".concat(X,"__divider"),children:" – "}),O.jsx("span",{className:"".concat(X,"__labelText ").concat(X,"__labelText--to"),children:te(ne)})]}):null]})}return O.jsxs("div",{className:ar,children:[S!==null&&J?O.jsx("button",{"aria-label":I,className:"".concat(ar,"__arrow ").concat(ar,"__prev2-button"),disabled:je,onClick:V,type:"button",children:S}):null,C!==null&&O.jsx("button",{"aria-label":P,className:"".concat(ar,"__arrow ").concat(ar,"__prev-button"),disabled:pe,onClick:M,type:"button",children:C}),z(),F!==null&&O.jsx("button",{"aria-label":A,className:"".concat(ar,"__arrow ").concat(ar,"__next-button"),disabled:Ue,onClick:j,type:"button",children:F}),T!==null&&J?O.jsx("button",{"aria-label":k,className:"".concat(ar,"__arrow ").concat(ar,"__next2-button"),disabled:$e,onClick:L,type:"button",children:T}):null]})}var Vs=function(){return Vs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vs.apply(this,arguments)},vk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ty(t){return"".concat(t,"%")}function Em(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,u=vk(t,["children","className","count","direction","offset","style","wrap"]);return O.jsx("div",Vs({className:n,style:Vs({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},u,{children:Q.Children.map(e,function(c,h){var f=s&&h===0?Ty(100*s/r):null;return Q.cloneElement(c,Vs(Vs({},c.props),{style:{flexBasis:Ty(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function yk(t,e,n){return e&&e>t?e:n&&n<t?n:t}function Xa(t,e){return e[0]<=t&&e[1]>=t}function _k(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function r1(t,e){return Xa(t[0],e)||Xa(t[1],e)}function Sy(t,e,n){var r=r1(e,t),i=[];if(r){i.push(n);var s=Xa(t[0],e),o=Xa(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function wk(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function Ek(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var y=t.dateType;if(!y)throw new Error("dateType is required when date is not an array of two dates");return Ey(y,n)}();if(Xa(o,a)&&s.push("".concat(i,"--now")),!e||!wk(e))return s;var u=function(){if(Array.isArray(e))return e;var y=t.valueType;if(!y)throw new Error("valueType is required when value is not an array of two dates");return Ey(y,e)}();_k(u,a)?s.push("".concat(i,"--active")):r1(u,a)&&s.push("".concat(i,"--hasActive"));var c=Sy(u,a,"".concat(i,"--range"));s.push.apply(s,c);var h=Array.isArray(e)?e:[e];if(r&&h.length===1){var f=r>u[0]?[u[0],r]:[r,u[0]],m=Sy(f,a,"".concat(i,"--hover"));s.push.apply(s,m)}return s}function eh(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,u=t.offset,c=t.renderTile,h=t.start,f=t.step,m=f===void 0?1:f,y=t.value,w=t.valueType,k=[],x=h;x<=o;x+=m){var T=i(x);k.push(c({classes:Ek({date:T,dateType:s,hover:a,value:y,valueType:w}),date:T}))}return O.jsx(Em,{className:e,count:r,offset:u,wrap:!0,children:k})}function th(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,u=t.maxDateTransform,c=t.minDate,h=t.minDateTransform,f=t.onClick,m=t.onMouseOver,y=t.style,w=t.tileClassName,k=t.tileContent,x=t.tileDisabled,T=t.view,_=Q.useMemo(function(){var D={activeStartDate:e,date:i,view:T};return typeof w=="function"?w(D):w},[e,i,w,T]),A=Q.useMemo(function(){var D={activeStartDate:e,date:i,view:T};return typeof k=="function"?k(D):k},[e,i,k,T]);return O.jsxs("button",{className:Mr(r,_),disabled:c&&h(c)>i||a&&u(a)<i||x&&x({activeStartDate:e,date:i,view:T}),onClick:f?function(D){return f(i,D)}:void 0,onFocus:m?function(){return m(i)}:void 0,onMouseOver:m?function(){return m(i)}:void 0,style:y,type:"button",children:[s?O.jsx("abbr",{"aria-label":s(o,i),children:n}):n,A]})}var Af=function(){return Af=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Af.apply(this,arguments)},Tk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Iy="react-calendar__century-view__decades__decade";function Sk(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Zc:i,o=Tk(t,["classes","currentCentury","formatYear"]),a=o.date,u=o.locale,c=[];return n&&c.push.apply(c,n),c.push(Iy),_o(a).getFullYear()!==r&&c.push("".concat(Iy,"--neighboringCentury")),O.jsx(th,Af({},o,{classes:c,maxDateTransform:Xc,minDateTransform:Ti,view:"century",children:t1(u,s,a)}))}var Pf=function(){return Pf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pf.apply(this,arguments)},Cy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ik(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=Cy(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=sk(e),u=a+(r?119:99);return O.jsx(eh,{className:"react-calendar__century-view__decades",dateTransform:Ti,dateType:"decade",end:u,hover:n,renderTile:function(c){var h=c.date,f=Cy(c,["date"]);return O.jsx(Sk,Pf({},o,f,{activeStartDate:e,currentCentury:a,date:h}),h.getTime())},start:a,step:10,value:i,valueType:s})}var kf=function(){return kf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kf.apply(this,arguments)};function Ck(t){function e(){return O.jsx(Ik,kf({},t))}return O.jsx("div",{className:"react-calendar__century-view",children:e()})}var Rf=function(){return Rf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Rf.apply(this,arguments)},Ak=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ay="react-calendar__decade-view__years__year";function Pk(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Zc:i,o=Ak(t,["classes","currentDecade","formatYear"]),a=o.date,u=o.locale,c=[];return n&&c.push.apply(c,n),c.push(Ay),Ti(a).getFullYear()!==r&&c.push("".concat(Ay,"--neighboringDecade")),O.jsx(th,Rf({},o,{classes:c,maxDateTransform:Jc,minDateTransform:wo,view:"decade",children:s(u,a)}))}var xf=function(){return xf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xf.apply(this,arguments)},Py=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function kk(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=Py(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=ok(e),u=a+(r?11:9);return O.jsx(eh,{className:"react-calendar__decade-view__years",dateTransform:wo,dateType:"year",end:u,hover:n,renderTile:function(c){var h=c.date,f=Py(c,["date"]);return O.jsx(Pk,xf({},o,f,{activeStartDate:e,currentDecade:a,date:h}),h.getTime())},start:a,value:i,valueType:s})}var Nf=function(){return Nf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nf.apply(this,arguments)};function Rk(t){function e(){return O.jsx(kk,Nf({},t))}return O.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Df=function(){return Df=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Df.apply(this,arguments)},xk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},ky=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Nk="react-calendar__year-view__months__month";function Dk(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?ek:r,s=t.formatMonthYear,o=s===void 0?XE:s,a=xk(t,["classes","formatMonth","formatMonthYear"]),u=a.date,c=a.locale;return O.jsx(th,Df({},a,{classes:ky(ky([],n,!0),[Nk],!1),formatAbbr:o,maxDateTransform:_l,minDateTransform:ls,view:"year",children:i(c,u)}))}var Of=function(){return Of=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Of.apply(this,arguments)},Ry=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ok(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=Ry(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,u=tt(e);return O.jsx(eh,{className:"react-calendar__year-view__months",dateTransform:function(c){var h=new Date;return h.setFullYear(u,c,1),ls(h)},dateType:"month",end:a,hover:n,renderTile:function(c){var h=c.date,f=Ry(c,["date"]);return O.jsx(Dk,Of({},s,f,{activeStartDate:e,date:h}),h.getTime())},start:o,value:r,valueType:i})}var bf=function(){return bf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bf.apply(this,arguments)};function bk(t){function e(){return O.jsx(Ok,bf({},t))}return O.jsx("div",{className:"react-calendar__year-view",children:e()})}var Mf=function(){return Mf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mf.apply(this,arguments)},Mk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},ad="react-calendar__month-view__days__day";function Lk(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?JP:s,a=t.formatLongDate,u=a===void 0?ZP:a,c=Mk(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=c.date,f=c.locale,m=[];return r&&m.push.apply(m,r),m.push(ad),n1(h,e)&&m.push("".concat(ad,"--weekend")),h.getMonth()!==i&&m.push("".concat(ad,"--neighboringMonth")),O.jsx(th,Mf({},c,{classes:m,formatAbbr:u,maxDateTransform:_m,minDateTransform:wl,view:"month",children:o(f,h)}))}var Lf=function(){return Lf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lf.apply(this,arguments)},xy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Vk(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,u=xy(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=tt(e),h=Ei(e),f=i||s,m=Ya(e,n),y=f?0:m,w=(f?-m:0)+1,k=function(){if(i)return w+6*7-1;var x=KE(e);if(s){var T=new Date;T.setFullYear(c,h,x),T.setHours(0,0,0,0);var _=7-Ya(T,n)-1;return x+_}return x}();return O.jsx(eh,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var T=new Date;return T.setFullYear(c,h,x),wl(T)},dateType:"day",hover:r,end:k,renderTile:function(x){var T=x.date,_=xy(x,["date"]);return O.jsx(Lk,Lf({},u,_,{activeStartDate:e,calendarType:n,currentMonthIndex:h,date:T}),T.getTime())},offset:y,start:w,value:o,valueType:a})}var i1="react-calendar__month-view__weekdays",ld="".concat(i1,"__weekday");function Fk(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?tk:n,i=t.formatWeekday,s=i===void 0?nk:i,o=t.locale,a=t.onMouseLeave,u=new Date,c=ls(u),h=tt(c),f=Ei(c),m=[],y=1;y<=7;y+=1){var w=new Date(h,f,y-Ya(c,e)),k=s(o,w);m.push(O.jsx("div",{className:Mr(ld,mk(w)&&"".concat(ld,"--current"),n1(w,e)&&"".concat(ld,"--weekend")),children:O.jsx("abbr",{"aria-label":k,title:k,children:r(o,w).replace(".","")})},y))}return O.jsx(Em,{className:i1,count:7,onFocus:a,onMouseOver:a,children:m})}var dc=function(){return dc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dc.apply(this,arguments)},Ny=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Dy="react-calendar__tile";function jk(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=O.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=Ny(t,["date","onClickWeekNumber","weekNumber"]);return O.jsx("button",dc({},a,{className:Dy,onClick:function(u){return s(o,i,u)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=Ny(t,["date","onClickWeekNumber","weekNumber"]);return O.jsx("div",dc({},a,{className:Dy,children:r}))}}function Uk(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=KE(e),h=Ya(e,n),f=c-(7-h);return 1+Math.ceil(f/7)}(),a=function(){for(var c=tt(e),h=Ei(e),f=Yc(e),m=[],y=0;y<o;y+=1)m.push(Cf(new Date(c,h,f+y*7),n));return m}(),u=a.map(function(c){return ak(c,n)});return O.jsx(Em,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(c,h){var f=a[h];if(!f)throw new Error("date is not defined");return O.jsx(jk,{date:f,onClickWeekNumber:r,weekNumber:c},c)})})}var Vf=function(){return Vf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vf.apply(this,arguments)},Bk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function zk(t){if(t)for(var e=0,n=Object.entries(zP);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return yt.ISO_8601}function Wk(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?zk(n):s,a=t.formatShortWeekday,u=t.formatWeekday,c=t.onClickWeekNumber,h=t.showWeekNumbers,f=Bk(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function m(){return O.jsx(Fk,{calendarType:o,formatShortWeekday:a,formatWeekday:u,locale:n,onMouseLeave:r})}function y(){return h?O.jsx(Uk,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function w(){return O.jsx(Vk,Vf({calendarType:o},f))}var k="react-calendar__month-view";return O.jsx("div",{className:Mr(k,h?"".concat(k,"--weekNumbers"):""),children:O.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[y(),O.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[m(),w()]})]})})}var Fs=function(){return Fs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fs.apply(this,arguments)},uu="react-calendar",Nu=["century","decade","year","month"],$k=["decade","year","month","day"],Tm=new Date;Tm.setFullYear(1,0,1);Tm.setHours(0,0,0,0);var Hk=new Date(864e13);function ua(t){return t instanceof Date?t:new Date(t)}function s1(t,e){return Nu.slice(Nu.indexOf(t),Nu.indexOf(e)+1)}function qk(t,e,n){var r=s1(e,n);return r.indexOf(t)!==-1}function Sm(t,e,n){return t&&qk(t,e,n)?t:n}function o1(t){var e=Nu.indexOf(t);return $k[e]}function Gk(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=ua(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function a1(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=Gk(n,e);if(!o)return null;var a=o1(s),u=function(){switch(e){case 0:return Wi(a,o);case 1:return ZE(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return yk(u,r,i)}var Im=function(t){return a1(t,0)},l1=function(t){return a1(t,1)},Kk=function(t){return[Im,l1].map(function(e){return e(t)})};function u1(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=Sm(o,i,n),u=Im({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Wi(a,u)}function Qk(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,u=t.minDetail,c=t.value,h=t.view,f=Sm(h,u,o),m=e||n;return m?Wi(f,m):u1({maxDate:s,maxDetail:o,minDate:a,minDetail:u,value:c||r,view:h||i})}function ud(t){return t&&(!Array.isArray(t)||t.length===1)}function cu(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var Yk=Q.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,u=e.defaultValue,c=e.defaultView,h=e.formatDay,f=e.formatLongDate,m=e.formatMonth,y=e.formatMonthYear,w=e.formatShortWeekday,k=e.formatWeekday,x=e.formatYear,T=e.goToRangeStartOnSelect,_=T===void 0?!0:T,A=e.inputRef,D=e.locale,F=e.maxDate,U=F===void 0?Hk:F,I=e.maxDetail,v=I===void 0?"month":I,S=e.minDate,E=S===void 0?Tm:S,P=e.minDetail,R=P===void 0?"century":P,C=e.navigationAriaLabel,de=e.navigationAriaLive,Te=e.navigationLabel,ve=e.next2AriaLabel,Ve=e.next2Label,H=e.nextAriaLabel,J=e.nextLabel,Y=e.onActiveStartDateChange,se=e.onChange,ne=e.onClickDay,ae=e.onClickDecade,pe=e.onClickMonth,je=e.onClickWeekNumber,Ue=e.onClickYear,$e=e.onDrillDown,M=e.onDrillUp,V=e.onViewChange,j=e.prev2AriaLabel,L=e.prev2Label,te=e.prevAriaLabel,z=e.prevLabel,X=e.returnValue,ue=X===void 0?"start":X,me=e.selectRange,ye=e.showDoubleView,St=e.showFixedNumberOfWeeks,nt=e.showNavigation,ht=nt===void 0?!0:nt,yn=e.showNeighboringCentury,_n=e.showNeighboringDecade,Dt=e.showNeighboringMonth,wn=Dt===void 0?!0:Dt,It=e.showWeekNumbers,He=e.tileClassName,oe=e.tileContent,De=e.tileDisabled,pt=e.value,Ot=e.view,nn=Q.useState(a),cn=nn[0],Nn=nn[1],G=Q.useState(null),fe=G[0],ke=G[1],Be=Q.useState(Array.isArray(u)?u.map(function(ge){return ge!==null?ua(ge):null}):u!=null?ua(u):null),En=Be[0],tr=Be[1],nr=Q.useState(c),zn=nr[0],rr=nr[1],mt=r||cn||Qk({activeStartDate:r,defaultActiveStartDate:a,defaultValue:u,defaultView:c,maxDate:U,maxDetail:v,minDate:E,minDetail:R,value:pt,view:Ot}),qe=function(){var ge=function(){return me&&ud(En)?En:pt!==void 0?pt:En}();return ge?Array.isArray(ge)?ge.map(function(Ne){return Ne!==null?ua(Ne):null}):ge!==null?ua(ge):null:null}(),_r=o1(v),Oe=Sm(Ot||zn,R,v),be=s1(R,v),Si=me?fe:null,ps=be.indexOf(Oe)<be.length-1,Ct=be.indexOf(Oe)>0,xo=Q.useCallback(function(ge){var Ne=function(){switch(ue){case"start":return Im;case"end":return l1;case"range":return Kk;default:throw new Error("Invalid returnValue.")}}();return Ne({maxDate:U,maxDetail:v,minDate:E,value:ge})},[U,v,E,ue]),wr=Q.useCallback(function(ge,Ne){Nn(ge);var rt={action:Ne,activeStartDate:ge,value:qe,view:Oe};Y&&!cu(mt,ge)&&Y(rt)},[mt,Y,qe,Oe]),ir=Q.useCallback(function(ge,Ne){var rt=function(){switch(Oe){case"century":return ae;case"decade":return Ue;case"year":return pe;case"month":return ne;default:throw new Error("Invalid view: ".concat(Oe,"."))}}();rt&&rt(ge,Ne)},[ne,ae,pe,Ue,Oe]),No=Q.useCallback(function(ge,Ne){if(ps){ir(ge,Ne);var rt=be[be.indexOf(Oe)+1];if(!rt)throw new Error("Attempted to drill down from the lowest view.");Nn(ge),rr(rt);var hn={action:"drillDown",activeStartDate:ge,value:qe,view:rt};Y&&!cu(mt,ge)&&Y(hn),V&&Oe!==rt&&V(hn),$e&&$e(hn)}},[mt,ps,Y,ir,$e,V,qe,Oe,be]),Do=Q.useCallback(function(){if(Ct){var ge=be[be.indexOf(Oe)-1];if(!ge)throw new Error("Attempted to drill up from the highest view.");var Ne=Wi(ge,mt);Nn(Ne),rr(ge);var rt={action:"drillUp",activeStartDate:Ne,value:qe,view:ge};Y&&!cu(mt,Ne)&&Y(rt),V&&Oe!==ge&&V(rt),M&&M(rt)}},[mt,Ct,Y,M,V,qe,Oe,be]),sr=Q.useCallback(function(ge,Ne){var rt=qe;ir(ge,Ne);var hn=me&&!ud(rt),rn;if(me)if(hn)rn=Wi(_r,ge);else{if(!rt)throw new Error("previousValue is required");if(Array.isArray(rt))throw new Error("previousValue must not be an array");rn=fk(_r,rt,ge)}else rn=xo(ge);var Ci=!me||hn||_?u1({maxDate:U,maxDetail:v,minDate:E,minDetail:R,value:rn,view:Oe}):null;Ne.persist(),Nn(Ci),tr(rn);var Ol={action:"onChange",activeStartDate:Ci,value:rn,view:Oe};if(Y&&!cu(mt,Ci)&&Y(Ol),se)if(me){var bl=ud(rn);if(!bl)se(rn||null,Ne);else if(i){if(Array.isArray(rn))throw new Error("value must not be an array");se([rn||null,null],Ne)}}else se(rn||null,Ne)},[mt,i,xo,_,U,v,E,R,Y,se,ir,me,qe,_r,Oe]);function Th(ge){ke(ge)}function Oo(){ke(null)}Q.useImperativeHandle(n,function(){return{activeStartDate:mt,drillDown:No,drillUp:Do,onChange:sr,setActiveStartDate:wr,value:qe,view:Oe}},[mt,No,Do,sr,wr,qe,Oe]);function Ii(ge){var Ne=ge?JE(Oe,mt):Wi(Oe,mt),rt=ps?No:sr,hn={activeStartDate:Ne,hover:Si,locale:D,maxDate:U,minDate:E,onClick:rt,onMouseOver:me?Th:void 0,tileClassName:He,tileContent:oe,tileDisabled:De,value:qe,valueType:_r};switch(Oe){case"century":return O.jsx(Ck,Fs({formatYear:x,showNeighboringCentury:yn},hn));case"decade":return O.jsx(Rk,Fs({formatYear:x,showNeighboringDecade:_n},hn));case"year":return O.jsx(bk,Fs({formatMonth:m,formatMonthYear:y},hn));case"month":return O.jsx(Wk,Fs({calendarType:s,formatDay:h,formatLongDate:f,formatShortWeekday:w,formatWeekday:k,onClickWeekNumber:je,onMouseLeave:me?Oo:void 0,showFixedNumberOfWeeks:typeof St<"u"?St:ye,showNeighboringMonth:wn,showWeekNumbers:It},hn));default:throw new Error("Invalid view: ".concat(Oe,"."))}}function Dl(){return ht?O.jsx(gk,{activeStartDate:mt,drillUp:Do,formatMonthYear:y,formatYear:x,locale:D,maxDate:U,minDate:E,navigationAriaLabel:C,navigationAriaLive:de,navigationLabel:Te,next2AriaLabel:ve,next2Label:Ve,nextAriaLabel:H,nextLabel:J,prev2AriaLabel:j,prev2Label:L,prevAriaLabel:te,prevLabel:z,setActiveStartDate:wr,showDoubleView:ye,view:Oe,views:be}):null}var bo=Array.isArray(qe)?qe:[qe];return O.jsxs("div",{className:Mr(uu,me&&bo.length===1&&"".concat(uu,"--selectRange"),ye&&"".concat(uu,"--doubleView"),o),ref:A,children:[Dl(),O.jsxs("div",{className:"".concat(uu,"__viewContainer"),onBlur:me?Oo:void 0,onMouseLeave:me?Oo:void 0,children:[Ii(),ye?Ii(!0):null]})]})}),Oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Eo(e)},Eo=function(t){return new Error("Firebase Database ("+c1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Cm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new Jk;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Jk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d1=function(t){const e=h1(t);return Cm.encodeByteArray(e,!0)},fc=function(t){return d1(t).replace(/\./g,"")},Ff=function(t){try{return Cm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return f1(void 0,t)}function f1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!eR(n)||(t[n]=f1(t[n],e[n]));return t}function eR(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof Oy>"u")return;const t=Oy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ff(t[1]);return e&&JSON.parse(e)},Am=()=>{try{return nR()||rR()||iR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sR=t=>{var e,n;return(n=(e=Am())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},p1=t=>{const e=sR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},m1=()=>{var t;return(t=Am())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fc(JSON.stringify(n)),fc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v1())}function oR(){var t;const e=(t=Am())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _1(){return c1.NODE_ADMIN===!0}function lR(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uR(){try{return typeof indexedDB=="object"}catch{return!1}}function cR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FirebaseError";class To extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hR,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w1.prototype.create)}}class w1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new To(i,a,r)}}function dR(t,e){return t.replace(fR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){return JSON.parse(t)}function Vt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ja(Ff(s[0])||""),n=Ja(Ff(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},pR=function(t){const e=E1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},mR=function(t){const e=E1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function io(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function by(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pc(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function jf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(My(s)&&My(o)){if(!jf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function My(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,h;for(let f=0;f<80;f++){f<40?f<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):f<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const m=(i<<5|i>>>27)+c+u+h+r[f]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function yR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){return t&&t._delegate?t._delegate:t}class so{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TR(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(t){return t===Ni?void 0:t}function TR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const IR={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},CR=Ie.INFO,AR={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},PR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=AR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const kR=(t,e)=>e.some(n=>t instanceof n);let Ly,Vy;function RR(){return Ly||(Ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xR(){return Vy||(Vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T1=new WeakMap,Uf=new WeakMap,S1=new WeakMap,cd=new WeakMap,Rm=new WeakMap;function NR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(li(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&T1.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function DR(t){if(Uf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uf.set(t,e)}let Bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||S1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OR(t){Bf=t(Bf)}function bR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hd(this),e,...n);return S1.set(r,e.sort?e.sort():[e]),li(r)}:xR().includes(t)?function(...e){return t.apply(hd(this),e),li(T1.get(this))}:function(...e){return li(t.apply(hd(this),e))}}function MR(t){return typeof t=="function"?bR(t):(t instanceof IDBTransaction&&DR(t),kR(t,RR())?new Proxy(t,Bf):t)}function li(t){if(t instanceof IDBRequest)return NR(t);if(cd.has(t))return cd.get(t);const e=MR(t);return e!==t&&(cd.set(t,e),Rm.set(e,t)),e}const hd=t=>Rm.get(t);function LR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=li(o);return r&&o.addEventListener("upgradeneeded",u=>{r(li(o.result),u.oldVersion,u.newVersion,li(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],dd=new Map;function Fy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dd.get(e))return dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VR.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return dd.set(e,s),s}OR(t=>({...t,get:(e,n,r)=>Fy(e,n)||t.get(e,n,r),has:(e,n)=>!!Fy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",jy="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new km("@firebase/app"),BR="@firebase/app-compat",zR="@firebase/analytics-compat",WR="@firebase/analytics",$R="@firebase/app-check-compat",HR="@firebase/app-check",qR="@firebase/auth",GR="@firebase/auth-compat",KR="@firebase/database",QR="@firebase/database-compat",YR="@firebase/functions",XR="@firebase/functions-compat",JR="@firebase/installations",ZR="@firebase/installations-compat",ex="@firebase/messaging",tx="@firebase/messaging-compat",nx="@firebase/performance",rx="@firebase/performance-compat",ix="@firebase/remote-config",sx="@firebase/remote-config-compat",ox="@firebase/storage",ax="@firebase/storage-compat",lx="@firebase/firestore",ux="@firebase/vertexai-preview",cx="@firebase/firestore-compat",hx="firebase",dx="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",fx={[zf]:"fire-core",[BR]:"fire-core-compat",[WR]:"fire-analytics",[zR]:"fire-analytics-compat",[HR]:"fire-app-check",[$R]:"fire-app-check-compat",[qR]:"fire-auth",[GR]:"fire-auth-compat",[KR]:"fire-rtdb",[QR]:"fire-rtdb-compat",[YR]:"fire-fn",[XR]:"fire-fn-compat",[JR]:"fire-iid",[ZR]:"fire-iid-compat",[ex]:"fire-fcm",[tx]:"fire-fcm-compat",[nx]:"fire-perf",[rx]:"fire-perf-compat",[ix]:"fire-rc",[sx]:"fire-rc-compat",[ox]:"fire-gcs",[ax]:"fire-gcs-compat",[lx]:"fire-fst",[cx]:"fire-fst-compat",[ux]:"fire-vertex","fire-js":"fire-js",[hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,px=new Map,$f=new Map;function Uy(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Za(t){const e=t.name;if($f.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,t);for(const n of mc.values())Uy(n,t);for(const n of px.values())Uy(n,t);return!0}function I1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new w1("app","Firebase",mx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=dx;function A1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(n||(n=m1()),!n)throw ui.create("no-options");const s=mc.get(i);if(s){if(jf(n,s.options)&&jf(r,s.config))return s;throw ui.create("duplicate-app",{appName:i})}const o=new SR(i);for(const u of $f.values())o.addComponent(u);const a=new gx(n,r,o);return mc.set(i,a),a}function P1(t=Wf){const e=mc.get(t);if(!e&&t===Wf&&m1())return A1();if(!e)throw ui.create("no-app",{appName:t});return e}function ci(t,e,n){var r;let i=(r=fx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Za(new so(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="firebase-heartbeat-database",yx=1,el="firebase-heartbeat-store";let fd=null;function k1(){return fd||(fd=LR(vx,yx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),fd}async function _x(t){try{const n=(await k1()).transaction(el),r=await n.objectStore(el).get(R1(t));return await n.done,r}catch(e){if(e instanceof To)Lr.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function By(t,e){try{const r=(await k1()).transaction(el,"readwrite");await r.objectStore(el).put(e,R1(t)),await r.done}catch(n){if(n instanceof To)Lr.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function R1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=1024,Ex=30*24*60*60*1e3;class Tx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ix(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zy();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=Ex}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:i}=Sx(this._heartbeatsCache.heartbeats),s=fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function Sx(t,e=wx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ix{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uR()?cR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _x(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return By(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return By(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wy(t){return fc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){Za(new so("platform-logger",e=>new jR(e),"PRIVATE")),Za(new so("heartbeat",e=>new Tx(e),"PRIVATE")),ci(zf,jy,t),ci(zf,jy,"esm2017"),ci("fire-js","")}Cx("");var Ax="firebase",Px="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(Ax,Px,"app");var $y={};const Hy="@firebase/database",qy="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x1="";function kx(t){x1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Vt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ja(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rx(e)}}catch{}return new xx},Vi=N1("localStorage"),Nx=N1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new km("@firebase/database"),Dx=function(){let t=1;return function(){return t++}}(),D1=function(t){const e=_R(t),n=new vR;n.update(e);const r=n.digest();return Cm.encodeByteArray(r)},El=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=El.apply(null,r):typeof r=="object"?e+=Vt(r):e+=r,e+=" "}return e};let Ca=null,Gy=!0;const Ox=function(t,e){K(!e,"Can't turn on custom loggers persistently."),Gs.logLevel=Ie.VERBOSE,Ca=Gs.log.bind(Gs)},Xt=function(...t){if(Gy===!0&&(Gy=!1,Ca===null&&Nx.get("logging_enabled")===!0&&Ox()),Ca){const e=El.apply(null,t);Ca(e)}},Tl=function(t){return function(...e){Xt(t,...e)}},Hf=function(...t){const e="FIREBASE INTERNAL ERROR: "+El(...t);Gs.error(e)},Vr=function(...t){const e=`FIREBASE FATAL ERROR: ${El(...t)}`;throw Gs.error(e),new Error(e)},Pn=function(...t){const e="FIREBASE WARNING: "+El(...t);Gs.warn(e)},bx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},O1=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Mx=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},oo="[MIN_NAME]",es="[MAX_NAME]",So=function(t,e){if(t===e)return 0;if(t===oo||e===es)return-1;if(e===oo||t===es)return 1;{const n=Ky(t),r=Ky(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Lx=function(t,e){return t===e?0:t<e?-1:1},Zo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Vt(e))},xm=function(t){if(typeof t!="object"||t===null)return Vt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Vt(e[r]),n+=":",n+=xm(t[e[r]]);return n+="}",n},b1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Bn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const M1=function(t){K(!O1(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let f="";for(u=0;u<64;u+=8){let m=parseInt(h.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},Vx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Fx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},jx=new RegExp("^-?(0*)\\d{1,10}$"),Ux=-2147483648,Bx=2147483647,Ky=function(t){if(jx.test(t)){const e=Number(t);if(e>=Ux&&e<=Bx)return e}return null},Sl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Pn("Exception was thrown by user callback.",n),e},Math.floor(0))}},zx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Aa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(e)}}class Du{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Du.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="5",L1="v",V1="s",F1="r",j1="f",U1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B1="ls",z1="p",qf="ac",W1="websocket",$1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Hx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function q1(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===W1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Hx(t)&&(n.ns=t.namespace);const i=[];return Bn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.counters_={}}incrementCounter(e,n=1){zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={},md={};function Dm(t){const e=t.toString();return pd[e]||(pd[e]=new qx),pd[e]}function Gx(t,e){const n=t.toString();return md[n]||(md[n]=e()),md[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Sl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="start",Qx="close",Yx="pLPCommand",Xx="pRTLPCB",G1="id",K1="pw",Q1="ser",Jx="cb",Zx="seg",eN="ts",tN="d",nN="dframe",Y1=1870,X1=30,rN=Y1-X1,iN=25e3,sN=3e4;class js{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tl(e),this.stats_=Dm(n),this.urlFn=u=>(this.appCheckToken&&(u[qf]=this.appCheckToken),q1(n,$1,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Kx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sN)),Mx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Om((...s)=>{const[o,a,u,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Qy)this.id=a,this.password=u;else if(o===Qx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Qy]="t",r[Q1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Jx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[L1]=Nm,this.transportSessionId&&(r[V1]=this.transportSessionId),this.lastSessionId&&(r[B1]=this.lastSessionId),this.applicationId&&(r[z1]=this.applicationId),this.appCheckToken&&(r[qf]=this.appCheckToken),typeof location<"u"&&location.hostname&&U1.test(location.hostname)&&(r[F1]=j1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){js.forceAllow_=!0}static forceDisallow(){js.forceDisallow_=!0}static isAvailable(){return js.forceAllow_?!0:!js.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vx()&&!Fx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=d1(n),i=b1(r,rN);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[nN]="t",r[G1]=e,r[K1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Vt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Om{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Dx(),window[Yx+this.uniqueCallbackIdentifier]=e,window[Xx+this.uniqueCallbackIdentifier]=n,this.myIFrame=Om.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xt("frame writing exception"),a.stack&&Xt(a.stack),Xt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[G1]=this.myID,e[K1]=this.myPW,e[Q1]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+X1+r.length<=Y1;){const o=this.pendingSegs.shift();r=r+"&"+Zx+i+"="+o.seg+"&"+eN+i+"="+o.ts+"&"+tN+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(iN)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=16384,aN=45e3;let gc=null;typeof MozWebSocket<"u"?gc=MozWebSocket:typeof WebSocket<"u"&&(gc=WebSocket);class Kn{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tl(this.connId),this.stats_=Dm(n),this.connURL=Kn.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[L1]=Nm,typeof location<"u"&&location.hostname&&U1.test(location.hostname)&&(o[F1]=j1),n&&(o[V1]=n),r&&(o[B1]=r),i&&(o[qf]=i),s&&(o[z1]=s),q1(e,W1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vi.set("previous_websocket_failure",!0);try{let r;_1(),this.mySock=new gc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Kn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gc!==null&&!Kn.forceDisallow_}static previouslyFailed(){return Vi.isInMemoryStorage||Vi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ja(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=b1(n,oN);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aN))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Kn.responsesRequiredToBeHealthy=2;Kn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[js,Kn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Kn&&Kn.isAvailable();let r=n&&!Kn.previouslyFailed();if(e.webSocketOnly&&(n||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Kn];else{const i=this.transports_=[];for(const s of tl.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);tl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=6e4,uN=5e3,cN=10*1024,hN=100*1024,gd="t",Yy="d",dN="s",Xy="r",fN="e",Jy="o",Zy="a",e_="n",t_="p",pN="h";class mN{constructor(e,n,r,i,s,o,a,u,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tl("c:"+this.id+":"),this.transportManager_=new tl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Aa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gd in e){const n=e[gd];n===Zy?this.upgradeIfSecondaryHealthy_():n===Xy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Jy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zo("t",e),r=Zo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:t_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:e_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zo("t",e),r=Zo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zo(gd,e);if(Yy in e){const r=e[Yy];if(n===pN){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===e_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dN?this.onConnectionShutdown_(r):n===Xy?this.onReset_(r):n===fN?Hf("Server Error: "+r):n===Jy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Nm!==r&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Aa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:t_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Z1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!y1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vc}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=32,r_=768;class Ze{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Fe(){return new Ze("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pi(t){return t.pieces_.length-t.pieceNum_}function Xe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ze(t.pieces_,e)}function eT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gN(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function tT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ze(e,0)}function xt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ze)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ze(n,0)}function Ee(t){return t.pieceNum_>=t.pieces_.length}function Ln(t,e){const n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return Ln(Xe(t),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rT(t,e){if(pi(t)!==pi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Qn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(pi(t)>pi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class vN{constructor(e,n){this.errorPrefix_=n,this.parts_=tT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=nh(this.parts_[r]);iT(this)}}function yN(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=nh(e),iT(t)}function _N(t){const e=t.parts_.pop();t.byteLength_-=nh(e),t.parts_.length>0&&(t.byteLength_-=1)}function iT(t){if(t.byteLength_>r_)throw new Error(t.errorPrefix_+"has a key path longer than "+r_+" bytes ("+t.byteLength_+").");if(t.parts_.length>n_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+n_+") or object contains a cycle "+Di(t))}function Di(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Z1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new bm}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=1e3,wN=60*5*1e3,i_=30*1e3,EN=1.3,TN=3e4,SN="server_kill",s_=3;class xr extends J1{constructor(e,n,r,i,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=xr.nextPersistentConnectionId_++,this.log_=Tl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ea,this.maxReconnectDelay_=wN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!_1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Vt(s)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Pm,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const u=a.d,c=a.s;xr.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&zr(e,"w")){const r=io(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||mR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=i_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=pR(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Vt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hf("Unrecognized action received from server: "+Vt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>TN&&(this.reconnectDelay_=ea),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*EN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,r())},c=function(f){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:u,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Xt("getToken() completed but was canceled"):(Xt("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,a=new mN(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Pn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(SN)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&Pn(f),u())}}}interrupt(e){Xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],by(this.interruptReasons_)&&(this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>xm(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ze(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Xt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s_&&(this.reconnectDelay_=i_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+x1.replace(/\./g,"-")]=1,y1()?e["framework.cordova"]=1:aR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vc.getInstance().currentlyOnline();return by(this.interruptReasons_)&&e}}xr.nextPersistentConnectionId_=0;xr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ae(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ae(oo,e),i=new Ae(oo,n);return this.compare(r,i)!==0}minPost(){return Ae.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class sT extends rh{static get __EMPTY_NODE(){return hu}static set __EMPTY_NODE(e){hu=e}compare(e,n){return So(e.name,n.name)}isDefinedOn(e){throw Eo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(es,hu)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new Ae(e,hu)}toString(){return".key"}}const Ks=new sT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},In=class ca{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ca.RED,this.left=i??cr.EMPTY_NODE,this.right=s??cr.EMPTY_NODE}copy(e,n,r,i,s){return new ca(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return cr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return cr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ca.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ca.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};In.RED=!0;In.BLACK=!1;class IN{copy(e,n,r,i,s){return this}insert(e,n,r){return new In(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let cr=class Ou{constructor(e,n=Ou.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ou(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,In.BLACK,null,null))}remove(e){return new Ou(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,In.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new du(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new du(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new du(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new du(this.root_,null,this.comparator_,!0,e)}};cr.EMPTY_NODE=new IN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){return So(t.name,e.name)}function Mm(t,e){return So(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;function AN(t){Gf=t}const oT=function(t){return typeof t=="number"?"number:"+M1(t):"string:"+t},aT=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zr(e,".sv"),"Priority must be a string or number.")}else K(t===Gf||t.isEmpty(),"priority of unexpected type.");K(t===Gf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_;class Pt{constructor(e,n=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aT(this.priorityNode_)}static set __childrenNodeConstructor(e){o_=e}static get __childrenNodeConstructor(){return o_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ee(e)?this:Ce(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ce(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||pi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=M1(this.value_):e+=this.value_,this.lazyHash_=D1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Pt.VALUE_TYPE_ORDER.indexOf(n),s=Pt.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+n),K(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lT,uT;function PN(t){lT=t}function kN(t){uT=t}class RN extends rh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?So(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(es,new Pt("[PRIORITY-POST]",uT))}makePost(e,n){const r=lT(e);return new Ae(n,new Pt("[PRIORITY-POST]",r))}toString(){return".priority"}}const en=new RN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=Math.log(2);class NN{constructor(e){const n=s=>parseInt(Math.log(s)/xN,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yc=function(t,e,n,r){t.sort(e);const i=function(u,c){const h=c-u;let f,m;if(h===0)return null;if(h===1)return f=t[u],m=n?n(f):f,new In(m,f.node,In.BLACK,null,null);{const y=parseInt(h/2,10)+u,w=i(u,y),k=i(y+1,c);return f=t[y],m=n?n(f):f,new In(m,f.node,In.BLACK,w,k)}},s=function(u){let c=null,h=null,f=t.length;const m=function(w,k){const x=f-w,T=f;f-=w;const _=i(x+1,T),A=t[x],D=n?n(A):A;y(new In(D,A.node,k,null,_))},y=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<u.count;++w){const k=u.nextBitIsOne(),x=Math.pow(2,u.count-(w+1));k?m(x,In.BLACK):(m(x,In.BLACK),m(x,In.RED))}return h},o=new NN(t.length),a=s(o);return new cr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd;const _s={};class Pr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K(_s&&en,"ChildrenNode.ts has not been loaded"),vd=vd||new Pr({".priority":_s},{".priority":en}),vd}get(e){const n=io(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof cr?n:null}hasIndex(e){return zr(this.indexSet_,e.toString())}addIndex(e,n){K(e!==Ks,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ae.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=yc(r,e.getCompare()):a=_s;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const h=Object.assign({},this.indexes_);return h[u]=a,new Pr(h,c)}addToIndexes(e,n){const r=pc(this.indexes_,(i,s)=>{const o=io(this.indexSet_,s);if(K(o,"Missing index implementation for "+s),i===_s)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(Ae.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),yc(a,o.getCompare())}else return _s;else{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new Ae(e.name,a))),u.insert(e,e.node)}});return new Pr(r,this.indexSet_)}removeFromIndexes(e,n){const r=pc(this.indexes_,i=>{if(i===_s)return i;{const s=n.get(e.name);return s?i.remove(new Ae(e.name,s)):i}});return new Pr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta;class Me{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aT(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ta||(ta=new Me(new cr(Mm),null,Pr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ta}updatePriority(e){return this.children_.isEmpty()?this:new Me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ta:n}}getChild(e){const n=Ce(e);return n===null?this:this.getImmediateChild(n).getChild(Xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ae(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ta:this.priorityNode_;return new Me(i,o,s)}}updateChild(e,n){const r=Ce(e);if(r===null)return n;{K(Ce(e)!==".priority"||pi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Xe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(en,(o,a)=>{n[o]=a.val(e),r++,s&&Me.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oT(this.getPriority().val())+":"),this.forEachChild(en,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":D1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ae(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ae(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ae(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ae.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ae.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Il?-1:0}withIndex(e){if(e===Ks||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Me(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ks||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(en),i=n.getIterator(en);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ks?null:this.indexMap_.get(e.toString())}}Me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class DN extends Me{constructor(){super(new cr(Mm),Me.EMPTY_NODE,Pr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Me.EMPTY_NODE}isEmpty(){return!1}}const Il=new DN;Object.defineProperties(Ae,{MIN:{value:new Ae(oo,Me.EMPTY_NODE)},MAX:{value:new Ae(es,Il)}});sT.__EMPTY_NODE=Me.EMPTY_NODE;Pt.__childrenNodeConstructor=Me;AN(Il);kN(Il);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=!0;function Jt(t,e=null){if(t===null)return Me.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pt(n,Jt(e))}if(!(t instanceof Array)&&ON){const n=[];let r=!1;if(Bn(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=Jt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Ae(o,u)))}}),n.length===0)return Me.EMPTY_NODE;const s=yc(n,CN,o=>o.name,Mm);if(r){const o=yc(n,en.getCompare());return new Me(s,Jt(e),new Pr({".priority":o},{".priority":en}))}else return new Me(s,Jt(e),Pr.Default)}else{let n=Me.EMPTY_NODE;return Bn(t,(r,i)=>{if(zr(t,r)&&r.substring(0,1)!=="."){const s=Jt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Jt(e))}}PN(Jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN extends rh{constructor(e){super(),this.indexPath_=e,K(!Ee(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?So(e.name,n.name):s}makePost(e,n){const r=Jt(e),i=Me.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ae(n,i)}maxPost(){const e=Me.EMPTY_NODE.updateChild(this.indexPath_,Il);return new Ae(es,e)}toString(){return tT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN extends rh{compare(e,n){const r=e.node.compareTo(n.node);return r===0?So(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,n){const r=Jt(e);return new Ae(n,r)}toString(){return".value"}}const LN=new MN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){return{type:"value",snapshotNode:t}}function FN(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function jN(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function a_(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=en}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:oo}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:es}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===en}copy(){const e=new Lm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function l_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===en?n="$priority":t.index_===LN?n="$value":t.index_===Ks?n="$key":(K(t.index_ instanceof bN,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Vt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Vt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Vt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Vt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Vt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function u_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==en&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends J1{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Tl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=_c.getListenId_(e,r),a={};this.listens_[o]=a;const u=l_(e._queryParams);this.restRequest_(s+".json",u,(c,h)=>{let f=h;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(s,f,!1,r),io(this.listens_,o)===a){let m;c?c===401?m="permission_denied":m="rest_error:"+c:m="ok",i(m,null)}})}unlisten(e,n){const r=_c.getListenId_(e,n);delete this.listens_[r]}get(e){const n=l_(e._queryParams),r=e._path.toString(),i=new Pm;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gR(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Ja(a.responseText)}catch{Pn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&Pn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.rootNode_=Me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(){return{value:null,children:new Map}}function cT(t,e,n){if(Ee(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ce(e);t.children.has(r)||t.children.set(r,wc());const i=t.children.get(r);e=Xe(e),cT(i,e,n)}}function Kf(t,e,n){t.value!==null?n(e,t.value):zN(t,(r,i)=>{const s=new Ze(e.toString()+"/"+r);Kf(i,s,n)})}function zN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Bn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=10*1e3,$N=30*1e3,HN=5*60*1e3;class qN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WN(e);const r=c_+($N-c_)*Math.random();Aa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Bn(e,(i,s)=>{s>0&&zr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Aa(this.reportStats_.bind(this),Math.floor(Math.random()*2*HN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hr||(hr={}));function hT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=hr.ACK_USER_WRITE,this.source=hT()}operationForChild(e){if(Ee(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ze(e));return new Ec(Fe(),n,this.revert)}}else return K(Ce(this.path)===e,"operationForChild called for unrelated child."),new Ec(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=hr.OVERWRITE}operationForChild(e){return Ee(this.path)?new ts(this.source,Fe(),this.snap.getImmediateChild(e)):new ts(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=hr.MERGE}operationForChild(e){if(Ee(this.path)){const n=this.children.subtree(new Ze(e));return n.isEmpty()?null:n.value?new ts(this.source,Fe(),n.value):new nl(this.source,Fe(),n)}else return K(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nl(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function GN(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(UN(o.childName,o.snapshotNode))}),na(t,i,"child_removed",e,r,n),na(t,i,"child_added",e,r,n),na(t,i,"child_moved",s,r,n),na(t,i,"child_changed",e,r,n),na(t,i,"value",e,r,n),i}function na(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>QN(t,a,u)),o.forEach(a=>{const u=KN(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function KN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function QN(t,e,n){if(e.childName==null||n.childName==null)throw Eo("Should only compare child_ events.");const r=new Ae(e.childName,e.snapshotNode),i=new Ae(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e){return{eventCache:t,serverCache:e}}function Pa(t,e,n,r){return pT(new Vm(e,n,r),t.serverCache)}function mT(t,e,n,r){return pT(t.eventCache,new Vm(e,n,r))}function Qf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ns(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd;const YN=()=>(yd||(yd=new cr(Lx)),yd);class Ye{constructor(e,n=YN()){this.value=e,this.children=n}static fromObject(e){let n=new Ye(null);return Bn(e,(r,i)=>{n=n.set(new Ze(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(Ee(e))return null;{const r=Ce(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Xe(e),n);return s!=null?{path:xt(new Ze(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ee(e))return this;{const n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(Xe(e)):new Ye(null)}}set(e,n){if(Ee(e))return new Ye(n,this.children);{const r=Ce(e),s=(this.children.get(r)||new Ye(null)).set(Xe(e),n),o=this.children.insert(r,s);return new Ye(this.value,o)}}remove(e){if(Ee(e))return this.children.isEmpty()?new Ye(null):new Ye(null,this.children);{const n=Ce(e),r=this.children.get(n);if(r){const i=r.remove(Xe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ye(null):new Ye(this.value,s)}else return this}}get(e){if(Ee(e))return this.value;{const n=Ce(e),r=this.children.get(n);return r?r.get(Xe(e)):null}}setTree(e,n){if(Ee(e))return n;{const r=Ce(e),s=(this.children.get(r)||new Ye(null)).setTree(Xe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ye(this.value,o)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(xt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ee(e))return null;{const s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(Xe(e),xt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,r){if(Ee(e))return this;{this.value&&r(n,this.value);const i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(Xe(e),xt(n,i),r):new Ye(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(xt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.writeTree_=e}static empty(){return new Zn(new Ye(null))}}function ka(t,e,n){if(Ee(e))return new Zn(new Ye(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ln(i,e);return s=s.updateChild(o,n),new Zn(t.writeTree_.set(i,s))}else{const i=new Ye(n),s=t.writeTree_.setTree(e,i);return new Zn(s)}}}function h_(t,e,n){let r=t;return Bn(n,(i,s)=>{r=ka(r,xt(e,i),s)}),r}function d_(t,e){if(Ee(e))return Zn.empty();{const n=t.writeTree_.setTree(e,new Ye(null));return new Zn(n)}}function Yf(t,e){return cs(t,e)!=null}function cs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ln(n.path,e)):null}function f_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(en,(r,i)=>{e.push(new Ae(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ae(r,i.value))}),e}function hi(t,e){if(Ee(e))return t;{const n=cs(t,e);return n!=null?new Zn(new Ye(n)):new Zn(t.writeTree_.subtree(e))}}function Xf(t){return t.writeTree_.isEmpty()}function ao(t,e){return gT(Fe(),t.writeTree_,e)}function gT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=gT(xt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(xt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e){return TT(e,t)}function XN(t,e,n,r,i){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ka(t.visibleWrites,e,n)),t.lastWriteId=r}function JN(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function ZN(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&eD(a,r.path)?i=!1:Qn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return tD(t),!0;if(r.snap)t.visibleWrites=d_(t.visibleWrites,r.path);else{const a=r.children;Bn(a,u=>{t.visibleWrites=d_(t.visibleWrites,xt(r.path,u))})}return!0}else return!1}function eD(t,e){if(t.snap)return Qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qn(xt(t.path,n),e))return!0;return!1}function tD(t){t.visibleWrites=yT(t.allWrites,nD,Fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nD(t){return t.visible}function yT(t,e,n){let r=Zn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Qn(n,o)?(a=Ln(n,o),r=ka(r,a,s.snap)):Qn(o,n)&&(a=Ln(o,n),r=ka(r,Fe(),s.snap.getChild(a)));else if(s.children){if(Qn(n,o))a=Ln(n,o),r=h_(r,a,s.children);else if(Qn(o,n))if(a=Ln(o,n),Ee(a))r=h_(r,Fe(),s.children);else{const u=io(s.children,Ce(a));if(u){const c=u.getChild(Xe(a));r=ka(r,Fe(),c)}}}else throw Eo("WriteRecord should have .snap or .children")}}return r}function _T(t,e,n,r,i){if(!r&&!i){const s=cs(t.visibleWrites,e);if(s!=null)return s;{const o=hi(t.visibleWrites,e);if(Xf(o))return n;if(n==null&&!Yf(o,Fe()))return null;{const a=n||Me.EMPTY_NODE;return ao(o,a)}}}else{const s=hi(t.visibleWrites,e);if(!i&&Xf(s))return n;if(!i&&n==null&&!Yf(s,Fe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Qn(c.path,e)||Qn(e,c.path))},a=yT(t.allWrites,o,e),u=n||Me.EMPTY_NODE;return ao(a,u)}}}function rD(t,e,n){let r=Me.EMPTY_NODE;const i=cs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(en,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=hi(t.visibleWrites,e);return n.forEachChild(en,(o,a)=>{const u=ao(hi(s,new Ze(o)),a);r=r.updateImmediateChild(o,u)}),f_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=hi(t.visibleWrites,e);return f_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function iD(t,e,n,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=xt(e,n);if(Yf(t.visibleWrites,s))return null;{const o=hi(t.visibleWrites,s);return Xf(o)?i.getChild(n):ao(o,i.getChild(n))}}function sD(t,e,n,r){const i=xt(e,n),s=cs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=hi(t.visibleWrites,i);return ao(o,r.getNode().getImmediateChild(n))}else return null}function oD(t,e){return cs(t.visibleWrites,e)}function aD(t,e,n,r,i,s,o){let a;const u=hi(t.visibleWrites,e),c=cs(u,Fe());if(c!=null)a=c;else if(n!=null)a=ao(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&h.length<i;)f(y,r)!==0&&h.push(y),y=m.getNext();return h}else return[]}function lD(){return{visibleWrites:Zn.empty(),allWrites:[],lastWriteId:-1}}function Jf(t,e,n,r){return _T(t.writeTree,t.treePath,e,n,r)}function wT(t,e){return rD(t.writeTree,t.treePath,e)}function p_(t,e,n,r){return iD(t.writeTree,t.treePath,e,n,r)}function Tc(t,e){return oD(t.writeTree,xt(t.treePath,e))}function uD(t,e,n,r,i,s){return aD(t.writeTree,t.treePath,e,n,r,i,s)}function Fm(t,e,n){return sD(t.writeTree,t.treePath,e,n)}function ET(t,e){return TT(xt(t.treePath,e),t.writeTree)}function TT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,a_(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,jN(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,FN(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,a_(r,e.snapshotNode,i.oldSnap));else throw Eo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ST=new hD;class jm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Vm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fm(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ns(this.viewCache_),s=uD(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function dD(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fD(t,e,n,r,i){const s=new cD;let o,a;if(n.type===hr.OVERWRITE){const c=n;c.source.fromUser?o=Zf(t,e,c.path,c.snap,r,i,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ee(c.path),o=Sc(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===hr.MERGE){const c=n;c.source.fromUser?o=mD(t,e,c.path,c.children,r,i,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ep(t,e,c.path,c.children,r,i,a,s))}else if(n.type===hr.ACK_USER_WRITE){const c=n;c.revert?o=yD(t,e,c.path,r,i,s):o=gD(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===hr.LISTEN_COMPLETE)o=vD(t,e,n.path,r,s);else throw Eo("Unknown operation type: "+n.type);const u=s.getChanges();return pD(e,o,u),{viewCache:o,changes:u}}function pD(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Qf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(VN(Qf(e)))}}function IT(t,e,n,r,i,s){const o=e.eventCache;if(Tc(r,n)!=null)return e;{let a,u;if(Ee(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ns(e),h=c instanceof Me?c:Me.EMPTY_NODE,f=wT(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=Jf(r,ns(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ce(n);if(c===".priority"){K(pi(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=e.serverCache.getNode();const f=p_(r,n,h,u);f!=null?a=t.filter.updatePriority(h,f):a=o.getNode()}else{const h=Xe(n);let f;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const m=p_(r,n,o.getNode(),u);m!=null?f=o.getNode().getImmediateChild(c).updateChild(h,m):f=o.getNode().getImmediateChild(c)}else f=Fm(r,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,h,i,s):a=o.getNode()}}return Pa(e,a,o.isFullyInitialized()||Ee(n),t.filter.filtersNodes())}}function Sc(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Ee(n))c=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){const y=u.getNode().updateChild(n,r);c=h.updateFullNode(u.getNode(),y,null)}else{const y=Ce(n);if(!u.isCompleteForPath(n)&&pi(n)>1)return e;const w=Xe(n),x=u.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?c=h.updatePriority(u.getNode(),x):c=h.updateChild(u.getNode(),y,x,w,ST,null)}const f=mT(e,c,u.isFullyInitialized()||Ee(n),h.filtersNodes()),m=new jm(i,f,s);return IT(t,f,n,i,m,a)}function Zf(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const h=new jm(i,e,s);if(Ee(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Pa(e,c,!0,t.filter.filtersNodes());else{const f=Ce(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),u=Pa(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=Xe(n),y=a.getNode().getImmediateChild(f);let w;if(Ee(m))w=r;else{const k=h.getCompleteChild(f);k!=null?eT(m)===".priority"&&k.getChild(nT(m)).isEmpty()?w=k:w=k.updateChild(m,r):w=Me.EMPTY_NODE}if(y.equals(w))u=e;else{const k=t.filter.updateChild(a.getNode(),f,w,m,h,o);u=Pa(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function m_(t,e){return t.eventCache.isCompleteForChild(e)}function mD(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const h=xt(n,u);m_(e,Ce(h))&&(a=Zf(t,a,h,c,i,s,o))}),r.foreach((u,c)=>{const h=xt(n,u);m_(e,Ce(h))||(a=Zf(t,a,h,c,i,s,o))}),a}function g_(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ep(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Ee(n)?c=r:c=new Ye(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((f,m)=>{if(h.hasChild(f)){const y=e.serverCache.getNode().getImmediateChild(f),w=g_(t,y,m);u=Sc(t,u,new Ze(f),w,i,s,o,a)}}),c.children.inorderTraversal((f,m)=>{const y=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!h.hasChild(f)&&!y){const w=e.serverCache.getNode().getImmediateChild(f),k=g_(t,w,m);u=Sc(t,u,new Ze(f),k,i,s,o,a)}}),u}function gD(t,e,n,r,i,s,o){if(Tc(i,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ee(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sc(t,e,n,u.getNode().getChild(n),i,s,a,o);if(Ee(n)){let c=new Ye(null);return u.getNode().forEachChild(Ks,(h,f)=>{c=c.set(new Ze(h),f)}),ep(t,e,n,c,i,s,a,o)}else return e}else{let c=new Ye(null);return r.foreach((h,f)=>{const m=xt(n,h);u.isCompleteForPath(m)&&(c=c.set(h,u.getNode().getChild(m)))}),ep(t,e,n,c,i,s,a,o)}}function vD(t,e,n,r,i){const s=e.serverCache,o=mT(e,s.getNode(),s.isFullyInitialized()||Ee(n),s.isFiltered());return IT(t,o,n,r,ST,i)}function yD(t,e,n,r,i,s){let o;if(Tc(r,n)!=null)return e;{const a=new jm(r,e,i),u=e.eventCache.getNode();let c;if(Ee(n)||Ce(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Jf(r,ns(e));else{const f=e.serverCache.getNode();K(f instanceof Me,"serverChildren would be complete if leaf node"),h=wT(r,f)}h=h,c=t.filter.updateFullNode(u,h,s)}else{const h=Ce(n);let f=Fm(r,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=u.getImmediateChild(h)),f!=null?c=t.filter.updateChild(u,h,f,Xe(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(u,h,Me.EMPTY_NODE,Xe(n),a,s):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Jf(r,ns(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Tc(r,Fe())!=null,Pa(e,c,o,t.filter.filtersNodes())}}function _D(t,e){const n=ns(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ee(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function v_(t,e,n,r){e.type===hr.MERGE&&e.source.queryId!==null&&(K(ns(t.viewCache_),"We should always have a full cache before handling merges"),K(Qf(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=fD(t.processor_,i,e,n,r);return dD(t.processor_,s.viewCache),K(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,wD(t,s.changes,s.viewCache.eventCache.getNode())}function wD(t,e,n,r){const i=t.eventRegistrations_;return GN(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y_;function ED(t){K(!y_,"__referenceConstructor has already been defined"),y_=t}function Um(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return K(s!=null,"SyncTree gave us an op for an invalid query."),v_(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(v_(o,e,n,r));return s}}function Bm(t,e){let n=null;for(const r of t.views.values())n=n||_D(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __;function TD(t){K(!__,"__referenceConstructor has already been defined"),__=t}class w_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ye(null),this.pendingWriteTree_=lD(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SD(t,e,n,r,i){return XN(t.pendingWriteTree_,e,n,r,i),i?sh(t,new ts(hT(),e,n)):[]}function Us(t,e,n=!1){const r=JN(t.pendingWriteTree_,e);if(ZN(t.pendingWriteTree_,e)){let s=new Ye(null);return r.snap!=null?s=s.set(Fe(),!0):Bn(r.children,o=>{s=s.set(new Ze(o),!0)}),sh(t,new Ec(r.path,s,n))}else return[]}function ih(t,e,n){return sh(t,new ts(dT(),e,n))}function ID(t,e,n){const r=Ye.fromObject(n);return sh(t,new nl(dT(),e,r))}function CD(t,e,n,r){const i=kT(t,r);if(i!=null){const s=RT(i),o=s.path,a=s.queryId,u=Ln(o,e),c=new ts(fT(a),u,n);return xT(t,o,c)}else return[]}function AD(t,e,n,r){const i=kT(t,r);if(i){const s=RT(i),o=s.path,a=s.queryId,u=Ln(o,e),c=Ye.fromObject(n),h=new nl(fT(a),u,c);return xT(t,o,h)}else return[]}function CT(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=Ln(o,e),c=Bm(a,u);if(c)return c});return _T(i,e,s,n,!0)}function sh(t,e){return AT(e,t.syncPointTree_,null,vT(t.pendingWriteTree_,Fe()))}function AT(t,e,n,r){if(Ee(t.path))return PT(t,e,n,r);{const i=e.get(Fe());n==null&&i!=null&&(n=Bm(i,Fe()));let s=[];const o=Ce(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,h=ET(r,o);s=s.concat(AT(a,u,c,h))}return i&&(s=s.concat(Um(i,t,r,n))),s}}function PT(t,e,n,r){const i=e.get(Fe());n==null&&i!=null&&(n=Bm(i,Fe()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=ET(r,o),h=t.operationForChild(o);h&&(s=s.concat(PT(h,a,u,c)))}),i&&(s=s.concat(Um(i,t,r,n))),s}function kT(t,e){return t.tagToQueryMap.get(e)}function RT(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ze(t.substr(0,e))}}function xT(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const i=vT(t.pendingWriteTree_,e);return Um(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new zm(n)}node(){return this.node_}}class Wm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xt(this.path_,e);return new Wm(this.syncTree_,n)}node(){return CT(this.syncTree_,this.path_)}}const PD=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},E_=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return kD(t[".sv"],e,n);if(typeof t[".sv"]=="object")return RD(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},kD=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},RD=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const i=e.node();if(K(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},xD=function(t,e,n,r){return $m(e,new Wm(n,t),r)},ND=function(t,e,n){return $m(t,new zm(e),n)};function $m(t,e,n){const r=t.getPriority().val(),i=E_(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=E_(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Pt(a,Jt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Pt(i))),o.forEachChild(en,(a,u)=>{const c=$m(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function qm(t,e){let n=e instanceof Ze?e:new Ze(e),r=t,i=Ce(n);for(;i!==null;){const s=io(r.node.children,i)||{children:{},childCount:0};r=new Hm(i,r,s),n=Xe(n),i=Ce(n)}return r}function Io(t){return t.node.value}function NT(t,e){t.node.value=e,tp(t)}function DT(t){return t.node.childCount>0}function DD(t){return Io(t)===void 0&&!DT(t)}function oh(t,e){Bn(t.node.children,(n,r)=>{e(new Hm(n,t,r))})}function OT(t,e,n,r){n&&!r&&e(t),oh(t,i=>{OT(i,e,!0,r)}),n&&r&&e(t)}function OD(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Cl(t){return new Ze(t.parent===null?t.name:Cl(t.parent)+"/"+t.name)}function tp(t){t.parent!==null&&bD(t.parent,t.name,t)}function bD(t,e,n){const r=DD(n),i=zr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,tp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,tp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=/[\[\].#$\/\u0000-\u001F\u007F]/,LD=/[\[\].#$\u0000-\u001F\u007F]/,_d=10*1024*1024,bT=function(t){return typeof t=="string"&&t.length!==0&&!MD.test(t)},VD=function(t){return typeof t=="string"&&t.length!==0&&!LD.test(t)},FD=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VD(t)},MT=function(t,e,n){const r=n instanceof Ze?new vN(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Di(r));if(typeof e=="function")throw new Error(t+"contains a function "+Di(r)+" with contents = "+e.toString());if(O1(e))throw new Error(t+"contains "+e.toString()+" "+Di(r));if(typeof e=="string"&&e.length>_d/3&&nh(e)>_d)throw new Error(t+"contains a string greater than "+_d+" utf8 bytes "+Di(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!bT(o)))throw new Error(t+" contains an invalid key ("+o+") "+Di(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yN(r,o),MT(t,a,r),_N(r)}),i&&s)throw new Error(t+' contains ".value" child '+Di(r)+" in addition to actual children.")}},jD=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!bT(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!FD(n))throw new Error(yR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function BD(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!rT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function hs(t,e,n){BD(t,n),zD(t,r=>Qn(r,e)||Qn(e,r))}function zD(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(WD(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function WD(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ca&&Xt("event: "+n.toString()),Sl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="repo_interrupt",HD=25;class qD{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wc(),this.transactionQueueTree_=new Hm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GD(t,e,n){if(t.stats_=Dm(t.repoInfo_),t.forceRestClient_||zx())t.server_=new _c(t.repoInfo_,(r,i,s,o)=>{T_(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>S_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Vt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new xr(t.repoInfo_,e,(r,i,s,o)=>{T_(t,r,i,s,o)},r=>{S_(t,r)},r=>{QD(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Gx(t.repoInfo_,()=>new qN(t.stats_,t.server_)),t.infoData_=new BN,t.infoSyncTree_=new w_({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=ih(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gm(t,"connected",!1),t.serverSyncTree_=new w_({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);hs(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function KD(t){const n=t.infoData_.getNode(new Ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LT(t){return PD({timestamp:KD(t)})}function T_(t,e,n,r,i){t.dataUpdateCount++;const s=new Ze(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=pc(n,c=>Jt(c));o=AD(t.serverSyncTree_,s,u,i)}else{const u=Jt(n);o=CD(t.serverSyncTree_,s,u,i)}else if(r){const u=pc(n,c=>Jt(c));o=ID(t.serverSyncTree_,s,u)}else{const u=Jt(n);o=ih(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Qm(t,s)),hs(t.eventQueue_,a,o)}function S_(t,e){Gm(t,"connected",e),e===!1&&XD(t)}function QD(t,e){Bn(e,(n,r)=>{Gm(t,n,r)})}function Gm(t,e,n){const r=new Ze("/.info/"+e),i=Jt(n);t.infoData_.updateSnapshot(r,i);const s=ih(t.infoSyncTree_,r,i);hs(t.eventQueue_,r,s)}function YD(t){return t.nextWriteId_++}function XD(t){VT(t,"onDisconnectEvents");const e=LT(t),n=wc();Kf(t.onDisconnect_,Fe(),(i,s)=>{const o=xD(i,s,t.serverSyncTree_,e);cT(n,i,o)});let r=[];Kf(n,Fe(),(i,s)=>{r=r.concat(ih(t.serverSyncTree_,i,s));const o=tO(t,i);Qm(t,o)}),t.onDisconnect_=wc(),hs(t.eventQueue_,Fe(),r)}function JD(t){t.persistentConnection_&&t.persistentConnection_.interrupt($D)}function VT(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xt(n,...e)}function FT(t,e,n){return CT(t.serverSyncTree_,e,n)||Me.EMPTY_NODE}function Km(t,e=t.transactionQueueTree_){if(e||ah(t,e),Io(e)){const n=UT(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&ZD(t,Cl(e),n)}else DT(e)&&oh(e,n=>{Km(t,n)})}function ZD(t,e,n){const r=n.map(c=>c.currentWriteId),i=FT(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=Ln(e,h.path);s=s.updateChild(f,h.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{VT(t,"transaction put response",{path:u.toString(),status:c});let h=[];if(c==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Us(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();ah(t,qm(t.transactionQueueTree_,e)),Km(t,t.transactionQueueTree_),hs(t.eventQueue_,e,h);for(let m=0;m<f.length;m++)Sl(f[m])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Pn("transaction at "+u.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}Qm(t,e)}},o)}function Qm(t,e){const n=jT(t,e),r=Cl(n),i=UT(t,n);return eO(t,i,r),r}function eO(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Ln(n,u.path);let h=!1,f;if(K(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,f=u.abortReason,i=i.concat(Us(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=HD)h=!0,f="maxretry",i=i.concat(Us(t.serverSyncTree_,u.currentWriteId,!0));else{const m=FT(t,u.path,o);u.currentInputSnapshot=m;const y=e[a].update(m.val());if(y!==void 0){MT("transaction failed: Data returned ",y,u.path);let w=Jt(y);typeof y=="object"&&y!=null&&zr(y,".priority")||(w=w.updatePriority(m.getPriority()));const x=u.currentWriteId,T=LT(t),_=ND(w,m,T);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=_,u.currentWriteId=YD(t),o.splice(o.indexOf(x),1),i=i.concat(SD(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),i=i.concat(Us(t.serverSyncTree_,x,!0))}else h=!0,f="nodata",i=i.concat(Us(t.serverSyncTree_,u.currentWriteId,!0))}hs(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}ah(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Sl(r[a]);Km(t,t.transactionQueueTree_)}function jT(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&Io(r)===void 0;)r=qm(r,n),e=Xe(e),n=Ce(e);return r}function UT(t,e){const n=[];return BT(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BT(t,e,n){const r=Io(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);oh(e,i=>{BT(t,i,n)})}function ah(t,e){const n=Io(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,NT(e,n.length>0?n:void 0)}oh(e,r=>{ah(t,r)})}function tO(t,e){const n=Cl(jT(t,e)),r=qm(t.transactionQueueTree_,e);return OD(r,i=>{wd(t,i)}),wd(t,r),OT(r,i=>{wd(t,i)}),n}function wd(t,e){const n=Io(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Us(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?NT(e,void 0):n.length=s+1,hs(t.eventQueue_,Cl(e),i);for(let o=0;o<r.length;o++)Sl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function rO(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pn(`Invalid query segment '${n}' in query '${t}'`)}return e}const I_=function(t,e){const n=iO(t),r=n.namespace;n.domain==="firebase.com"&&Vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||bx();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new H1(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ze(n.pathString)}},iO=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=nO(t.substring(h,f)));const m=rO(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ee(this._path)?null:eT(this._path)}get ref(){return new Co(this._repo,this._path)}get _queryIdentifier(){const e=u_(this._queryParams),n=xm(e);return n==="{}"?"default":n}get _queryObject(){return u_(this._queryParams)}isEqual(e){if(e=Zi(e),!(e instanceof Ym))return!1;const n=this._repo===e._repo,r=rT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+gN(this._path)}}class Co extends Ym{constructor(e,n){super(e,n,new Lm,!1)}get parent(){const e=nT(this._path);return e===null?null:new Co(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}ED(Co);TD(Co);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="FIREBASE_DATABASE_EMULATOR_HOST",np={};let oO=!1;function aO(t,e,n,r){t.repoInfo_=new H1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function lO(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=I_(s,i),a=o.repoInfo,u;typeof process<"u"&&$y&&(u=$y[sO]),u?(s=`http://${u}?ns=${a.namespace}`,o=I_(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new $x(t.name,t.options,e);jD("Invalid Firebase Database URL",o),Ee(o.path)||Vr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=cO(a,t,c,new Wx(t.name,n));return new hO(h,t)}function uO(t,e){const n=np[e];(!n||n[t.key]!==t)&&Vr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),JD(t),delete n[t.key]}function cO(t,e,n,r){let i=np[e.name];i||(i={},np[e.name]=i);let s=i[t.toURLString()];return s&&Vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new qD(t,oO,n,r),i[t.toURLString()]=s,s}class hO{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(GD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Co(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vr("Cannot call "+e+" on a deleted database.")}}function dO(t=P1(),e){const n=I1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=p1("database");r&&fO(n,...r)}return n}function fO(t,e,n,r={}){t=Zi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Vr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Du(Du.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:g1(r.mockUserToken,t.app.options.projectId);s=new Du(o)}aO(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){kx(C1),Za(new so("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return lO(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ci(Hy,qy,t),ci(Hy,qy,"esm2017")}xr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};xr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};pO();var C_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,zT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function S(){}S.prototype=v.prototype,I.D=v.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(E,P,R){for(var C=Array(arguments.length-2),de=2;de<arguments.length;de++)C[de-2]=arguments[de];return v.prototype[P].apply(E,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,S){S||(S=0);var E=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)E[P]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(P=0;16>P;++P)E[P]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=I.g[0],S=I.g[1],P=I.g[2];var R=I.g[3],C=v+(R^S&(P^R))+E[0]+3614090360&4294967295;v=S+(C<<7&4294967295|C>>>25),C=R+(P^v&(S^P))+E[1]+3905402710&4294967295,R=v+(C<<12&4294967295|C>>>20),C=P+(S^R&(v^S))+E[2]+606105819&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(v^P&(R^v))+E[3]+3250441966&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(R^S&(P^R))+E[4]+4118548399&4294967295,v=S+(C<<7&4294967295|C>>>25),C=R+(P^v&(S^P))+E[5]+1200080426&4294967295,R=v+(C<<12&4294967295|C>>>20),C=P+(S^R&(v^S))+E[6]+2821735955&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(v^P&(R^v))+E[7]+4249261313&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(R^S&(P^R))+E[8]+1770035416&4294967295,v=S+(C<<7&4294967295|C>>>25),C=R+(P^v&(S^P))+E[9]+2336552879&4294967295,R=v+(C<<12&4294967295|C>>>20),C=P+(S^R&(v^S))+E[10]+4294925233&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(v^P&(R^v))+E[11]+2304563134&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(R^S&(P^R))+E[12]+1804603682&4294967295,v=S+(C<<7&4294967295|C>>>25),C=R+(P^v&(S^P))+E[13]+4254626195&4294967295,R=v+(C<<12&4294967295|C>>>20),C=P+(S^R&(v^S))+E[14]+2792965006&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(v^P&(R^v))+E[15]+1236535329&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(P^R&(S^P))+E[1]+4129170786&4294967295,v=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(v^S))+E[6]+3225465664&4294967295,R=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(R^v))+E[11]+643717713&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^v&(P^R))+E[0]+3921069994&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^R&(S^P))+E[5]+3593408605&4294967295,v=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(v^S))+E[10]+38016083&4294967295,R=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(R^v))+E[15]+3634488961&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^v&(P^R))+E[4]+3889429448&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^R&(S^P))+E[9]+568446438&4294967295,v=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(v^S))+E[14]+3275163606&4294967295,R=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(R^v))+E[3]+4107603335&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^v&(P^R))+E[8]+1163531501&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^R&(S^P))+E[13]+2850285829&4294967295,v=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(v^S))+E[2]+4243563512&4294967295,R=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(R^v))+E[7]+1735328473&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^v&(P^R))+E[12]+2368359562&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(S^P^R)+E[5]+4294588738&4294967295,v=S+(C<<4&4294967295|C>>>28),C=R+(v^S^P)+E[8]+2272392833&4294967295,R=v+(C<<11&4294967295|C>>>21),C=P+(R^v^S)+E[11]+1839030562&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^v)+E[14]+4259657740&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^R)+E[1]+2763975236&4294967295,v=S+(C<<4&4294967295|C>>>28),C=R+(v^S^P)+E[4]+1272893353&4294967295,R=v+(C<<11&4294967295|C>>>21),C=P+(R^v^S)+E[7]+4139469664&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^v)+E[10]+3200236656&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^R)+E[13]+681279174&4294967295,v=S+(C<<4&4294967295|C>>>28),C=R+(v^S^P)+E[0]+3936430074&4294967295,R=v+(C<<11&4294967295|C>>>21),C=P+(R^v^S)+E[3]+3572445317&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^v)+E[6]+76029189&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^R)+E[9]+3654602809&4294967295,v=S+(C<<4&4294967295|C>>>28),C=R+(v^S^P)+E[12]+3873151461&4294967295,R=v+(C<<11&4294967295|C>>>21),C=P+(R^v^S)+E[15]+530742520&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^v)+E[2]+3299628645&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(P^(S|~R))+E[0]+4096336452&4294967295,v=S+(C<<6&4294967295|C>>>26),C=R+(S^(v|~P))+E[7]+1126891415&4294967295,R=v+(C<<10&4294967295|C>>>22),C=P+(v^(R|~S))+E[14]+2878612391&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~v))+E[5]+4237533241&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~R))+E[12]+1700485571&4294967295,v=S+(C<<6&4294967295|C>>>26),C=R+(S^(v|~P))+E[3]+2399980690&4294967295,R=v+(C<<10&4294967295|C>>>22),C=P+(v^(R|~S))+E[10]+4293915773&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~v))+E[1]+2240044497&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~R))+E[8]+1873313359&4294967295,v=S+(C<<6&4294967295|C>>>26),C=R+(S^(v|~P))+E[15]+4264355552&4294967295,R=v+(C<<10&4294967295|C>>>22),C=P+(v^(R|~S))+E[6]+2734768916&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~v))+E[13]+1309151649&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~R))+E[4]+4149444226&4294967295,v=S+(C<<6&4294967295|C>>>26),C=R+(S^(v|~P))+E[11]+3174756917&4294967295,R=v+(C<<10&4294967295|C>>>22),C=P+(v^(R|~S))+E[2]+718787259&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var S=v-this.blockSize,E=this.B,P=this.h,R=0;R<v;){if(P==0)for(;R<=S;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<v;)if(E[P++]=I.charCodeAt(R++),P==this.blockSize){i(this,E),P=0;break}}else for(;R<v;)if(E[P++]=I[R++],P==this.blockSize){i(this,E),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var S=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=S&255,S/=256;for(this.u(I),I=Array(16),v=S=0;4>v;++v)for(var E=0;32>E;E+=8)I[S++]=this.g[v]>>>E&255;return I};function s(I,v){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=v(I)}function o(I,v){this.h=v;for(var S=[],E=!0,P=I.length-1;0<=P;P--){var R=I[P]|0;E&&R==v||(S[P]=R,E=!1)}this.g=S}var a={};function u(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return x(c(-I));for(var v=[],S=1,E=0;I>=S;E++)v[E]=I/S|0,S*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return x(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),E=f,P=0;P<I.length;P+=8){var R=Math.min(8,I.length-P),C=parseInt(I.substring(P,P+R),v);8>R?(R=c(Math.pow(v,R)),E=E.j(R).add(c(C))):(E=E.j(S),E=E.add(c(C)))}return E}var f=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-x(this).m();for(var I=0,v=1,S=0;S<this.g.length;S++){var E=this.i(S);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+x(this).toString(I);for(var v=c(Math.pow(I,6)),S=this,E="";;){var P=D(S,v).g;S=T(S,P.j(v));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=P,w(S))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=T(this,I),k(I)?-1:w(I)?0:1};function x(I){for(var v=I.g.length,S=[],E=0;E<v;E++)S[E]=~I.g[E];return new o(S,~I.h).add(m)}t.abs=function(){return k(this)?x(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],E=0,P=0;P<=v;P++){var R=E+(this.i(P)&65535)+(I.i(P)&65535),C=(R>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);E=C>>>16,R&=65535,C&=65535,S[P]=C<<16|R}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(I,v){return I.add(x(v))}t.j=function(I){if(w(this)||w(I))return f;if(k(this))return k(I)?x(this).j(x(I)):x(x(this).j(I));if(k(I))return x(this.j(x(I)));if(0>this.l(y)&&0>I.l(y))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,S=[],E=0;E<2*v;E++)S[E]=0;for(E=0;E<this.g.length;E++)for(var P=0;P<I.g.length;P++){var R=this.i(E)>>>16,C=this.i(E)&65535,de=I.i(P)>>>16,Te=I.i(P)&65535;S[2*E+2*P]+=C*Te,_(S,2*E+2*P),S[2*E+2*P+1]+=R*Te,_(S,2*E+2*P+1),S[2*E+2*P+1]+=C*de,_(S,2*E+2*P+1),S[2*E+2*P+2]+=R*de,_(S,2*E+2*P+2)}for(E=0;E<v;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=v;E<2*v;E++)S[E]=0;return new o(S,0)};function _(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function A(I,v){this.g=I,this.h=v}function D(I,v){if(w(v))throw Error("division by zero");if(w(I))return new A(f,f);if(k(I))return v=D(x(I),v),new A(x(v.g),x(v.h));if(k(v))return v=D(I,x(v)),new A(x(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var S=m,E=v;0>=E.l(I);)S=F(S),E=F(E);var P=U(S,1),R=U(E,1);for(E=U(E,2),S=U(S,2);!w(E);){var C=R.add(E);0>=C.l(I)&&(P=P.add(S),R=C),E=U(E,1),S=U(S,1)}return v=T(I,P.j(v)),new A(P,v)}for(P=f;0<=I.l(v);){for(S=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(S)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=c(S),C=R.j(v);k(C)||0<C.l(I);)S-=E,R=c(S),C=R.j(v);w(R)&&(R=m),P=P.add(R),I=T(I,C)}return new A(P,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)&I.i(E);return new o(S,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)|I.i(E);return new o(S,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],E=0;E<v;E++)S[E]=this.i(E)^I.i(E);return new o(S,this.h^I.h)};function F(I){for(var v=I.g.length+1,S=[],E=0;E<v;E++)S[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(S,I.h)}function U(I,v){var S=v>>5;v%=32;for(var E=I.g.length-S,P=[],R=0;R<E;R++)P[R]=0<v?I.i(R+S)>>>v|I.i(R+S+1)<<32-v:I.i(R+S);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,$i=o}).apply(typeof C_<"u"?C_:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WT,$T,ha,HT,bu,rp,qT,GT,KT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var N=l[g];if(!(N in p))break e;p=p[N]}l=l[l.length-1],g=p[l],d=d(g),d!=g&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var p=0,g=!1,N={next:function(){if(!g&&p<l.length){var b=p++;return{value:d(b,l[b]),done:!1}}return g=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,g),l.apply(d,N)}}return function(){return l.apply(d,arguments)}}function m(l,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,N,b){for(var q=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)q[ze-2]=arguments[ze];return d.prototype[N].apply(g,q)}}function k(l){const d=l.length;if(0<d){const p=Array(d);for(let g=0;g<d;g++)p[g]=l[g];return p}return[]}function x(l,d){for(let p=1;p<arguments.length;p++){const g=arguments[p];if(u(g)){const N=l.length||0,b=g.length||0;l.length=N+b;for(let q=0;q<b;q++)l[N+q]=g[q]}else l.push(g)}}class T{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(l){return/^[\s\xa0]*$/.test(l)}function A(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var F=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function U(l,d,p){for(const g in l)d.call(p,l[g],g,l)}function I(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function v(l){const d={};for(const p in l)d[p]=l[p];return d}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,d){let p,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(p in g)l[p]=g[p];for(let b=0;b<S.length;b++)p=S[b],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function P(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function R(l){a.setTimeout(()=>{throw l},0)}function C(){var l=J;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class de{constructor(){this.h=this.g=null}add(d,p){const g=Te.get();g.set(d,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Te=new T(()=>new ve,l=>l.reset());class ve{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,H=!1,J=new de,Y=()=>{const l=a.Promise.resolve(void 0);Ve=()=>{l.then(se)}};var se=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){R(p)}var d=Te;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}H=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function je(l,d){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(F){e:{try{D(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ue[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&je.aa.h.call(this)}}w(je,ae);var Ue={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),M=0;function V(l,d,p,g,N){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!g,this.ha=N,this.key=++M,this.da=this.fa=!1}function j(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function L(l){this.src=l,this.g={},this.h=0}L.prototype.add=function(l,d,p,g,N){var b=l.toString();l=this.g[b],l||(l=this.g[b]=[],this.h++);var q=z(l,d,g,N);return-1<q?(d=l[q],p||(d.fa=!1)):(d=new V(d,this.src,b,!!g,N),d.fa=p,l.push(d)),d};function te(l,d){var p=d.type;if(p in l.g){var g=l.g[p],N=Array.prototype.indexOf.call(g,d,void 0),b;(b=0<=N)&&Array.prototype.splice.call(g,N,1),b&&(j(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function z(l,d,p,g){for(var N=0;N<l.length;++N){var b=l[N];if(!b.da&&b.listener==d&&b.capture==!!p&&b.ha==g)return N}return-1}var X="closure_lm_"+(1e6*Math.random()|0),ue={};function me(l,d,p,g,N){if(Array.isArray(d)){for(var b=0;b<d.length;b++)me(l,d[b],p,g,N);return null}return p=It(p),l&&l[$e]?l.K(d,p,c(g)?!!g.capture:!!g,N):ye(l,d,p,!1,g,N)}function ye(l,d,p,g,N,b){if(!d)throw Error("Invalid event type");var q=c(N)?!!N.capture:!!N,ze=Dt(l);if(ze||(l[X]=ze=new L(l)),p=ze.add(d,p,g,q,b),p.proxy)return p;if(g=St(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)pe||(N=q),N===void 0&&(N=!1),l.addEventListener(d.toString(),g,N);else if(l.attachEvent)l.attachEvent(yn(d.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function St(){function l(p){return d.call(l.src,l.listener,p)}const d=_n;return l}function nt(l,d,p,g,N){if(Array.isArray(d))for(var b=0;b<d.length;b++)nt(l,d[b],p,g,N);else g=c(g)?!!g.capture:!!g,p=It(p),l&&l[$e]?(l=l.i,d=String(d).toString(),d in l.g&&(b=l.g[d],p=z(b,p,g,N),-1<p&&(j(b[p]),Array.prototype.splice.call(b,p,1),b.length==0&&(delete l.g[d],l.h--)))):l&&(l=Dt(l))&&(d=l.g[d.toString()],l=-1,d&&(l=z(d,p,g,N)),(p=-1<l?d[l]:null)&&ht(p))}function ht(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[$e])te(d.i,l);else{var p=l.type,g=l.proxy;d.removeEventListener?d.removeEventListener(p,g,l.capture):d.detachEvent?d.detachEvent(yn(p),g):d.addListener&&d.removeListener&&d.removeListener(g),(p=Dt(d))?(te(p,l),p.h==0&&(p.src=null,d[X]=null)):j(l)}}}function yn(l){return l in ue?ue[l]:ue[l]="on"+l}function _n(l,d){if(l.da)l=!0;else{d=new je(d,this);var p=l.listener,g=l.ha||l.src;l.fa&&ht(l),l=p.call(g,d)}return l}function Dt(l){return l=l[X],l instanceof L?l:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(l){return typeof l=="function"?l:(l[wn]||(l[wn]=function(d){return l.handleEvent(d)}),l[wn])}function He(){ne.call(this),this.i=new L(this),this.M=this,this.F=null}w(He,ne),He.prototype[$e]=!0,He.prototype.removeEventListener=function(l,d,p,g){nt(this,l,d,p,g)};function oe(l,d){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=d.type||d,typeof d=="string")d=new ae(d,l);else if(d instanceof ae)d.target=d.target||l;else{var N=d;d=new ae(g,l),E(d,N)}if(N=!0,p)for(var b=p.length-1;0<=b;b--){var q=d.g=p[b];N=De(q,g,!0,d)&&N}if(q=d.g=l,N=De(q,g,!0,d)&&N,N=De(q,g,!1,d)&&N,p)for(b=0;b<p.length;b++)q=d.g=p[b],N=De(q,g,!1,d)&&N}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],g=0;g<p.length;g++)j(p[g]);delete l.g[d],l.h--}}this.F=null},He.prototype.K=function(l,d,p,g){return this.i.add(String(l),d,!1,p,g)},He.prototype.L=function(l,d,p,g){return this.i.add(String(l),d,!0,p,g)};function De(l,d,p,g){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,b=0;b<d.length;++b){var q=d[b];if(q&&!q.da&&q.capture==p){var ze=q.listener,bt=q.ha||q.src;q.fa&&te(l.i,q),N=ze.call(bt,g)!==!1&&N}}return N&&!g.defaultPrevented}function pt(l,d,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Ot(l){l.g=pt(()=>{l.g=null,l.i&&(l.i=!1,Ot(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class nn extends ne{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ot(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(l){ne.call(this),this.h=l,this.g={}}w(cn,ne);var Nn=[];function G(l){U(l.g,function(d,p){this.g.hasOwnProperty(p)&&ht(d)},l),l.g={}}cn.prototype.N=function(){cn.aa.N.call(this),G(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=a.JSON.stringify,ke=a.JSON.parse,Be=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function En(){}En.prototype.h=null;function tr(l){return l.h||(l.h=l.i())}function nr(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rr(){ae.call(this,"d")}w(rr,ae);function mt(){ae.call(this,"c")}w(mt,ae);var qe={},_r=null;function Oe(){return _r=_r||new He}qe.La="serverreachability";function be(l){ae.call(this,qe.La,l)}w(be,ae);function Si(l){const d=Oe();oe(d,new be(d))}qe.STAT_EVENT="statevent";function ps(l,d){ae.call(this,qe.STAT_EVENT,l),this.stat=d}w(ps,ae);function Ct(l){const d=Oe();oe(d,new ps(d,l))}qe.Ma="timingevent";function xo(l,d){ae.call(this,qe.Ma,l),this.size=d}w(xo,ae);function wr(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function ir(){this.g=!0}ir.prototype.xa=function(){this.g=!1};function No(l,d,p,g,N,b){l.info(function(){if(l.g)if(b)for(var q="",ze=b.split("&"),bt=0;bt<ze.length;bt++){var Re=ze[bt].split("=");if(1<Re.length){var Wt=Re[0];Re=Re[1];var $t=Wt.split("_");q=2<=$t.length&&$t[1]=="type"?q+(Wt+"="+Re+"&"):q+(Wt+"=redacted&")}}else q=null;else q=b;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+d+`
`+p+`
`+q})}function Do(l,d,p,g,N,b,q){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+d+`
`+p+`
`+b+" "+q})}function sr(l,d,p,g){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Oo(l,p)+(g?" "+g:"")})}function Th(l,d){l.info(function(){return"TIMEOUT: "+d})}ir.prototype.info=function(){};function Oo(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var N=g[1];if(Array.isArray(N)&&!(1>N.length)){var b=N[0];if(b!="noop"&&b!="stop"&&b!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return fe(p)}catch{return d}}var Ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bo;function ge(){}w(ge,En),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},bo=new ge;function Ne(l,d,p,g){this.j=l,this.i=d,this.l=p,this.R=g||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rt}function rt(){this.i=null,this.g="",this.h=!1}var hn={},rn={};function Ci(l,d,p){l.L=1,l.v=Fl(Er(d)),l.m=p,l.P=!0,Ol(l,null)}function Ol(l,d){l.F=Date.now(),Ml(l),l.A=Er(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),Ug(p.i,"t",g),l.C=0,p=l.j.J,l.h=new rt,l.g=iv(l.j,p?d:null,!l.m),0<l.O&&(l.M=new nn(m(l.Y,l,l.g),l.O)),d=l.U,p=l.g,g=l.ca;var N="readystatechange";Array.isArray(N)||(N&&(Nn[0]=N.toString()),N=Nn);for(var b=0;b<N.length;b++){var q=me(p,N[b],g||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Si(),No(l.i,l.u,l.A,l.l,l.R,l.m)}Ne.prototype.ca=function(l){l=l.target;const d=this.M;d&&Tr(l)==3?d.j():this.Y(l)},Ne.prototype.Y=function(l){try{if(l==this.g)e:{const $t=Tr(this.g);var d=this.g.Ba();const vs=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||Gg(this.g)))){this.J||$t!=4||d==7||(d==8||0>=vs?Si(3):Si(2)),Sh(this);var p=this.g.Z();this.X=p;t:if(bl(this)){var g=Gg(this.g);l="";var N=g.length,b=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),Mo(this);var q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,l+=this.h.i.decode(g[d],{stream:!(b&&d==N-1)});g.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,Do(this.i,this.u,this.A,this.l,this.R,$t,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,bt=this.g;if((ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ze)){var Re=ze;break t}}Re=null}if(p=Re)sr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ih(this,p);else{this.o=!1,this.s=3,Ct(12),Ai(this),Mo(this);break e}}if(this.P){p=!0;let Wn;for(;!this.J&&this.C<q.length;)if(Wn=gI(this,q),Wn==rn){$t==4&&(this.s=4,Ct(14),p=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==hn){this.s=4,Ct(15),sr(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else sr(this.i,this.l,Wn,null),Ih(this,Wn);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||q.length!=0||this.h.h||(this.s=1,Ct(16),p=!1),this.o=this.o&&p,!p)sr(this.i,this.l,q,"[Invalid Chunked Response]"),Ai(this),Mo(this);else if(0<q.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),xh(Wt),Wt.M=!0,Ct(11))}}else sr(this.i,this.l,q,null),Ih(this,q);$t==4&&Ai(this),this.o&&!this.J&&($t==4?ev(this.j,this):(this.o=!1,Ml(this)))}else OI(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Ai(this),Mo(this)}}}catch{}finally{}};function bl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function gI(l,d){var p=l.C,g=d.indexOf(`
`,p);return g==-1?rn:(p=Number(d.substring(p,g)),isNaN(p)?hn:(g+=1,g+p>d.length?rn:(d=d.slice(g,g+p),l.C=g+p,d)))}Ne.prototype.cancel=function(){this.J=!0,Ai(this)};function Ml(l){l.S=Date.now()+l.I,kg(l,l.I)}function kg(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wr(m(l.ba,l),d)}function Sh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ne.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Th(this.i,this.A),this.L!=2&&(Si(),Ct(17)),Ai(this),this.s=2,Mo(this)):kg(this,this.S-l)};function Mo(l){l.j.G==0||l.J||ev(l.j,l)}function Ai(l){Sh(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,G(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Ih(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||Ch(p.h,l))){if(!l.K&&Ch(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Wl(p),Bl(p);else break e;Rh(p),Ct(18)}}else p.za=N[1],0<p.za-p.T&&37500>N[2]&&p.F&&p.v==0&&!p.C&&(p.C=wr(m(p.Za,p),6e3));if(1>=Ng(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ki(p,11)}else if((l.K||p.g==l)&&Wl(p),!_(d))for(N=p.Da.g.parse(d),d=0;d<N.length;d++){let Re=N[d];if(p.T=Re[0],Re=Re[1],p.G==2)if(Re[0]=="c"){p.K=Re[1],p.ia=Re[2];const Wt=Re[3];Wt!=null&&(p.la=Wt,p.j.info("VER="+p.la));const $t=Re[4];$t!=null&&(p.Aa=$t,p.j.info("SVER="+p.Aa));const vs=Re[5];vs!=null&&typeof vs=="number"&&0<vs&&(g=1.5*vs,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const Wn=l.g;if(Wn){const Hl=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var b=g.h;b.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ah(b,b.h),b.h=null))}if(g.D){const Nh=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nh&&(g.ya=Nh,Ke(g.I,g.D,Nh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var q=l;if(g.qa=rv(g,g.J?g.ia:null,g.W),q.K){Dg(g.h,q);var ze=q,bt=g.L;bt&&(ze.I=bt),ze.B&&(Sh(ze),Ml(ze)),g.g=q}else Jg(g);0<p.i.length&&zl(p)}else Re[0]!="stop"&&Re[0]!="close"||ki(p,7);else p.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?ki(p,7):kh(p):Re[0]!="noop"&&p.l&&p.l.ta(Re),p.v=0)}}Si(4)}catch{}}var vI=class{constructor(l,d){this.g=l,this.map=d}};function Rg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ng(l){return l.h?1:l.g?l.g.size:0}function Ch(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Ah(l,d){l.g?l.g.add(d):l.h=d}function Dg(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Rg.prototype.cancel=function(){if(this.i=Og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Og(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return k(l.i)}function yI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],p=l.length,g=0;g<p;g++)d.push(l[g]);return d}d=[],p=0;for(g in l)d[p++]=l[g];return d}function _I(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const g in l)d[p++]=g;return d}}}function bg(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=_I(l),g=yI(l),N=g.length,b=0;b<N;b++)d.call(void 0,g[b],p&&p[b],l)}var Mg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wI(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),N=null;if(0<=g){var b=l[p].substring(0,g);N=l[p].substring(g+1)}else b=l[p];d(b,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Pi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Pi){this.h=l.h,Ll(this,l.j),this.o=l.o,this.g=l.g,Vl(this,l.s),this.l=l.l;var d=l.i,p=new Fo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Lg(this,p),this.m=l.m}else l&&(d=String(l).match(Mg))?(this.h=!1,Ll(this,d[1]||"",!0),this.o=Lo(d[2]||""),this.g=Lo(d[3]||"",!0),Vl(this,d[4]),this.l=Lo(d[5]||"",!0),Lg(this,d[6]||"",!0),this.m=Lo(d[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}Pi.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Vo(d,Vg,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Vo(d,Vg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Vo(p,p.charAt(0)=="/"?SI:TI,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Vo(p,CI)),l.join("")};function Er(l){return new Pi(l)}function Ll(l,d,p){l.j=p?Lo(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Vl(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Lg(l,d,p){d instanceof Fo?(l.i=d,AI(l.i,l.h)):(p||(d=Vo(d,II)),l.i=new Fo(d,l.h))}function Ke(l,d,p){l.i.set(d,p)}function Fl(l){return Ke(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Lo(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vo(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,EI),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function EI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Vg=/[#\/\?@]/g,TI=/[#\?:]/g,SI=/[#\?]/g,II=/[#\?@]/g,CI=/#/g;function Fo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Wr(l){l.g||(l.g=new Map,l.h=0,l.i&&wI(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Fo.prototype,t.add=function(l,d){Wr(this),this.i=null,l=ms(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function Fg(l,d){Wr(l),d=ms(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function jg(l,d){return Wr(l),d=ms(l,d),l.g.has(d)}t.forEach=function(l,d){Wr(this),this.g.forEach(function(p,g){p.forEach(function(N){l.call(d,N,g,this)},this)},this)},t.na=function(){Wr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let g=0;g<d.length;g++){const N=l[g];for(let b=0;b<N.length;b++)p.push(d[g])}return p},t.V=function(l){Wr(this);let d=[];if(typeof l=="string")jg(this,l)&&(d=d.concat(this.g.get(ms(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},t.set=function(l,d){return Wr(this),this.i=null,l=ms(this,l),jg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ug(l,d,p){Fg(l,d),0<p.length&&(l.i=null,l.g.set(ms(l,d),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var g=d[p];const b=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var N=b;q[g]!==""&&(N+="="+encodeURIComponent(String(q[g]))),l.push(N)}}return this.i=l.join("&")};function ms(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function AI(l,d){d&&!l.j&&(Wr(l),l.i=null,l.g.forEach(function(p,g){var N=g.toLowerCase();g!=N&&(Fg(this,g),Ug(this,N,p))},l)),l.j=d}function PI(l,d){const p=new ir;if(a.Image){const g=new Image;g.onload=y($r,p,"TestLoadImage: loaded",!0,d,g),g.onerror=y($r,p,"TestLoadImage: error",!1,d,g),g.onabort=y($r,p,"TestLoadImage: abort",!1,d,g),g.ontimeout=y($r,p,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else d(!1)}function kI(l,d){const p=new ir,g=new AbortController,N=setTimeout(()=>{g.abort(),$r(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:g.signal}).then(b=>{clearTimeout(N),b.ok?$r(p,"TestPingServer: ok",!0,d):$r(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),$r(p,"TestPingServer: error",!1,d)})}function $r(l,d,p,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(p)}catch{}}function RI(){this.g=new Be}function xI(l,d,p){const g=p||"";try{bg(l,function(N,b){let q=N;c(N)&&(q=fe(N)),d.push(g+b+"="+encodeURIComponent(q))})}catch(N){throw d.push(g+"type="+encodeURIComponent("_badmap")),N}}function jo(l){this.l=l.Ub||null,this.j=l.eb||!1}w(jo,En),jo.prototype.g=function(){return new jl(this.l,this.j)},jo.prototype.i=function(l){return function(){return l}}({});function jl(l,d){He.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(jl,He),t=jl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Bo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Uo(this):Bo(this),this.readyState==3&&Bg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Uo(this))},t.Qa=function(l){this.g&&(this.response=l,Uo(this))},t.ga=function(){this.g&&Uo(this)};function Uo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Bo(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function Bo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zg(l){let d="";return U(l,function(p,g){d+=g,d+=":",d+=p,d+=`\r
`}),d}function Ph(l,d,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=zg(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ke(l,d,p))}function lt(l){He.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(lt,He);var NI=/^https?$/i,DI=["POST","PUT"];t=lt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bo.g(),this.v=this.o?tr(this.o):tr(bo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(b){Wg(this,b);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)p.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const b of g.keys())p.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(b=>b.toLowerCase()=="content-type"),N=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DI,d,void 0))||g||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,q]of p)this.g.setRequestHeader(b,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qg(this),this.u=!0,this.g.send(l),this.u=!1}catch(b){Wg(this,b)}};function Wg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,$g(l),Ul(l)}function $g(l){l.A||(l.A=!0,oe(l,"complete"),oe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,oe(this,"complete"),oe(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hg(this):this.bb())},t.bb=function(){Hg(this)};function Hg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Tr(l)!=4||l.Z()!=2)){if(l.u&&Tr(l)==4)pt(l.Ea,0,l);else if(oe(l,"readystatechange"),Tr(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var g;if(g=q===0){var N=String(l.D).match(Mg)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),g=!NI.test(N?N.toLowerCase():"")}p=g}if(p)oe(l,"complete"),oe(l,"success");else{l.m=6;try{var b=2<Tr(l)?l.g.statusText:""}catch{b=""}l.l=b+" ["+l.Z()+"]",$g(l)}}finally{Ul(l)}}}}function Ul(l,d){if(l.g){qg(l);const p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||oe(l,"ready");try{p.onreadystatechange=g}catch{}}}function qg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Tr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),ke(d)}};function Gg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OI(l){const d={};l=(l.g&&2<=Tr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(_(l[g]))continue;var p=P(l[g]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const b=d[N]||[];d[N]=b,b.push(p)}I(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function Kg(l){this.Aa=0,this.i=[],this.j=new ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,l),this.cb=zo("retryDelaySeedMs",1e4,l),this.Wa=zo("forwardChannelMaxRetries",2,l),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Rg(l&&l.concurrentRequestLimit),this.Da=new RI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Kg.prototype,t.la=8,t.G=1,t.connect=function(l,d,p,g){Ct(0),this.W=l,this.H=d||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=rv(this,null,this.W),zl(this)};function kh(l){if(Qg(l),l.G==3){var d=l.U++,p=Er(l.I);if(Ke(p,"SID",l.K),Ke(p,"RID",d),Ke(p,"TYPE","terminate"),Wo(l,p),d=new Ne(l,l.j,d),d.L=2,d.v=Fl(Er(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=iv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ml(d)}nv(l)}function Bl(l){l.g&&(xh(l),l.g.cancel(),l.g=null)}function Qg(l){Bl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Wl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function zl(l){if(!xg(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ve||Y(),H||(Ve(),H=!0),J.add(d,l),l.B=0}}function bI(l,d){return Ng(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wr(m(l.Ga,l,d),tv(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const N=new Ne(this,this.j,l);let b=this.o;if(this.S&&(b?(b=v(b),E(b,this.S)):b=this.S),this.m!==null||this.O||(N.H=b,b=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Xg(this,N,d),p=Er(this.I),Ke(p,"RID",l),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),Wo(this,p),b&&(this.O?d="headers="+encodeURIComponent(String(zg(b)))+"&"+d:this.m&&Ph(p,this.m,b)),Ah(this.h,N),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",d),Ke(p,"SID","null"),N.T=!0,Ci(N,p,null)):Ci(N,p,d),this.G=2}}else this.G==3&&(l?Yg(this,l):this.i.length==0||xg(this.h)||Yg(this))};function Yg(l,d){var p;d?p=d.l:p=l.U++;const g=Er(l.I);Ke(g,"SID",l.K),Ke(g,"RID",p),Ke(g,"AID",l.T),Wo(l,g),l.m&&l.o&&Ph(g,l.m,l.o),p=new Ne(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Xg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ah(l.h,p),Ci(p,g,d)}function Wo(l,d){l.H&&U(l.H,function(p,g){Ke(d,g,p)}),l.l&&bg({},function(p,g){Ke(d,g,p)})}function Xg(l,d,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var N=l.i;let b=-1;for(;;){const q=["count="+p];b==-1?0<p?(b=N[0].g,q.push("ofs="+b)):b=0:q.push("ofs="+b);let ze=!0;for(let bt=0;bt<p;bt++){let Re=N[bt].g;const Wt=N[bt].map;if(Re-=b,0>Re)b=Math.max(0,N[bt].g-100),ze=!1;else try{xI(Wt,q,"req"+Re+"_")}catch{g&&g(Wt)}}if(ze){g=q.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,g}function Jg(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ve||Y(),H||(Ve(),H=!0),J.add(d,l),l.v=0}}function Rh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wr(m(l.Fa,l),tv(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Zg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wr(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Bl(this),Zg(this))};function xh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Zg(l){l.g=new Ne(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Er(l.qa);Ke(d,"RID","rpc"),Ke(d,"SID",l.K),Ke(d,"AID",l.T),Ke(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ke(d,"TO",l.ja),Ke(d,"TYPE","xmlhttp"),Wo(l,d),l.m&&l.o&&Ph(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Fl(Er(d)),p.m=null,p.P=!0,Ol(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Bl(this),Rh(this),Ct(19))};function Wl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function ev(l,d){var p=null;if(l.g==d){Wl(l),xh(l),l.g=null;var g=2}else if(Ch(l.h,d))p=d.D,Dg(l.h,d),g=1;else return;if(l.G!=0){if(d.o)if(g==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var N=l.B;g=Oe(),oe(g,new xo(g,p)),zl(l)}else Jg(l);else if(N=d.s,N==3||N==0&&0<d.X||!(g==1&&bI(l,d)||g==2&&Rh(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),N){case 1:ki(l,5);break;case 4:ki(l,10);break;case 3:ki(l,6);break;default:ki(l,2)}}}function tv(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function ki(l,d){if(l.j.info("Error code "+d),d==2){var p=m(l.fb,l),g=l.Xa;const N=!g;g=new Pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ll(g,"https"),Fl(g),N?PI(g.toString(),p):kI(g.toString(),p)}else Ct(2);l.G=0,l.l&&l.l.sa(d),nv(l),Qg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function nv(l){if(l.G=0,l.ka=[],l.l){const d=Og(l.h);(d.length!=0||l.i.length!=0)&&(x(l.ka,d),x(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function rv(l,d,p){var g=p instanceof Pi?Er(p):new Pi(p);if(g.g!="")d&&(g.g=d+"."+g.g),Vl(g,g.s);else{var N=a.location;g=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var b=new Pi(null);g&&Ll(b,g),d&&(b.g=d),N&&Vl(b,N),p&&(b.l=p),g=b}return p=l.D,d=l.ya,p&&d&&Ke(g,p,d),Ke(g,"VER",l.la),Wo(l,g),g}function iv(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new lt(new jo({eb:p})):new lt(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sv(){}t=sv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $l(){}$l.prototype.g=function(l,d){return new Tn(l,d)};function Tn(l,d){He.call(this),this.g=new Kg(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!_(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new gs(this)}w(Tn,He),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){kh(this.g)},Tn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=fe(l),l=p);d.i.push(new vI(d.Ya++,l)),d.G==3&&zl(d)},Tn.prototype.N=function(){this.g.l=null,delete this.j,kh(this.g),delete this.g,Tn.aa.N.call(this)};function ov(l){rr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}w(ov,rr);function av(){mt.call(this),this.status=1}w(av,mt);function gs(l){this.g=l}w(gs,sv),gs.prototype.ua=function(){oe(this.g,"a")},gs.prototype.ta=function(l){oe(this.g,new ov(l))},gs.prototype.sa=function(l){oe(this.g,new av)},gs.prototype.ra=function(){oe(this.g,"b")},$l.prototype.createWebChannel=$l.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,KT=function(){return new $l},GT=function(){return Oe()},qT=qe,rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,bu=Ii,Dl.COMPLETE="complete",HT=Dl,nr.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",He.prototype.listen=He.prototype.K,ha=nr,$T=jo,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,WT=lt}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const A_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new km("@firebase/firestore");function ra(){return rs.logLevel}function ee(t,...e){if(rs.logLevel<=Ie.DEBUG){const n=e.map(Xm);rs.debug(`Firestore (${Ao}): ${t}`,...n)}}function Fr(t,...e){if(rs.logLevel<=Ie.ERROR){const n=e.map(Xm);rs.error(`Firestore (${Ao}): ${t}`,...n)}}function lo(t,...e){if(rs.logLevel<=Ie.WARN){const n=e.map(Xm);rs.warn(`Firestore (${Ao}): ${t}`,...n)}}function Xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function We(t,e){t||le()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends To{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class gO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vO{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new QT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Qt(e)}}class yO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _O{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new wO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Tt(0,0))}static max(){return new ce(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ct extends rl{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const SO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends rl{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return SO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ct.fromString(e))}static fromName(e){return new ie(ct.fromString(e).popFirst(5))}static empty(){return new ie(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ct(e.slice()))}}function IO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new mi(i,ie.empty(),e)}function CO(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(ce.min(),ie.empty(),-1)}static max(){return new mi(ce.max(),ie.empty(),-1)}}function AO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==PO)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function RO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jm.oe=-1;function lh(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function xO(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Lt.RED,this.left=i??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Lt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new k_(this.data.getIterator())}getIteratorFrom(e){return new k_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class k_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new Ut(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JT("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const NO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(We(!!t),typeof t=="string"){let e=0;const n=NO.exec(t);if(We(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eg(t){const e=t.mapValue.fields.__previous_value__;return Zm(e)?eg(e):e}function il(t){const e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:bO(t)?9007199254740991:OO(t)?10:11:le()}function vr(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gi(i.timestampValue),a=gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return is(i.bytesValue).isEqual(is(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dt(i.geoPointValue.latitude)===dt(s.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dt(i.integerValue)===dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dt(i.doubleValue),a=dt(s.doubleValue);return o===a?Ic(o)===Ic(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(P_(o)!==P_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!vr(o[u],a[u])))return!1;return!0}(t,e);default:return le()}}function ol(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dt(s.integerValue||s.doubleValue),u=dt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return R_(t.timestampValue,e.timestampValue);case 4:return R_(il(t),il(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=is(s),u=is(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=xe(a[c],u[c]);if(h!==0)return h}return xe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=xe(dt(s.latitude),dt(o.latitude));return a!==0?a:xe(dt(s.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const f=s.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(u=m.value)===null||u===void 0?void 0:u.arrayValue,k=xe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:x_(y,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===mu.mapValue&&o===mu.mapValue)return 0;if(s===mu.mapValue)return 1;if(o===mu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=xe(u[f],h[f]);if(m!==0)return m;const y=co(a[u[f]],c[h[f]]);if(y!==0)return y}return xe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function R_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=gi(t),r=gi(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function x_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=co(n[i],r[i]);if(s)return s}return xe(n.length,r.length)}function ho(t){return ip(t)}function ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ip(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ip(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function sp(t){return!!t&&"integerValue"in t}function tg(t){return!!t&&"arrayValue"in t}function N_(t){return!!t&&"nullValue"in t}function D_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mu(t){return!!t&&"mapValue"in t}function OO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ra(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Po(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bn(Ra(this.value))}}function ZT(t){const e=[];return Po(t.fields,(n,r)=>{const i=new Ft([n]);if(Mu(r)){const s=ZT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Zt(e,0,ce.min(),ce.min(),ce.min(),bn.empty(),0)}static newFoundDocument(e,n,r,i){return new Zt(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Zt(e,2,n,ce.min(),ce.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,ce.min(),ce.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.position=e,this.inclusive=n}}function O_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=co(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function b_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function MO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class wt extends eS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VO(e,n,r):n==="array-contains"?new UO(e,r):n==="in"?new BO(e,r):n==="not-in"?new zO(e,r):n==="array-contains-any"?new WO(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FO(e,r):new jO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends eS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yr(e,n)}matches(e){return tS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tS(t){return t.op==="and"}function nS(t){return LO(t)&&tS(t)}function LO(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function op(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(nS(t))return t.filters.map(e=>op(e)).join(",");{const e=t.filters.map(n=>op(n)).join(",");return`${t.op}(${e})`}}function rS(t,e){return t instanceof wt?function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof yr?function(r,i){return i instanceof yr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&rS(o,i.filters[a]),!0):!1}(t,e):void le()}function iS(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(iS).join(" ,")+"}"}(t):"Filter"}class VO extends wt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class FO extends wt{constructor(e,n){super(e,"in",n),this.keys=sS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jO extends wt{constructor(e,n){super(e,"not-in",n),this.keys=sS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class UO extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tg(n)&&ol(n.arrayValue,this.value)}}class BO extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class zO extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ol(this.value.arrayValue,n)}}class WO extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function M_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $O(t,e,n,r,i,s,o)}function ng(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>op(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.ue=n}return e.ue}function rg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b_(t.startAt,e.startAt)&&b_(t.endAt,e.endAt)}function ap(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HO(t,e,n,r,i,s,o,a){return new uh(t,e,n,r,i,s,o,a)}function ig(t){return new uh(t)}function L_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qO(t){return t.collectionGroup!==null}function xa(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ut(Ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ac(s,r))}),n.has(Ft.keyField().canonicalString())||e.ce.push(new Ac(Ft.keyField(),r))}return e.ce}function pr(t){const e=he(t);return e.le||(e.le=GO(e,xa(t))),e.le}function GO(t,e){if(t.limitType==="F")return M_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ac(i.field,s)});const n=t.endAt?new Cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cc(t.startAt.position,t.startAt.inclusive):null;return M_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lp(t,e,n){return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ch(t,e){return rg(pr(t),pr(e))&&t.limitType===e.limitType}function oS(t){return`${ng(pr(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iS(i)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ho(i)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of xa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=O_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,xa(r),i)||r.endAt&&!function(o,a,u){const c=O_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,xa(r),i))}(t,e)}function KO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aS(t){return(e,n)=>{let r=!1;for(const i of xa(t)){const s=QO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QO(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?co(u,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return XT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new at(ie.comparator);function jr(){return YO}const lS=new at(ie.comparator);function da(...t){let e=lS;for(const n of t)e=e.insert(n.key,n);return e}function uS(t){let e=lS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fi(){return Na()}function cS(){return Na()}function Na(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const XO=new at(ie.comparator),JO=new Ut(ie.comparator);function we(...t){let e=JO;for(const n of t)e=e.add(n);return e}const ZO=new Ut(xe);function eb(){return ZO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function hS(t){return{integerValue:""+t}}function tb(t,e){return xO(e)?hS(e):sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function nb(t,e,n){return t instanceof Pc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zm(s)&&(s=eg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof al?fS(t,e):t instanceof ll?pS(t,e):function(i,s){const o=dS(i,s),a=V_(o)+V_(i.Pe);return sp(o)&&sp(i.Pe)?hS(a):sg(i.serializer,a)}(t,e)}function rb(t,e,n){return t instanceof al?fS(t,e):t instanceof ll?pS(t,e):n}function dS(t,e){return t instanceof kc?function(r){return sp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Pc extends dh{}class al extends dh{constructor(e){super(),this.elements=e}}function fS(t,e){const n=mS(e);for(const r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends dh{constructor(e){super(),this.elements=e}}function pS(t,e){let n=mS(e);for(const r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}class kc extends dh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function V_(t){return dt(t.integerValue||t.doubleValue)}function mS(t){return tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ib(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof al&&i instanceof al||r instanceof ll&&i instanceof ll?uo(r.elements,i.elements,vr):r instanceof kc&&i instanceof kc?vr(r.Pe,i.Pe):r instanceof Pc&&i instanceof Pc}(t.transform,e.transform)}class sb{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fh{}function gS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new og(t.key,mr.none()):new kl(t.key,t.data,mr.none());{const n=t.data,r=bn.empty();let i=new Ut(Ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ds(t.key,r,new Yn(i.toArray()),mr.none())}}function ob(t,e,n){t instanceof kl?function(i,s,o){const a=i.value.clone(),u=j_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(i,s,o){if(!Lu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=j_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(vS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof kl?function(s,o,a,u){if(!Lu(s.precondition,o))return a;const c=s.value.clone(),h=U_(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(s,o,a,u){if(!Lu(s.precondition,o))return a;const c=U_(s.fieldTransforms,u,o),h=o.data;return h.setAll(vS(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Lu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ab(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=dS(r.transform,i||null);s!=null&&(n===null&&(n=bn.empty()),n.set(r.field,s))}return n||null}function F_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uo(r,i,(s,o)=>ib(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kl extends fh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ds extends fh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function j_(t,e,n){const r=new Map;We(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rb(o,a,n[i]))}return r}function U_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nb(s,o,e))}return r}class og extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ob(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=gS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>F_(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>F_(n,r))}}class ag{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){We(e.mutations.length===r.length);let i=function(){return XO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ag(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Se;function db(t){switch(t){default:return le();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function yS(t){if(t===void 0)return Fr("GRPC error has no .code"),W.UNKNOWN;switch(t){case gt.OK:return W.OK;case gt.CANCELLED:return W.CANCELLED;case gt.UNKNOWN:return W.UNKNOWN;case gt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case gt.INTERNAL:return W.INTERNAL;case gt.UNAVAILABLE:return W.UNAVAILABLE;case gt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case gt.NOT_FOUND:return W.NOT_FOUND;case gt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case gt.ABORTED:return W.ABORTED;case gt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case gt.DATA_LOSS:return W.DATA_LOSS;default:return le()}}(Se=gt||(gt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new $i([4294967295,4294967295],0);function B_(t){const e=fb().encode(t),n=new zT;return n.update(e),new Uint8Array(n.digest())}function z_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $i([n,r],0),new $i([i,s],0)]}class lg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$i.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($i.fromNumber(r)));return i.compare(pb)===1&&(i=new $i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(ce.min(),i,new at(xe),jr(),we())}}class Rl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rl(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _S{constructor(e,n){this.targetId=e,this.me=n}}class wS{constructor(e,n,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W_{constructor(){this.fe=0,this.ge=H_(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Rl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=H_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mb{constructor(e){this.Le=e,this.Be=new Map,this.ke=jr(),this.qe=$_(),this.Qe=new at(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(ap(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,Zt.newNoDocument(o,ce.min()))}else We(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=is(r).toUint8Array()}catch(u){if(u instanceof JT)return lo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lg(o,i,s)}catch(u){return lo(u instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ap(a.target)){const u=new ie(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Zt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=we();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ph(e,n,this.Qe,this.ke,r);return this.ke=jr(),this.qe=$_(),this.Qe=new at(xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new W_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ut(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $_(){return new at(ie.comparator)}function H_(){return new at(ie.comparator)}const gb={asc:"ASCENDING",desc:"DESCENDING"},vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yb={and:"AND",or:"OR"};class _b{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function up(t,e){return t.useProto3Json||lh(e)?e:{value:e}}function Rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ES(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wb(t,e){return Rc(t,e.toTimestamp())}function gr(t){return We(!!t),ce.fromTimestamp(function(n){const r=gi(n);return new Tt(r.seconds,r.nanos)}(t))}function ug(t,e){return cp(t,e).canonicalString()}function cp(t,e){const n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TS(t){const e=ct.fromString(t);return We(PS(e)),e}function hp(t,e){return ug(t.databaseId,e.path)}function Ed(t,e){const n=TS(e);if(n.get(1)!==t.databaseId.projectId)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(IS(n))}function SS(t,e){return ug(t.databaseId,e)}function Eb(t){const e=TS(t);return e.length===4?ct.emptyPath():IS(e)}function dp(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IS(t){return We(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function q_(t,e,n){return{name:hp(t,e),fields:n.value.mapValue.fields}}function Tb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(We(h===void 0||typeof h=="string"),zt.fromBase64String(h||"")):(We(h===void 0||h instanceof Buffer||h instanceof Uint8Array),zt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?W.UNKNOWN:yS(c.code);return new re(h,c.message||"")}(o);n=new wS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ed(t,r.document.name),s=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):ce.min(),a=new bn({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Vu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ed(t,r.document),s=r.readTime?gr(r.readTime):ce.min(),o=Zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Vu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ed(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new hb(i,s),a=r.targetId;n=new _S(a,o)}}return n}function Sb(t,e){let n;if(e instanceof kl)n={update:q_(t,e.key,e.value)};else if(e instanceof og)n={delete:hp(t,e.key)};else if(e instanceof ds)n={update:q_(t,e.key,e.data),updateMask:Db(e.fieldMask)};else{if(!(e instanceof lb))return le();n={verify:hp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function Ib(t,e){return t&&t.length>0?(We(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gr(i.updateTime):gr(s);return o.isEqual(ce.min())&&(o=gr(s)),new sb(o,i.transformResults||[])}(n,e))):[]}function Cb(t,e){return{documents:[SS(t,e.path)]}}function Ab(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SS(t,i);const s=function(c){if(c.length!==0)return AS(yr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Ss(m.field),direction:Rb(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=up(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Pb(t){let e=Eb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){We(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=CS(f);return m instanceof yr&&nS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(w){return new Ac(Is(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,lh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,y=f.values||[];return new Cc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Cc(y,m)}(n.endAt)),HO(e,i,o,s,a,"F",u,c)}function kb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Is(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Is(n.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Is(n.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Is(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Is(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(r=>CS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function Rb(t){return gb[t]}function xb(t){return vb[t]}function Nb(t){return yb[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function Is(t){return Ft.fromServerFormat(t.fieldPath)}function AS(t){return t instanceof wt?function(n){if(n.op==="=="){if(D_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(N_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(N_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:xb(n.op),value:n.value}}}(t):t instanceof yr?function(n){const r=n.getFilters().map(i=>AS(i));return r.length===1?r[0]:{compositeFilter:{op:Nb(n.op),filters:r}}}(t):le()}function Db(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.ct=e}}function bb(t){const e=Pb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.un=new Lb}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(mi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class Lb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(ct.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Da(r.mutation,i,Yn.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=Fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=da();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=jr();const o=Na(),a=function(){return Na()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ds)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Da(h.mutation,c,h.mutation.getFieldMask(),Tt.now())):o.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Fb(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Na();let i=new at((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Yn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||we()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=cS();h.forEach(m=>{if(!s.has(m)){const y=gS(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Fi());let a=-1,u=s;return o.next(c=>B.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,we())).next(h=>({batchId:a,changes:uS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=da();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,u=>{const c=function(f,m){return new uh(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let a=da();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Da(h.mutation,c,Yn.empty(),Tt.now()),hh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:bb(i.bundledQuery),readTime:gr(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.overlays=new at(ie.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fi();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Fi(),s=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new at((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Fi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Fi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cb(n,r));let s=this.Ir.get(n);s===void 0&&(s=we(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Tr=new Ut(kt.Er),this.dr=new Ut(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new ct([])),r=new kt(n,e),i=new kt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new ct([])),r=new kt(n,e),i=new kt(n,e+1);let s=we();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ut(kt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ub(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),i=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(xe);return n.forEach(i=>{const s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new kt(new ie(s),0);let a=new Ut(xe);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){We(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new kt(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.Mr=e,this.docs=function(){return new at(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=jr();const o=n.path,a=new ie(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AO(CO(h),r)<=0||(i.has(h.key)||hh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hb(this)}getSize(e){return B.resolve(this.size)}}class Hb extends Vb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.persistence=e,this.Nr=new ko(n=>ng(n),rg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cg,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jm(0),this.Kr=!1,this.Kr=!0,this.$r=new zb,this.referenceDelegate=e(this),this.Ur=new qb(this),this.indexManager=new Mb,this.remoteDocumentCache=function(i){return new $b(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ob(n),this.Gr=new Ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Wb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new Kb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Kb extends kO{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Jr=new cg,this.Yr=null}static Zr(e){return new hg(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lR()?8:RO(v1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qb;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ra()<=Ie.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(ra()<=Ie.DEBUG&&ee("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ra()<=Ie.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):B.resolve())}Yi(e,n){if(L_(n))return B.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lp(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,lp(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return L_(n)||i.isEqual(ce.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(ra()<=Ie.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(n)),this.rs(e,o,n,IO(i,-1)).next(a=>a))})}ts(e,n){let r=new Ut(aS(e));return n.forEach((i,s)=>{hh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ra()<=Ie.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new at(xe),this._s=new ko(s=>ng(s),rg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Jb(t,e,n,r){return new Xb(t,e,n,r)}async function kS(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=we();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Zb(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,m=f.keys();let y=B.resolve();return m.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(k=>{const x=c.docVersions.get(w);We(x!==null),k.version.compareTo(x)<0&&(f.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RS(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function e2(t,e){const n=he(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(zt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(k,x,T){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=jr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(t2(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function t2(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=jr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function n2(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r2(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function fp(t,e,n){const r=he(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Pl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function G_(t,e,n){const r=he(t);let i=ce.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=he(u),m=f._s.get(h);return m!==void 0?B.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:we())).next(a=>(i2(r,KO(e),a),{documents:a,Ts:s})))}function i2(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class K_{constructor(){this.activeTargetIds=eb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s2{constructor(){this.so=new K_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function Td(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class u2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Td(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw lo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ao}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=a2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Td();return new Promise((o,a)=>{const u=new WT;u.setWithCredentials(!0),u.listenOnce(HT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case bu.NO_ERROR:const h=u.getResponseJson();ee(Gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case bu.TIMEOUT:ee(Gt,`RPC '${e}' ${s} timed out`),a(new re(W.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const f=u.getStatus();if(ee(Gt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const w=function(x){const T=x.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(T)>=0?T:W.UNKNOWN}(y.status);a(new re(w,y.message))}else a(new re(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new re(W.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{ee(Gt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(Gt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Td(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KT(),a=GT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new $T({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ee(Gt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let m=!1,y=!1;const w=new l2({Io:x=>{y?ee(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(ee(Gt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),ee(Gt,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),k=(x,T,_)=>{x.listen(T,A=>{try{_(A)}catch(D){setTimeout(()=>{throw D},0)}})};return k(f,ha.EventType.OPEN,()=>{y||(ee(Gt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),k(f,ha.EventType.CLOSE,()=>{y||(y=!0,ee(Gt,`RPC '${e}' stream ${i} transport closed`),w.So())}),k(f,ha.EventType.ERROR,x=>{y||(y=!0,lo(Gt,`RPC '${e}' stream ${i} transport errored:`,x),w.So(new re(W.UNAVAILABLE,"The operation could not be completed")))}),k(f,ha.EventType.MESSAGE,x=>{var T;if(!y){const _=x.data[0];We(!!_);const A=_,D=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(D){ee(Gt,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let U=function(S){const E=gt[S];if(E!==void 0)return yS(E)}(F),I=D.message;U===void 0&&(U=W.INTERNAL,I="Unknown error status: "+F+" with message "+D.message),y=!0,w.So(new re(U,I)),f.close()}else ee(Gt,`RPC '${e}' stream ${i} received:`,_),w.bo(_)}}),k(a,qT.STAT_EVENT,x=>{x.stat===rp.PROXY?ee(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===rp.NOPROXY&&ee(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return new _b(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c2 extends NS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Tb(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?gr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=dp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=ap(u)?{documents:Cb(s,u)}:{query:Ab(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ES(s,o.resumeToken);const c=up(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Rc(s,o.snapshotVersion.toTimestamp());const c=up(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kb(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.a_(n)}}class h2 extends NS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ib(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=dp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(W.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class f2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{fs(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=he(u);c.L_.add(4),await xl(c),c.q_.set("Unknown"),c.L_.delete(4),await gh(c)}(this))})}),this.q_=new f2(r,i)}}async function gh(t){if(fs(t))for(const e of t.B_)await e(!0)}async function xl(t){for(const e of t.B_)await e(!1)}function DS(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gg(n)?mg(n):Ro(n).r_()&&pg(n,e))}function fg(t,e){const n=he(t),r=Ro(n);n.N_.delete(e),r.r_()&&OS(n,e),n.N_.size===0&&(r.r_()?r.o_():fs(n)&&n.q_.set("Unknown"))}function pg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(t).A_(e)}function OS(t,e){t.Q_.xe(e),Ro(t).R_(e)}function mg(t){t.Q_=new mb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ro(t).start(),t.q_.v_()}function gg(t){return fs(t)&&!Ro(t).n_()&&t.N_.size>0}function fs(t){return he(t).L_.size===0}function bS(t){t.Q_=void 0}async function m2(t){t.q_.set("Online")}async function g2(t){t.N_.forEach((e,n)=>{pg(t,e)})}async function v2(t,e){bS(t),gg(t)?(t.q_.M_(e),mg(t)):t.q_.set("Unknown")}async function y2(t,e,n){if(t.q_.set("Online"),e instanceof wS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xc(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof _S?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await RS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(zt.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(s,u);const f=new Jr(h.target,u,c,h.sequenceNumber);pg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await xc(t,r)}}async function xc(t,e,n){if(!Pl(e))throw e;t.L_.add(1),await xl(t),t.q_.set("Offline"),n||(n=()=>RS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gh(t)})}function MS(t,e){return e().catch(n=>xc(t,n,e))}async function vh(t){const e=he(t),n=vi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_2(e);)try{const i=await n2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,w2(e,i)}catch(i){await xc(e,i)}LS(e)&&VS(e)}function _2(t){return fs(t)&&t.O_.length<10}function w2(t,e){t.O_.push(e);const n=vi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LS(t){return fs(t)&&!vi(t).n_()&&t.O_.length>0}function VS(t){vi(t).start()}async function E2(t){vi(t).p_()}async function T2(t){const e=vi(t);for(const n of t.O_)e.m_(n.mutations)}async function S2(t,e,n){const r=t.O_.shift(),i=ag.from(r,e,n);await MS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vh(t)}async function I2(t,e){e&&vi(t).V_&&await async function(r,i){if(function(o){return db(o)&&o!==W.ABORTED}(i.code)){const s=r.O_.shift();vi(r).s_(),await MS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vh(r)}}(t,e),LS(t)&&VS(t)}async function Y_(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=fs(n);n.L_.add(3),await xl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gh(n)}async function C2(t,e){const n=he(t);e?(n.L_.delete(2),await gh(n)):e||(n.L_.add(2),await xl(n),n.q_.set("Unknown"))}function Ro(t){return t.K_||(t.K_=function(n,r,i){const s=he(n);return s.w_(),new c2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:m2.bind(null,t),Ro:g2.bind(null,t),mo:v2.bind(null,t),d_:y2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gg(t)?mg(t):t.q_.set("Unknown")):(await t.K_.stop(),bS(t))})),t.K_}function vi(t){return t.U_||(t.U_=function(n,r,i){const s=he(n);return s.w_(),new h2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:E2.bind(null,t),mo:I2.bind(null,t),f_:T2.bind(null,t),g_:S2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vh(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),Pl(t))return new re(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=da(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new Qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.W_=new at(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,Qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class P2{constructor(){this.queries=J_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=J_(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new re(W.ABORTED,"Firestore shutting down"))}}function J_(){return new ko(t=>oS(t),ch)}async function k2(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new A2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yg(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_g(n)}async function R2(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function x2(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&_g(n)}function N2(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _g(t){t.Y_.forEach(e=>{e.next()})}var pp,Z_;(Z_=pp||(pp={})).ea="default",Z_.Cache="cache";class D2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class jS{constructor(e){this.key=e}}class O2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=aS(e),this.Ra=new Qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new X_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),y=hh(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?w!==k&&(r.track({type:3,doc:y}),x=!0):this.ga(m,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(u||c)&&(a=!0)),x&&(y?(o=o.add(y),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,w){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return k(y)-k(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new po(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new X_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new jS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new FS(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class b2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M2{constructor(e){this.key=e,this.va=!1}}class L2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ko(a=>oS(a),ch),this.Ma=new Map,this.xa=new Set,this.Oa=new at(ie.comparator),this.Na=new Map,this.La=new cg,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function V2(t,e,n=!0){const r=HS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await US(r,e,n,!0),i}async function F2(t,e){const n=HS(t);await US(n,e,!0,!1)}async function US(t,e,n,r){const i=await r2(t.localStore,pr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await j2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&DS(t.remoteStore,i),a}async function j2(t,e,n,r,i){t.Ka=(f,m,y)=>async function(k,x,T,_){let A=x.view.ma(T);A.ns&&(A=await G_(k.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,A)));const D=_&&_.targetChanges.get(x.targetId),F=_&&_.targetMismatches.get(x.targetId)!=null,U=x.view.applyChanges(A,k.isPrimaryClient,D,F);return t0(k,x.targetId,U.wa),U.snapshot}(t,f,m,y);const s=await G_(t.localStore,e,!0),o=new O2(e,s.Ts),a=o.ma(s.documents),u=Rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);t0(t,n,c.wa);const h=new b2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function U2(t,e,n){const r=he(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ch(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fg(r.remoteStore,i.targetId),mp(r,i.targetId)}).catch(Al)):(mp(r,i.targetId),await fp(r.localStore,i.targetId,!0))}async function B2(t,e){const n=he(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fg(n.remoteStore,r.targetId))}async function z2(t,e,n){const r=Q2(t);try{const i=await function(o,a){const u=he(o),c=Tt.now(),h=a.reduce((y,w)=>y.add(w.key),we());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=jr(),k=we();return u.cs.getEntries(y,h).next(x=>{w=x,w.forEach((T,_)=>{_.isValidDocument()||(k=k.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(x=>{f=x;const T=[];for(const _ of a){const A=ab(_,f.get(_.key).overlayedDocument);A!=null&&T.push(new ds(_.key,A,ZT(A.value.mapValue),mr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,T,a)}).next(x=>{m=x;const T=x.applyToLocalDocumentSet(f,k);return u.documentOverlayCache.saveOverlays(y,x.batchId,T)})}).then(()=>({batchId:m.batchId,changes:uS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new at(xe)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Nl(r,i.changes),await vh(r.remoteStore)}catch(i){const s=yg(i,"Failed to persist write");n.reject(s)}}async function BS(t,e){const n=he(t);try{const r=await e2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?We(o.va):i.removedDocuments.size>0&&(We(o.va),o.va=!1))}),await Nl(n,r,e)}catch(r){await Al(r)}}function e0(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=he(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&_g(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W2(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new at(ie.comparator);o=o.insert(s,Zt.newNoDocument(s,ce.min()));const a=we().add(s),u=new ph(ce.min(),new Map,new at(xe),o,a);await BS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),wg(r)}else await fp(r.localStore,e,!1).then(()=>mp(r,e,n)).catch(Al)}async function $2(t,e){const n=he(t),r=e.batch.batchId;try{const i=await Zb(n.localStore,e);WS(n,r,null),zS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nl(n,i)}catch(i){await Al(i)}}async function H2(t,e,n){const r=he(t);try{const i=await function(o,a){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(We(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);WS(r,e,n),zS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nl(r,i)}catch(i){await Al(i)}}function zS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function WS(t,e,n){const r=he(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$S(t,r)})}function $S(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wg(t))}function t0(t,e,n){for(const r of n)r instanceof FS?(t.La.addReference(r.key,e),q2(t,r)):r instanceof jS?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$S(t,r.key)):le()}function q2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),wg(t))}function wg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(ct.fromString(e)),r=t.qa.next();t.Na.set(r,new M2(n)),t.Oa=t.Oa.insert(n,r),DS(t.remoteStore,new Jr(pr(ig(n.path)),r,"TargetPurposeLimboResolution",Jm.oe))}}async function Nl(t,e,n){const r=he(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=dg.Wi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=he(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>B.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Pl(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),w=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(m,k)}}}(r.localStore,s))}async function G2(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await kS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new re(W.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nl(n,r.hs)}}function K2(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let i=we();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function HS(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W2.bind(null,e),e.Ca.d_=x2.bind(null,e.eventManager),e.Ca.$a=N2.bind(null,e.eventManager),e}function Q2(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H2.bind(null,e),e}class n0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Jb(this.persistence,new Yb,e.initialUser,this.serializer)}createPersistence(e){return new Gb(hg.Zr,this.serializer)}createSharedClientState(e){return new s2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Y2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),await C2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P2}()}createDatastore(e){const n=mh(e.databaseInfo.databaseId),r=function(s){return new u2(s)}(e.databaseInfo);return function(s,o,a,u){return new d2(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new p2(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>e0(this.syncEngine,n,0),function(){return Q_.D()?new Q_:new o2}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new L2(i,s,o,a,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await xl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=YT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ee("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eM(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Y_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Y_(e.remoteStore,i)),t._onlineComponents=e}function Z2(t){return t.name==="FirebaseError"?t.code===W.FAILED_PRECONDITION||t.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function eM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Z2(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new n0)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new n0);return t._offlineComponents}async function qS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await r0(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await r0(t,new Y2))),t._onlineComponents}function tM(t){return qS(t).then(e=>e.syncEngine)}async function i0(t){const e=await qS(t),n=e.eventManager;return n.onListen=V2.bind(null,e.syncEngine),n.onUnlisten=U2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t,e,n){if(!n)throw new re(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rM(t,e,n,r){if(e===!0&&r===!0)throw new re(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o0(t){if(!ie.isDocumentKey(t))throw new re(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Eg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eg(t);throw new re(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mO;switch(r.type){case"firstParty":return new _O(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=s0.get(n);r&&(ee("ComponentProvider","Removing Datastore"),s0.delete(n),r.terminate())}(this),Promise.resolve()}}function iM(t,e,n,r={}){var i;const s=(t=qi(t,Tg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Qt.MOCK_USER;else{a=g1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new re(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qt(c)}t._authCredentials=new gO(new QT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yh(this.firestore,e,this._query)}}class Fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class ul extends yh{constructor(e,n,r){super(e,n,ig(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new ie(e))}withConverter(e){return new ul(this.firestore,e,this._path)}}function ws(t,e,...n){if(t=Zi(t),arguments.length===1&&(e=YT.newId()),nM("doc","path",e),t instanceof Tg){const r=ct.fromString(e,...n);return o0(r),new Fn(t,null,new ie(r))}{if(!(t instanceof Fn||t instanceof ul))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return o0(r),new Fn(t.firestore,t instanceof ul?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new xS(this,"async_queue_retry"),this.Eu=()=>{const n=Sd();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Sd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Hi;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Pl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=vg.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&le()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function l0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class cl extends Tg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new sM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||QS(this),this._firestoreClient.terminate()}}function oM(t,e){const n=typeof t=="object"?t:P1(),r=typeof t=="string"?t:"(default)",i=I1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=p1("firestore");s&&iM(i,...s)}return i}function KS(t){return t._firestoreClient||QS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function QS(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new DO(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new J2(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(zt.fromBase64String(e))}catch(n){throw new re(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=/^__.*__$/;class lM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}function XS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Ag{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Nc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(XS(this.wu)&&aM.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class uM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Nu(e,n,r,i=!1){return new Ag({wu:e,methodName:n,Ou:r,path:Ft.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cM(t){const e=t._freezeSettings(),n=mh(t._databaseId);return new uM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hM(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);tI("Data must be an object, but it was:",o,r);const a=ZS(r,o);let u,c;if(s.merge)u=new Yn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=dM(e,f,n);if(!o.contains(m))throw new re(W.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pM(h,m)||h.push(m)}u=new Yn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new lM(new bn(a),u,c)}function JS(t,e){if(eI(t=Zi(t)))return tI("Unsupported field value:",e,t),ZS(t,e);if(t instanceof YS)return function(r,i){if(!XS(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=JS(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Zi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Tt.fromDate(r);return{timestampValue:Rc(i.serializer,s)}}if(r instanceof Tt){const s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(i.serializer,s)}}if(r instanceof Ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mo)return{bytesValue:ES(i.serializer,r._byteString)};if(r instanceof Fn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ug(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return sg(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Eg(r)}`)}(t,e)}function ZS(t,e){const n={};return XT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(t,(r,i)=>{const s=JS(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function eI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Ig||t instanceof mo||t instanceof Fn||t instanceof YS||t instanceof Cg)}function tI(t,e,n){if(!eI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Eg(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function dM(t,e,n){if((e=Zi(e))instanceof Sg)return e._internalPath;if(typeof e=="string")return nI(t,e);throw Nc("Field path arguments must be of type string or ",t,!1,void 0,n)}const fM=new RegExp("[~\\*/\\[\\]]");function nI(t,e,n){if(e.search(fM)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sg(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new re(W.INVALID_ARGUMENT,a+t+u)}function pM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mM extends rI{data(){return super.data()}}function iI(t,e){return typeof e=="string"?nI(t,e):e instanceof Sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vM{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Po(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>dt(o.doubleValue));return new Cg(s)}convertGeoPoint(e){return new Ig(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=eg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=gi(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);We(PS(r));const i=new sl(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sI extends rI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends sI{data(e={}){return super.data(e)}}class _M{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:wM(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class oI extends vM{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,n)}}function Cd(t,e,n){t=qi(t,Fn);const r=qi(t.firestore,cl),i=yM(t.converter,e);return aI(r,[hM(cM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mr.none())])}function EM(t){return aI(qi(t.firestore,cl),[new og(t._key,mr.none())])}function u0(t,...e){var n,r,i;t=Zi(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(l0(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,h;if(t instanceof Fn)c=qi(t.firestore,cl),h=ig(t._key.path),u={next:f=>{e[o]&&e[o](TM(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=qi(t,yh);c=qi(f.firestore,cl),h=f._query;const m=new oI(c);u={next:y=>{e[o]&&e[o](new _M(c,m,f,y))},error:e[o+1],complete:e[o+2]},gM(t._query)}return function(m,y,w,k){const x=new X2(k),T=new D2(y,x,w);return m.asyncQueue.enqueueAndForget(async()=>k2(await i0(m),T)),()=>{x.za(),m.asyncQueue.enqueueAndForget(async()=>R2(await i0(m),T))}}(KS(c),h,a,u)}function aI(t,e){return function(r,i){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>z2(await tM(r),i,s)),s.promise}(KS(t),e)}function TM(t,e,n){const r=n.docs.get(e._key),i=new oI(t);return new sI(t,i,e._key,r,new pa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ao=i})(C1),Za(new so("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new cl(new vO(r.getProvider("auth-internal")),new EO(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ci(A_,"4.7.0",e),ci(A_,"4.7.0","esm2017")})();const SM={apiKey:"AIzaSyDZch3ABGafNJ98fD1MJQIypuTGoN6Tf1k",authDomain:"joeandserina-e8baf.firebaseapp.com",databaseURL:"https://joeandserina-e8baf-default-rtdb.firebaseio.com",projectId:"joeandserina-e8baf",storageBucket:"joeandserina-e8baf.appspot.com",messagingSenderId:"669426918383",appId:"1:669426918383:web:5884696298787333380c1a"},lI=A1(SM);dO(lI);const Es=oM(lI);var uI={exports:{}};(function(t,e){(function(n,r){t.exports=r(Q)})(typeof self<"u"?self:ia,function(n){return function(r){var i={};function s(o){if(i[o])return i[o].exports;var a=i[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=r,s.c=i,s.d=function(o,a,u){s.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:u})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,a){if(1&a&&(o=s(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(s.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)s.d(u,c,(function(h){return o[h]}).bind(null,c));return u},s.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(a,"a",a),a},s.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},s.p="",s(s.s=2)}([function(r,i){r.exports=n},function(r,i,s){var o={linear:function(a,u,c,h){return(c-u)*a/h+u},easeInQuad:function(a,u,c,h){return(c-u)*(a/=h)*a+u},easeOutQuad:function(a,u,c,h){return-(c-u)*(a/=h)*(a-2)+u},easeInOutQuad:function(a,u,c,h){var f=c-u;return(a/=h/2)<1?f/2*a*a+u:-f/2*(--a*(a-2)-1)+u},easeInCubic:function(a,u,c,h){return(c-u)*(a/=h)*a*a+u},easeOutCubic:function(a,u,c,h){return(c-u)*((a=a/h-1)*a*a+1)+u},easeInOutCubic:function(a,u,c,h){var f=c-u;return(a/=h/2)<1?f/2*a*a*a+u:f/2*((a-=2)*a*a+2)+u},easeInQuart:function(a,u,c,h){return(c-u)*(a/=h)*a*a*a+u},easeOutQuart:function(a,u,c,h){return-(c-u)*((a=a/h-1)*a*a*a-1)+u},easeInOutQuart:function(a,u,c,h){var f=c-u;return(a/=h/2)<1?f/2*a*a*a*a+u:-f/2*((a-=2)*a*a*a-2)+u},easeInQuint:function(a,u,c,h){return(c-u)*(a/=h)*a*a*a*a+u},easeOutQuint:function(a,u,c,h){return(c-u)*((a=a/h-1)*a*a*a*a+1)+u},easeInOutQuint:function(a,u,c,h){var f=c-u;return(a/=h/2)<1?f/2*a*a*a*a*a+u:f/2*((a-=2)*a*a*a*a+2)+u},easeInSine:function(a,u,c,h){var f=c-u;return-f*Math.cos(a/h*(Math.PI/2))+f+u},easeOutSine:function(a,u,c,h){return(c-u)*Math.sin(a/h*(Math.PI/2))+u},easeInOutSine:function(a,u,c,h){return-(c-u)/2*(Math.cos(Math.PI*a/h)-1)+u},easeInExpo:function(a,u,c,h){return a==0?u:(c-u)*Math.pow(2,10*(a/h-1))+u},easeOutExpo:function(a,u,c,h){var f=c-u;return a==h?u+f:f*(1-Math.pow(2,-10*a/h))+u},easeInOutExpo:function(a,u,c,h){var f=c-u;return a===0?u:a===h?u+f:(a/=h/2)<1?f/2*Math.pow(2,10*(a-1))+u:f/2*(2-Math.pow(2,-10*--a))+u},easeInCirc:function(a,u,c,h){return-(c-u)*(Math.sqrt(1-(a/=h)*a)-1)+u},easeOutCirc:function(a,u,c,h){return(c-u)*Math.sqrt(1-(a=a/h-1)*a)+u},easeInOutCirc:function(a,u,c,h){var f=c-u;return(a/=h/2)<1?-f/2*(Math.sqrt(1-a*a)-1)+u:f/2*(Math.sqrt(1-(a-=2)*a)+1)+u},easeInElastic:function(a,u,c,h){var f,m,y,w=c-u;return y=1.70158,a===0?u:(a/=h)==1?u+w:((m=0)||(m=.3*h),(f=w)<Math.abs(w)?(f=w,y=m/4):y=m/(2*Math.PI)*Math.asin(w/f),-f*Math.pow(2,10*(a-=1))*Math.sin((a*h-y)*(2*Math.PI)/m)+u)},easeOutElastic:function(a,u,c,h){var f,m,y,w=c-u;return y=1.70158,a===0?u:(a/=h)==1?u+w:((m=0)||(m=.3*h),(f=w)<Math.abs(w)?(f=w,y=m/4):y=m/(2*Math.PI)*Math.asin(w/f),f*Math.pow(2,-10*a)*Math.sin((a*h-y)*(2*Math.PI)/m)+w+u)},easeInOutElastic:function(a,u,c,h){var f,m,y,w=c-u;return y=1.70158,a===0?u:(a/=h/2)==2?u+w:((m=0)||(m=h*.44999999999999996),(f=w)<Math.abs(w)?(f=w,y=m/4):y=m/(2*Math.PI)*Math.asin(w/f),a<1?f*Math.pow(2,10*(a-=1))*Math.sin((a*h-y)*(2*Math.PI)/m)*-.5+u:f*Math.pow(2,-10*(a-=1))*Math.sin((a*h-y)*(2*Math.PI)/m)*.5+w+u)},easeInBack:function(a,u,c,h,f){return f===void 0&&(f=1.70158),(c-u)*(a/=h)*a*((f+1)*a-f)+u},easeOutBack:function(a,u,c,h,f){return f===void 0&&(f=1.70158),(c-u)*((a=a/h-1)*a*((f+1)*a+f)+1)+u},easeInOutBack:function(a,u,c,h,f){var m=c-u;return f===void 0&&(f=1.70158),(a/=h/2)<1?m/2*(a*a*((1+(f*=1.525))*a-f))+u:m/2*((a-=2)*a*((1+(f*=1.525))*a+f)+2)+u},easeInBounce:function(a,u,c,h){var f=c-u;return f-o.easeOutBounce(h-a,0,f,h)+u},easeOutBounce:function(a,u,c,h){var f=c-u;return(a/=h)<.36363636363636365?f*(7.5625*a*a)+u:a<.7272727272727273?f*(7.5625*(a-=.5454545454545454)*a+.75)+u:a<.9090909090909091?f*(7.5625*(a-=.8181818181818182)*a+.9375)+u:f*(7.5625*(a-=.9545454545454546)*a+.984375)+u},easeInOutBounce:function(a,u,c,h){var f=c-u;return a<h/2?.5*o.easeInBounce(2*a,0,f,h)+u:.5*o.easeOutBounce(2*a-h,0,f,h)+.5*f+u}};r.exports=o},function(r,i,s){r.exports=s(3)},function(r,i,s){s.r(i),s.d(i,"ReactConfetti",function(){return $e});var o,a,u=s(0),c=s.n(u),h=s(1),f=s.n(h);function m(M,V){return M+Math.random()*(V-M)}function y(M,V){for(var j=0;j<V.length;j++){var L=V[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}function w(M,V,j){return V in M?Object.defineProperty(M,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[V]=j,M}(function(M){M[M.Circle=0]="Circle",M[M.Square=1]="Square",M[M.Strip=2]="Strip"})(o||(o={})),function(M){M[M.Positive=1]="Positive",M[M.Negative=-1]="Negative"}(a||(a={}));var k=function(){function M(L,te,z,X){(function(yn,_n){if(!(yn instanceof _n))throw new TypeError("Cannot call a class as a function")})(this,M),w(this,"context",void 0),w(this,"radius",void 0),w(this,"x",void 0),w(this,"y",void 0),w(this,"w",void 0),w(this,"h",void 0),w(this,"vx",void 0),w(this,"vy",void 0),w(this,"shape",void 0),w(this,"angle",void 0),w(this,"angularSpin",void 0),w(this,"color",void 0),w(this,"rotateY",void 0),w(this,"rotationDirection",void 0),w(this,"getOptions",void 0),this.getOptions=te;var ue,me,ye=this.getOptions(),St=ye.colors,nt=ye.initialVelocityX,ht=ye.initialVelocityY;this.context=L,this.x=z,this.y=X,this.w=m(5,20),this.h=m(5,20),this.radius=m(5,10),this.vx=typeof nt=="number"?m(-nt,nt):m(nt.min,nt.max),this.vy=typeof ht=="number"?m(-ht,0):m(ht.min,ht.max),this.shape=(ue=0,me=2,Math.floor(ue+Math.random()*(me-ue+1))),this.angle=m(0,360)*Math.PI/180,this.angularSpin=m(-.2,.2),this.color=St[Math.floor(Math.random()*St.length)],this.rotateY=m(0,1),this.rotationDirection=m(0,1)?a.Positive:a.Negative}var V,j;return V=M,(j=[{key:"update",value:function(){var L=this.getOptions(),te=L.gravity,z=L.wind,X=L.friction,ue=L.opacity,me=L.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=te,this.vx+=z,this.vx*=X,this.vy*=X,this.rotateY>=1&&this.rotationDirection===a.Positive?this.rotationDirection=a.Negative:this.rotateY<=-1&&this.rotationDirection===a.Negative&&(this.rotationDirection=a.Positive);var ye=.1*this.rotationDirection;if(this.rotateY+=ye,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=ue,this.context.lineCap="round",this.context.lineWidth=2,me&&typeof me=="function")me.call(this,this.context);else switch(this.shape){case o.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case o.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case o.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&y(V.prototype,j),M}();function x(M,V,j){return V in M?Object.defineProperty(M,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[V]=j,M}var T=function M(V,j){var L=this;(function(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")})(this,M),x(this,"canvas",void 0),x(this,"context",void 0),x(this,"getOptions",void 0),x(this,"x",0),x(this,"y",0),x(this,"w",0),x(this,"h",0),x(this,"lastNumberOfPieces",0),x(this,"tweenInitTime",Date.now()),x(this,"particles",[]),x(this,"particlesGenerated",0),x(this,"removeParticleAt",function(z){L.particles.splice(z,1)}),x(this,"getParticle",function(){var z=m(L.x,L.w+L.x),X=m(L.y,L.h+L.y);return new k(L.context,L.getOptions,z,X)}),x(this,"animate",function(){var z=L.canvas,X=L.context,ue=L.particlesGenerated,me=L.lastNumberOfPieces,ye=L.getOptions(),St=ye.run,nt=ye.recycle,ht=ye.numberOfPieces,yn=ye.debug,_n=ye.tweenFunction,Dt=ye.tweenDuration;if(!St)return!1;var wn=L.particles.length,It=nt?wn:ue,He=Date.now();if(It<ht){me!==ht&&(L.tweenInitTime=He,L.lastNumberOfPieces=ht);for(var oe=L.tweenInitTime,De=_n(He-oe>Dt?Dt:Math.max(0,He-oe),It,ht,Dt),pt=Math.round(De-It),Ot=0;Ot<pt;Ot++)L.particles.push(L.getParticle());L.particlesGenerated+=pt}return yn&&(X.font="12px sans-serif",X.fillStyle="#333",X.textAlign="right",X.fillText("Particles: ".concat(wn),z.width-10,z.height-20)),L.particles.forEach(function(nn,cn){nn.update(),(nn.y>z.height||nn.y<-100||nn.x>z.width+100||nn.x<-100)&&(nt&&It<=ht?L.particles[cn]=L.getParticle():L.removeParticleAt(cn))}),wn>0||It<ht}),this.canvas=V;var te=this.canvas.getContext("2d");if(!te)throw new Error("Could not get canvas context");this.context=te,this.getOptions=j};function _(M,V){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(M);V&&(L=L.filter(function(te){return Object.getOwnPropertyDescriptor(M,te).enumerable})),j.push.apply(j,L)}return j}function A(M){for(var V=1;V<arguments.length;V++){var j=arguments[V]!=null?arguments[V]:{};V%2?_(Object(j),!0).forEach(function(L){F(M,L,j[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):_(Object(j)).forEach(function(L){Object.defineProperty(M,L,Object.getOwnPropertyDescriptor(j,L))})}return M}function D(M,V){for(var j=0;j<V.length;j++){var L=V[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}function F(M,V,j){return V in M?Object.defineProperty(M,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[V]=j,M}var U={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:f.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},I=function(){function M(L,te){var z=this;(function(ue,me){if(!(ue instanceof me))throw new TypeError("Cannot call a class as a function")})(this,M),F(this,"canvas",void 0),F(this,"context",void 0),F(this,"_options",void 0),F(this,"generator",void 0),F(this,"rafId",void 0),F(this,"setOptionsWithDefaults",function(ue){var me={confettiSource:{x:0,y:0,w:z.canvas.width,h:0}};z._options=A(A(A({},me),U),ue),Object.assign(z,ue.confettiSource)}),F(this,"update",function(){var ue=z.options,me=ue.run,ye=ue.onConfettiComplete,St=z.canvas,nt=z.context;me&&(nt.fillStyle="white",nt.clearRect(0,0,St.width,St.height)),z.generator.animate()?z.rafId=requestAnimationFrame(z.update):(ye&&typeof ye=="function"&&z.generator.particlesGenerated>0&&ye.call(z,z),z._options.run=!1)}),F(this,"reset",function(){z.generator&&z.generator.particlesGenerated>0&&(z.generator.particlesGenerated=0,z.generator.particles=[],z.generator.lastNumberOfPieces=0)}),F(this,"stop",function(){z.options={run:!1},z.rafId&&(cancelAnimationFrame(z.rafId),z.rafId=void 0)}),this.canvas=L;var X=this.canvas.getContext("2d");if(!X)throw new Error("Could not get canvas context");this.context=X,this.generator=new T(this.canvas,function(){return z.options}),this.options=te,this.update()}var V,j;return V=M,(j=[{key:"options",get:function(){return this._options},set:function(L){var te=this._options&&this._options.run,z=this._options&&this._options.recycle;this.setOptionsWithDefaults(L),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof L.recycle=="boolean"&&L.recycle&&z===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof L.run=="boolean"&&L.run&&te===!1&&this.update()}}])&&D(V.prototype,j),M}();function v(M){return function(V){if(Array.isArray(V))return Te(V)}(M)||function(V){if(typeof Symbol<"u"&&Symbol.iterator in Object(V))return Array.from(V)}(M)||de(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(M){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(M)}function E(){return(E=Object.assign||function(M){for(var V=1;V<arguments.length;V++){var j=arguments[V];for(var L in j)Object.prototype.hasOwnProperty.call(j,L)&&(M[L]=j[L])}return M}).apply(this,arguments)}function P(M,V){var j=Object.keys(M);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(M);V&&(L=L.filter(function(te){return Object.getOwnPropertyDescriptor(M,te).enumerable})),j.push.apply(j,L)}return j}function R(M){for(var V=1;V<arguments.length;V++){var j=arguments[V]!=null?arguments[V]:{};V%2?P(Object(j),!0).forEach(function(L){ae(M,L,j[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):P(Object(j)).forEach(function(L){Object.defineProperty(M,L,Object.getOwnPropertyDescriptor(j,L))})}return M}function C(M,V){return function(j){if(Array.isArray(j))return j}(M)||function(j,L){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(j)))){var te=[],z=!0,X=!1,ue=void 0;try{for(var me,ye=j[Symbol.iterator]();!(z=(me=ye.next()).done)&&(te.push(me.value),!L||te.length!==L);z=!0);}catch(St){X=!0,ue=St}finally{try{z||ye.return==null||ye.return()}finally{if(X)throw ue}}return te}}(M,V)||de(M,V)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function de(M,V){if(M){if(typeof M=="string")return Te(M,V);var j=Object.prototype.toString.call(M).slice(8,-1);return j==="Object"&&M.constructor&&(j=M.constructor.name),j==="Map"||j==="Set"?Array.from(M):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?Te(M,V):void 0}}function Te(M,V){(V==null||V>M.length)&&(V=M.length);for(var j=0,L=new Array(V);j<V;j++)L[j]=M[j];return L}function ve(M,V){if(!(M instanceof V))throw new TypeError("Cannot call a class as a function")}function Ve(M,V){for(var j=0;j<V.length;j++){var L=V[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}function H(M,V){return(H=Object.setPrototypeOf||function(j,L){return j.__proto__=L,j})(M,V)}function J(M){var V=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var j,L=ne(M);if(V){var te=ne(this).constructor;j=Reflect.construct(L,arguments,te)}else j=L.apply(this,arguments);return Y(this,j)}}function Y(M,V){return!V||S(V)!=="object"&&typeof V!="function"?se(M):V}function se(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function ne(M){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)})(M)}function ae(M,V,j){return V in M?Object.defineProperty(M,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):M[V]=j,M}var pe=c.a.createRef(),je=function(M){(function(z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(X&&X.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),X&&H(z,X)})(te,M);var V,j,L=J(te);function te(z){var X;ve(this,te);for(var ue=arguments.length,me=new Array(ue>1?ue-1:0),ye=1;ye<ue;ye++)me[ye-1]=arguments[ye];return ae(se(X=L.call.apply(L,[this,z].concat(me))),"canvas",c.a.createRef()),ae(se(X),"confetti",void 0),X.canvas=z.canvasRef||pe,X}return V=te,(j=[{key:"componentDidMount",value:function(){if(this.canvas.current){var z=Ue(this.props)[0];this.confetti=new I(this.canvas.current,z)}}},{key:"componentDidUpdate",value:function(){var z=Ue(this.props)[0];this.confetti&&(this.confetti.options=z)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var z=C(Ue(this.props),2),X=z[0],ue=z[1],me=R({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},ue.style);return c.a.createElement("canvas",E({width:X.width,height:X.height,ref:this.canvas},ue,{style:me}))}}])&&Ve(V.prototype,j),te}(u.Component);function Ue(M){var V={},j={},L=[].concat(v(Object.keys(U)),["confettiSource","drawShape","onConfettiComplete"]),te=["canvasRef"];for(var z in M){var X=M[z];L.includes(z)?V[z]=X:te.includes(z)?te[z]=X:j[z]=X}return[V,j,{}]}ae(je,"defaultProps",R({},U)),ae(je,"displayName","ReactConfetti");var $e=c.a.forwardRef(function(M,V){return c.a.createElement(je,E({canvasRef:V},M))});i.default=$e}]).default})})(uI);var IM=uI.exports;const CM=Oc(IM);var At=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},AM=["onCopy","onCut","onPaste"],PM=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],kM=["onFocus","onBlur"],RM=["onInput","onInvalid","onReset","onSubmit"],xM=["onLoad","onError"],NM=["onKeyDown","onKeyPress","onKeyUp"],DM=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],OM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],bM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],MM=["onSelect"],LM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],VM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],FM=["onScroll"],jM=["onWheel"],UM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],BM=["onTransitionEnd"],zM=["onToggle"],WM=["onChange"],$M=At(At(At(At(At(At(At(At(At(At(At(At(At(At(At(At(At(At([],AM,!0),PM,!0),kM,!0),RM,!0),xM,!0),NM,!0),DM,!0),OM,!0),bM,!0),MM,!0),LM,!0),VM,!0),FM,!0),jM,!0),UM,!0),BM,!0),WM,!0),zM,!0);function HM(t,e){var n={};return $M.forEach(function(r){var i=t[r];i&&(n[r]=i)}),n}function Ad(t){var e=t.angle,n=e===void 0?0:e,r=t.name,i=t.length,s=i===void 0?100:i,o=t.oppositeLength,a=o===void 0?10:o,u=t.width,c=u===void 0?1:u;return O.jsx("div",{className:"react-clock__hand react-clock__".concat(r,"-hand"),style:{transform:"rotate(".concat(n,"deg)")},children:O.jsx("div",{className:"react-clock__hand__body react-clock__".concat(r,"-hand__body"),style:{width:"".concat(c,"px"),top:"".concat(50-s/2,"%"),bottom:"".concat(50-a/2,"%")}})})}var c0=Q.memo(function(e){var n=e.angle,r=n===void 0?0:n,i=e.length,s=i===void 0?10:i,o=e.name,a=e.width,u=a===void 0?1:a;return O.jsx("div",{className:"react-clock__mark react-clock__".concat(o,"-mark"),style:{transform:"rotate(".concat(r,"deg)")},children:O.jsx("div",{className:"react-clock__mark__body react-clock__".concat(o,"-mark__body"),style:{width:"".concat(u,"px"),top:0,bottom:"".concat(100-s/2,"%")}})})}),qM=Q.memo(function(e){var n=e.angle,r=n===void 0?0:n,i=e.length,s=i===void 0?10:i,o=e.name,a=e.number;return O.jsx("div",{className:"react-clock__mark react-clock__".concat(o,"-mark"),style:{transform:"rotate(".concat(r,"deg)")},children:O.jsx("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(r,"deg)"),top:"".concat(s/2,"%")},children:a})})});function GM(t,e){return e.toLocaleString(t||gl()||void 0)}function KM(t){return t!==null&&t!==!1&&!Number.isNaN(Number(t))}function QM(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.filter(KM))}function YM(t){var e=t.className,n=t.formatHour,r=n===void 0?GM:n,i=t.hourHandLength,s=i===void 0?50:i,o=t.hourHandOppositeLength,a=t.hourHandWidth,u=a===void 0?4:a,c=t.hourMarksLength,h=c===void 0?10:c,f=t.hourMarksWidth,m=f===void 0?3:f,y=t.locale,w=t.minuteHandLength,k=w===void 0?70:w,x=t.minuteHandOppositeLength,T=t.minuteHandWidth,_=T===void 0?2:T,A=t.minuteMarksLength,D=A===void 0?6:A,F=t.minuteMarksWidth,U=F===void 0?1:F,I=t.renderHourMarks,v=I===void 0?!0:I,S=t.renderMinuteHand,E=S===void 0?!0:S,P=t.renderMinuteMarks,R=P===void 0?!0:P,C=t.renderNumbers,de=t.renderSecondHand,Te=de===void 0?!0:de,ve=t.secondHandLength,Ve=ve===void 0?90:ve,H=t.secondHandOppositeLength,J=t.secondHandWidth,Y=J===void 0?1:J,se=t.size,ne=se===void 0?150:se,ae=t.useMillisecondPrecision,pe=t.value;function je(){if(!R)return null;for(var te=[],z=1;z<=60;z+=1){var X=v&&!(z%5);X||te.push(O.jsx(c0,{angle:z*6,length:D,name:"minute",width:U},"minute_".concat(z)))}return te}function Ue(){if(!v)return null;for(var te=[],z=1;z<=12;z+=1)te.push(O.jsx(c0,{angle:z*30,length:h,name:"hour",width:m},"hour_".concat(z)));return te}function $e(){if(!C)return null;for(var te=[],z=1;z<=12;z+=1)te.push(O.jsx(qM,{angle:z*30,length:QM(v&&h,R&&D,0),name:"number",number:r(y,z)},"number_".concat(z)));return te}function M(){return O.jsxs("div",{className:"react-clock__face",children:[je(),Ue(),$e()]})}function V(){var te=pe?an(pe)*30+Rr(pe)/2+zi(pe)/120+(ae?sd(pe)/12e4:0):0;return O.jsx(Ad,{angle:te,length:s,name:"hour",oppositeLength:o,width:u})}function j(){if(!E)return null;var te=pe?an(pe)*360+Rr(pe)*6+zi(pe)/10+(ae?sd(pe)/1e4:0):0;return O.jsx(Ad,{angle:te,length:k,name:"minute",oppositeLength:x,width:_})}function L(){if(!Te)return null;var te=pe?Rr(pe)*360+zi(pe)*6+(ae?sd(pe)*.006:0):0;return O.jsx(Ad,{angle:te,length:Ve,name:"second",oppositeLength:H,width:Y})}return O.jsxs("time",{className:Mr("react-clock",e),dateTime:pe instanceof Date?pe.toLocaleTimeString("en",{hourCycle:"h23",hour:"2-digit",minute:E?"2-digit":void 0,second:Te?"2-digit":void 0}):pe||void 0,style:{width:ne,height:ne},children:[M(),V(),j(),L()]})}function Kt(t){return t.getBoundingClientRect()}function h0(t,e){return{get collidedTop(){return Kt(t).top<Kt(e).top},get collidedBottom(){return Kt(t).bottom>Kt(e).bottom},get collidedLeft(){return Kt(t).left<Kt(e).left},get collidedRight(){return Kt(t).right>Kt(e).right},get overflowTop(){return Kt(e).top-Kt(t).top},get overflowBottom(){return Kt(t).bottom-Kt(e).bottom},get overflowLeft(){return Kt(e).left-Kt(t).left},get overflowRight(){return Kt(t).right-Kt(e).right}}}var XM=function(){},JM=XM;const d0=Oc(JM);var Zr=function(){return Zr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zr.apply(this,arguments)},ZM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},eL=typeof document<"u",tL=eL&&"MutationObserver"in window;function vu(t){return t.charAt(0).toUpperCase()+t.slice(1)}function nL(t){for(var e=t.parentElement;e;){var n=window.getComputedStyle(e).overflow;if(n.split(" ").every(function(r){return r==="auto"||r==="scroll"}))return e;e=e.parentElement}return document.documentElement}function cI(t){var e=t.axis,n=t.container,r=t.element,i=t.invertAxis,s=t.scrollContainer,o=t.secondary,a=t.spacing,u=window.getComputedStyle(r),c=n.parentElement;if(!c)return;var h=h0(c,s),f=h0(c,document.documentElement),m=e==="x",y=m?"left":"top",w=m?"right":"bottom",k=m?"width":"height",x="overflow".concat(vu(y)),T="overflow".concat(vu(w)),_="scroll".concat(vu(y)),A=vu(k),D="offset".concat(A),F="client".concat(A),U="min-".concat(k),I=s[D]-s[F],v=typeof a=="object"?a[y]:a,S=-Math.max(h[x],f[x]+document.documentElement[_])-v,E=typeof a=="object"?a[w]:a,P=-Math.max(h[T],f[T]-document.documentElement[_])-E-I;o&&(S+=c[F],P+=c[F]);var R=r[D];function C(){r.style[y]="auto",r.style[w]=o?"0":"100%"}function de(){r.style[y]=o?"0":"100%",r.style[w]="auto"}function Te(Y,se){var ne=R<=Y;return ne&&se(),ne}function ve(){return Te(S,C)}function Ve(){return Te(P,de)}function H(){var Y=S>P,se=u.getPropertyValue(U),ne=se?parseInt(se,10):null;function ae(pe){d0(!ne||pe>=ne,"<Fit />'s child will not fit anywhere with its current ".concat(U," of ").concat(ne,"px."));var je=Math.max(pe,ne||0);d0(!1,"<Fit />'s child needed to have its ".concat(k," decreased to ").concat(je,"px.")),r.style[k]="".concat(je,"px")}Y?(ae(S),C()):(ae(P),de())}var J;i?J=ve()||Ve():J=Ve()||ve(),J||H()}function rL(t){cI(t)}function iL(t){cI(Zr(Zr({},t),{axis:t.axis==="x"?"y":"x",secondary:!0}))}function sL(t){var e=t.invertAxis,n=t.invertSecondaryAxis,r=ZM(t,["invertAxis","invertSecondaryAxis"]);rL(Zr(Zr({},r),{invertAxis:e})),iL(Zr(Zr({},r),{invertAxis:n}))}function oL(t){var e=t.children,n=t.invertAxis,r=t.invertSecondaryAxis,i=t.mainAxis,s=i===void 0?"y":i,o=t.spacing,a=o===void 0?8:o,u=Q.useRef(void 0),c=Q.useRef(void 0),h=Q.useRef(void 0),f=Q.useRef(void 0),m=Q.useRef(void 0),y=Q.useCallback(function(){if(!(!m.current||!u.current||!c.current)){var x=c.current.clientWidth,T=c.current.clientHeight;if(!(h.current===x&&f.current===T)){h.current=x,f.current=T;var _=u.current.parentElement;if(_){var A=window.getComputedStyle(c.current),D=A.position;D!=="absolute"&&(c.current.style.position="absolute");var F=window.getComputedStyle(_),U=F.position;U!=="relative"&&U!=="absolute"&&(_.style.position="relative"),sL({axis:s,container:u.current,element:c.current,invertAxis:n,invertSecondaryAxis:r,scrollContainer:m.current,spacing:a})}}}},[n,r,s,a]),w=Q.Children.only(e);Q.useEffect(function(){y();function x(){y()}if(tL&&c.current){var T=new MutationObserver(x);T.observe(c.current,{attributes:!0,attributeFilter:["class","style"]})}},[y]);function k(x){!x||!(x instanceof HTMLElement)||(c.current=x,m.current=nL(x))}return O.jsx("span",{ref:function(x){if(x){u.current=x;var T=x==null?void 0:x.firstElementChild;k(T)}},style:{display:"contents"},children:w})}function aL(t){var e=t.children;return O.jsx("span",{className:"react-time-picker__inputGroup__divider",children:e})}var lL=["normal","small-caps"];function hI(t){if(!t)return"";var e=window.getComputedStyle(t);if(e.font)return e.font;var n=e.fontFamily!=="";if(!n)return"";var r=lL.includes(e.fontVariant)?e.fontVariant:"normal";return"".concat(e.fontStyle," ").concat(r," ").concat(e.fontWeight," ").concat(e.fontSize," / ").concat(e.lineHeight," ").concat(e.fontFamily)}var f0;function uL(t,e){var n=f0||(f0=document.createElement("canvas")),r=n.getContext("2d");if(!r)return null;r.font=e;var i=r.measureText(t).width;return Math.ceil(i)}function Dc(t){if(typeof document>"u"||!t)return null;var e=hI(t),n=t.value||t.placeholder,r=uL(n,e);return r===null?null:(t.style.width="".concat(r,"px"),r)}var Pg=typeof document<"u",cL=Pg?Q.useLayoutEffect:Q.useEffect,hL=Pg&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),dL=Pg&&/Firefox/.test(navigator.userAgent);function fL(t){var e=t.target;hL?requestAnimationFrame(function(){return e.select()}):e.select()}function pL(t){if(document.readyState==="complete")return;function e(){Dc(t)}window.addEventListener("load",e)}function mL(t){if(!document.fonts)return;var e=hI(t);if(!e)return;var n=document.fonts.check(e);if(n)return;function r(){Dc(t)}document.fonts.addEventListener("loadingdone",r)}function gL(t){if(t&&"selectionStart"in t&&t.selectionStart!==null&&"selectionEnd"in t&&t.selectionEnd!==null)return t.value.slice(t.selectionStart,t.selectionEnd);if("getSelection"in window){var e=window.getSelection();return e&&e.toString()}return null}function vL(t){if(t!==null)return function(n){if(!dL){var r=n.key,i=n.target,s=i.value,o=r.length===1&&/\d/.test(r),a=gL(i);(!o||!(a||s.length<t))&&n.preventDefault()}}}function _h(t){var e=t.ariaLabel,n=t.autoFocus,r=t.className,i=t.disabled,s=t.inputRef,o=t.max,a=t.min,u=t.name,c=t.nameForClass,h=t.onChange,f=t.onKeyDown,m=t.onKeyUp,y=t.placeholder,w=y===void 0?"--":y,k=t.required,x=t.showLeadingZeros,T=t.step,_=t.value;cL(function(){!s||!s.current||(Dc(s.current),pL(s.current),mL(s.current))},[s,_]);var A=x&&_&&Number(_)<10&&(_==="0"||!_.toString().startsWith("0")),D=o?o.toString().length:null;return O.jsxs(O.Fragment,{children:[A?O.jsx("span",{className:"".concat(r,"__leadingZero"),children:"0"}):null,O.jsx("input",{"aria-label":e,autoComplete:"off",autoFocus:n,className:Mr("".concat(r,"__input"),"".concat(r,"__").concat(c||u),A&&"".concat(r,"__input--hasLeadingZero")),"data-input":"true",disabled:i,inputMode:"numeric",max:o,min:a,name:u,onChange:h,onFocus:fL,onKeyDown:f,onKeyPress:vL(D),onKeyUp:function(F){Dc(F.target),m&&m(F)},placeholder:w,ref:s,required:k,step:T,type:"number",value:_!==null?_:""})]})}function p0(t,e){var n=Number(t);return e==="am"&&n===12?n=0:e==="pm"&&n<12&&(n+=12),n}function Ys(t){var e=Number(t)%12||12;return[e,Number(t)<12?"am":"pm"]}var Pd=new Map;function dI(t){return function(n,r){var i=n||gl();Pd.has(i)||Pd.set(i,new Map);var s=Pd.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}var kd=new Map;function yL(t){return function(e,n){var r=e||gl();kd.has(r)||kd.set(r,new Map);var i=kd.get(r);return i.has(t)||i.set(t,new Intl.NumberFormat(r||void 0,t).format),i.get(t)(n)}}var _L=["9","٩"],m0=new RegExp("[".concat(_L.join(""),"]")),g0=dI({hour:"numeric"});function fI(t){var e=g0(t,new Date(2017,0,1,9)),n=g0(t,new Date(2017,0,1,21)),r=e.split(m0),i=r[0],s=r[1],o=n.split(m0),a=o[0],u=o[1];if(u!==void 0){if(i!==a)return[i,a].map(function(c){return c.trim()});if(s!==u)return[s,u].map(function(c){return c.trim()})}return["AM","PM"]}function pI(t){return t!==null&&t!==!1&&!Number.isNaN(Number(t))}function wh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.min.apply(Math,t.filter(pI))}function Eh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.filter(pI))}var gp=function(){return gp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gp.apply(this,arguments)},wL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function EL(t){var e=t.amPm,n=t.maxTime,r=t.minTime,i=t.value,s=wL(t,["amPm","maxTime","minTime","value"]),o=wh(12,n&&function(){var c=Ys(an(n)),h=c[0],f=c[1];return f!==e?null:h}()),a=Eh(1,r&&function(){var c=Ys(an(r)),h=c[0],f=c[1];return f!==e||h===12?null:h}()),u=i?Ys(i)[0].toString():"";return O.jsx(_h,gp({max:o,min:a,name:"hour12",nameForClass:"hour",value:u},s))}var vp=function(){return vp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vp.apply(this,arguments)},TL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function SL(t){var e=t.maxTime,n=t.minTime,r=TL(t,["maxTime","minTime"]),i=wh(23,e&&an(e)),s=Eh(0,n&&an(n));return O.jsx(_h,vp({max:i,min:s,name:"hour24",nameForClass:"hour"},r))}var yp=function(){return yp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yp.apply(this,arguments)},IL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function CL(t){var e=t.hour,n=t.maxTime,r=t.minTime,i=t.showLeadingZeros,s=i===void 0?!0:i,o=IL(t,["hour","maxTime","minTime","showLeadingZeros"]);function a(h){return e===an(h).toString()}var u=wh(59,n&&a(n)&&Rr(n)),c=Eh(0,r&&a(r)&&Rr(r));return O.jsx(_h,yp({max:u,min:c,name:"minute",showLeadingZeros:s},o))}var _p=function(){return _p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_p.apply(this,arguments)},AL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function PL(t){var e=t.hour,n=t.maxTime,r=t.minTime,i=t.minute,s=t.showLeadingZeros,o=s===void 0?!0:s,a=AL(t,["hour","maxTime","minTime","minute","showLeadingZeros"]);function u(f){return e===an(f).toString()&&i===Rr(f).toString()}var c=wh(59,n&&u(n)&&zi(n)),h=Eh(0,r&&u(r)&&zi(r));return O.jsx(_h,_p({max:c,min:h,name:"second",showLeadingZeros:o},a))}function kL(t){var e=t.ariaLabel,n=t.disabled,r=t.maxTime,i=t.minTime,s=t.name,o=t.onChange,a=t.required,u=t.value,c=t.valueType,h=function(){switch(c){case"hour":return function(y){return"".concat(an(y),":00")};case"minute":return QE;case"second":return YE;default:throw new Error("Invalid valueType")}}(),f=function(){switch(c){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}}();function m(y){y.stopPropagation()}return O.jsx("input",{"aria-label":e,disabled:n,hidden:!0,max:r?h(r):void 0,min:i?h(i):void 0,name:s,onChange:o,onFocus:m,required:a,step:f,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"time",value:u?h(u):""})}function RL(t){var e=t.ariaLabel,n=t.autoFocus,r=t.className,i=t.disabled,s=t.inputRef,o=t.locale,a=t.maxTime,u=t.minTime,c=t.onChange,h=t.onKeyDown,f=t.required,m=t.value,y=u?Ys(an(u))[1]==="pm":!1,w=a?Ys(an(a))[1]==="am":!1,k="amPm",x=fI(o),T=x[0],_=x[1];return O.jsxs("select",{"aria-label":e,autoFocus:n,className:Mr("".concat(r,"__input"),"".concat(r,"__").concat(k)),"data-input":"true","data-select":"true",disabled:i,name:k,onChange:c,onKeyDown:h,ref:s,required:f,value:m!==null?m:"",children:[!m&&O.jsx("option",{value:"",children:"--"}),O.jsx("option",{disabled:y,value:"am",children:T}),O.jsx("option",{disabled:w,value:"pm",children:_})]})}var Oi=function(){return Oi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Oi.apply(this,arguments)},v0={},xL=["hour","minute","second"];function NL(t){return t.dataset.input==="true"}function y0(t,e){var n=t;do n=n[e];while(n&&!NL(n));return n}function Rd(t){t&&t.focus()}function DL(t,e,n){var r=[],i=new RegExp(Object.keys(e).map(function(o){return"".concat(o,"+")}).join("|"),"g"),s=t.match(i);return t.split(i).reduce(function(o,a,u){var c=a&&O.jsx(aL,{children:a},"separator_".concat(u));o.push(c);var h=s&&s[u];if(h){var f=e[h]||e[Object.keys(e).find(function(m){return h.match(m)})];if(!f)return o;!n&&r.includes(f)?o.push(h):(o.push(f(h,u)),r.push(f))}return o},[])}var yu=yL({useGrouping:!1});function OL(t){var e=t.amPmAriaLabel,n=t.autoFocus,r=t.className,i=t.disabled,s=t.format,o=t.hourAriaLabel,a=t.hourPlaceholder,u=t.isClockOpen,c=u===void 0?null:u,h=t.locale,f=t.maxDetail,m=f===void 0?"minute":f,y=t.maxTime,w=t.minTime,k=t.minuteAriaLabel,x=t.minutePlaceholder,T=t.name,_=T===void 0?"time":T,A=t.nativeInputAriaLabel,D=t.onChange,F=t.onInvalidChange,U=t.required,I=t.secondAriaLabel,v=t.secondPlaceholder,S=t.value,E=Q.useState(null),P=E[0],R=E[1],C=Q.useState(null),de=C[0],Te=C[1],ve=Q.useState(null),Ve=ve[0],H=ve[1],J=Q.useState(null),Y=J[0],se=J[1],ne=Q.useState(null),ae=ne[0],pe=ne[1],je=Q.useRef(null),Ue=Q.useRef(null),$e=Q.useRef(null),M=Q.useRef(null),V=Q.useRef(null),j=Q.useState(c),L=j[0],te=j[1],z=Q.useRef(void 0);Q.useEffect(function(){te(c)},[c]),Q.useEffect(function(){var G=S;G?(R(Ys(an(G))[1]),Te(an(G).toString()),H(Rr(G).toString()),se(zi(G).toString()),pe(G)):(R(null),Te(null),H(null),se(null),pe(null))},[S,w,y,m,L]);var X=m,ue=function(){var G=xL.indexOf(m),fe=v0[G]||function(){var ke={hour:"numeric"};return G>=1&&(ke.minute="numeric"),G>=2&&(ke.second="numeric"),v0[G]=ke,ke}();return dI(fe)}();function me(G){var fe=function(){switch(X){case"hour":case"minute":return QE;case"second":return YE;default:throw new Error("Invalid valueType")}}();return fe(G)}var ye=s||function(){var G=21,fe=9,ke=13,Be=14,En=new Date(2017,0,1,G,ke,Be);return ue(h,En).replace(yu(h,fe),"h").replace(yu(h,G),"H").replace(yu(h,ke),"mm").replace(yu(h,Be),"ss").replace(new RegExp(fI(h).join("|")),"a")}(),St=function(){var G=ye.match(/[^0-9a-z]/i);return G?G[0]:null}();function nt(G){if(G.target===G.currentTarget){var fe=G.target.children[1];Rd(fe)}}function ht(G){switch(z.current=G.key,G.key){case"ArrowLeft":case"ArrowRight":case St:{G.preventDefault();var fe=G.target,ke=G.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",Be=y0(fe,ke);Rd(Be);break}}}function yn(G){var fe=G.key,ke=G.target,Be=z.current===fe;if(Be){var En=!isNaN(Number(fe));if(En){var tr=ke.getAttribute("max");if(tr){var nr=ke.value;if(Number(nr)*10>Number(tr)||nr.length>=tr.length){var zn="nextElementSibling",rr=y0(ke,zn);Rd(rr)}}}}}function _n(){if(!D)return;function G(be){return!!be}var fe=[je.current,Ue.current,$e.current,M.current,V.current].filter(G),ke=fe.slice(1),Be={};fe.forEach(function(be){Be[be.name]=be.type==="number"?"valueAsNumber"in be?be.valueAsNumber:Number(be.value):be.value});var En=ke.every(function(be){return!be.value});if(En){D(null,!1);return}var tr=fe.every(function(be){return be.value}),nr=fe.every(function(be){return be.validity.valid});if(tr&&nr){var zn=Number(Be.hour24||Be.hour12&&Be.amPm&&p0(Be.hour12,Be.amPm)||0),rr=Number(Be.minute||0),mt=Number(Be.second||0),qe=function(be){return"0".concat(be).slice(-2)},_r="".concat(qe(zn),":").concat(qe(rr),":").concat(qe(mt)),Oe=me(_r);D(Oe,!1);return}F&&F()}function Dt(G){var fe=G.target,ke=fe.name,Be=fe.value;switch(ke){case"amPm":R(Be);break;case"hour12":Te(Be?p0(Be,P||"am").toString():"");break;case"hour24":Te(Be);break;case"minute":H(Be);break;case"second":se(Be);break}_n()}function wn(G){var fe=G.target.value;if(D){var ke=fe||null;D(ke,!1)}}var It={className:r,disabled:i,maxTime:y,minTime:w,onChange:Dt,onKeyDown:ht,onKeyUp:yn,required:!!(U||L)};function He(G,fe){if(G&&G.length>2)throw new Error("Unsupported token: ".concat(G));var ke=G?G.length===2:!1;return O.jsx(EL,Oi({},It,{amPm:P,ariaLabel:o,autoFocus:fe===0&&n,inputRef:Ue,placeholder:a,showLeadingZeros:ke,value:de}),"hour12")}function oe(G,fe){if(G&&G.length>2)throw new Error("Unsupported token: ".concat(G));var ke=G?G.length===2:!1;return O.jsx(SL,Oi({},It,{ariaLabel:o,autoFocus:fe===0&&n,inputRef:$e,placeholder:a,showLeadingZeros:ke,value:de}),"hour24")}function De(G,fe){return/h/.test(G)?He(G,fe):oe(G,fe)}function pt(G,fe){if(G&&G.length>2)throw new Error("Unsupported token: ".concat(G));var ke=G?G.length===2:!1;return O.jsx(CL,Oi({},It,{ariaLabel:k,autoFocus:fe===0&&n,hour:de,inputRef:M,placeholder:x,showLeadingZeros:ke,value:Ve}),"minute")}function Ot(G,fe){if(G&&G.length>2)throw new Error("Unsupported token: ".concat(G));var ke=G?G.length===2:!0;return O.jsx(PL,Oi({},It,{ariaLabel:I,autoFocus:fe===0&&n,hour:de,inputRef:V,minute:Ve,placeholder:v,showLeadingZeros:ke,value:Y}),"second")}function nn(G,fe){return O.jsx(RL,Oi({},It,{ariaLabel:e,autoFocus:fe===0&&n,inputRef:je,locale:h,onChange:Dt,value:P}),"ampm")}function cn(){var G={h:De,H:De,m:pt,s:Ot,a:nn},fe=typeof s<"u";return DL(ye,G,fe)}function Nn(){return O.jsx(kL,{ariaLabel:A,disabled:i,maxTime:y,minTime:w,name:_,onChange:wn,required:U,value:ae,valueType:X},"time")}return O.jsxs("div",{className:r,onClick:nt,children:[Nn(),cn()]})}var Gi=function(){return Gi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gi.apply(this,arguments)},bL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},dn="react-time-picker",ML=["mousedown","focusin","touchstart"],mI={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},LL=O.jsxs("svg",Gi({},mI,{className:"".concat(dn,"__clock-button__icon ").concat(dn,"__button__icon"),fill:"none",children:[O.jsx("circle",{cx:"9.5",cy:"9.5",r:"7.5"}),O.jsx("path",{d:"M9.5 4.5 v5 h4"})]})),VL=O.jsxs("svg",Gi({},mI,{className:"".concat(dn,"__clear-button__icon ").concat(dn,"__button__icon"),children:[O.jsx("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),O.jsx("line",{x1:"15",x2:"4",y1:"4",y2:"15"})]}));function FL(t){var e=t.amPmAriaLabel,n=t.autoFocus,r=t.className,i=t.clearAriaLabel,s=t.clearIcon,o=s===void 0?VL:s,a=t.clockAriaLabel,u=t.clockIcon,c=u===void 0?LL:u,h=t.closeClock,f=h===void 0?!0:h,m=t["data-testid"],y=t.hourAriaLabel,w=t.hourPlaceholder,k=t.disableClock,x=t.disabled,T=t.format,_=t.id,A=t.isOpen,D=A===void 0?null:A,F=t.locale,U=t.maxTime,I=t.maxDetail,v=I===void 0?"minute":I,S=t.minTime,E=t.minuteAriaLabel,P=t.minutePlaceholder,R=t.name,C=R===void 0?"time":R,de=t.nativeInputAriaLabel,Te=t.onClockClose,ve=t.onClockOpen,Ve=t.onChange,H=t.onFocus,J=t.onInvalidChange,Y=t.openClockOnFocus,se=Y===void 0?!0:Y,ne=t.required,ae=t.value,pe=t.secondAriaLabel,je=t.secondPlaceholder,Ue=t.shouldCloseClock,$e=t.shouldOpenClock,M=bL(t,["amPmAriaLabel","autoFocus","className","clearAriaLabel","clearIcon","clockAriaLabel","clockIcon","closeClock","data-testid","hourAriaLabel","hourPlaceholder","disableClock","disabled","format","id","isOpen","locale","maxTime","maxDetail","minTime","minuteAriaLabel","minutePlaceholder","name","nativeInputAriaLabel","onClockClose","onClockOpen","onChange","onFocus","onInvalidChange","openClockOnFocus","required","value","secondAriaLabel","secondPlaceholder","shouldCloseClock","shouldOpenClock"]),V=Q.useState(D),j=V[0],L=V[1],te=Q.useRef(null),z=Q.useRef(null);Q.useEffect(function(){L(D)},[D]);function X(oe){var De=oe.reason;$e&&!$e({reason:De})||(L(!0),ve&&ve())}var ue=Q.useCallback(function(oe){var De=oe.reason;Ue&&!Ue({reason:De})||(L(!1),Te&&Te())},[Te,Ue]);function me(){j?ue({reason:"buttonClick"}):X({reason:"buttonClick"})}function ye(oe,De){De===void 0&&(De=f),De&&ue({reason:"select"}),Ve&&Ve(oe)}function St(oe){H&&H(oe),!(x||j||!se||oe.target.dataset.select==="true")&&X({reason:"focus"})}var nt=Q.useCallback(function(oe){oe.key==="Escape"&&ue({reason:"escape"})},[ue]);function ht(){ye(null)}function yn(oe){oe.stopPropagation()}var _n=Q.useCallback(function(oe){var De=te.current,pt=z.current,Ot="composedPath"in oe?oe.composedPath()[0]:oe.target;Ot&&De&&!De.contains(Ot)&&(!pt||!pt.contains(Ot))&&ue({reason:"outsideAction"})},[z,ue,te]),Dt=Q.useCallback(function(oe){oe===void 0&&(oe=j),ML.forEach(function(De){oe?document.addEventListener(De,_n):document.removeEventListener(De,_n)}),oe?document.addEventListener("keydown",nt):document.removeEventListener("keydown",nt)},[j,_n,nt]);Q.useEffect(function(){return Dt(),function(){Dt(!1)}},[Dt]);function wn(){var oe=(Array.isArray(ae)?ae:[ae])[0],De={amPmAriaLabel:e,hourAriaLabel:y,minuteAriaLabel:E,nativeInputAriaLabel:de,secondAriaLabel:pe},pt={hourPlaceholder:w,minutePlaceholder:P,secondPlaceholder:je};return O.jsxs("div",{className:"".concat(dn,"__wrapper"),children:[O.jsx(OL,Gi({},De,pt,{autoFocus:n,className:"".concat(dn,"__inputGroup"),disabled:x,format:T,isClockOpen:j,locale:F,maxDetail:v,maxTime:U,minTime:S,name:C,onChange:ye,onInvalidChange:J,required:ne,value:oe})),o!==null&&O.jsx("button",{"aria-label":i,className:"".concat(dn,"__clear-button ").concat(dn,"__button"),disabled:x,onClick:ht,onFocus:yn,type:"button",children:typeof o=="function"?Q.createElement(o):o}),c!==null&&!k&&O.jsx("button",{"aria-expanded":j||!1,"aria-label":a,className:"".concat(dn,"__clock-button ").concat(dn,"__button"),disabled:x,onClick:me,onFocus:yn,type:"button",children:typeof c=="function"?Q.createElement(c):c})]})}function It(){if(j===null||k)return null;var oe=t.clockProps,De=t.portalContainer,pt=t.value,Ot="".concat(dn,"__clock"),nn=Mr(Ot,"".concat(Ot,"--").concat(j?"open":"closed")),cn=(Array.isArray(pt)?pt:[pt])[0],Nn=O.jsx(YM,Gi({locale:F,value:cn},oe));return De?NE.createPortal(O.jsx("div",{ref:z,className:nn,children:Nn}),De):O.jsx(oL,{children:O.jsx("div",{ref:function(G){G&&!j&&G.removeAttribute("style")},className:nn,children:Nn})})}var He=Q.useMemo(function(){return HM(M)},[M]);return O.jsxs("div",Gi({className:Mr(dn,"".concat(dn,"--").concat(j?"open":"closed"),"".concat(dn,"--").concat(x?"disabled":"enabled"),r),"data-testid":m,id:_},He,{onFocus:St,ref:te,children:[wn(),It()]}))}const jL=()=>{const[t,e]=Q.useState(new Date),[n,r]=Q.useState("00:00"),[i,s]=Q.useState(null),[o,a]=Q.useState(""),[u,c]=Q.useState(!1),[h,f]=Q.useState(!1),[m,y]=Q.useState(!1),[w,k]=Q.useState(""),[x,T]=Q.useState(!1),_="iloveserina";Q.useEffect(()=>{const E=ws(Es,"countdown","countdownDate"),P=ws(Es,"countdown","countdownStatus"),R=u0(E,de=>{if(de.exists()){const Te=de.data().date,ve=new Date(Te);s(ve),e(new Date(ve));const Ve=ve.getHours().toString().padStart(2,"0"),H=ve.getMinutes().toString().padStart(2,"0");r(`${Ve}:${H}`)}else s(null)}),C=u0(P,de=>{de.exists()?y(de.data().isReunited):y(!1)});return()=>{R(),C()}},[]),Q.useEffect(()=>{if(i){const E=setInterval(()=>{const P=new Date,R=i.getTime()-P.getTime();if(R>0){const C=Math.floor(R/864e5),de=Math.floor(R%(1e3*60*60*24)/(1e3*60*60)),Te=Math.floor(R%(1e3*60*60)/(1e3*60)),ve=Math.floor(R%(1e3*60)/1e3);a(`${C}d ${de}h ${Te}m ${ve}s`)}else a("It's time!"),y(!0),s(null),EM(ws(Es,"countdown","countdownDate")),Cd(ws(Es,"countdown","countdownStatus"),{isReunited:!0}),clearInterval(E)},1e3);return()=>clearInterval(E)}},[i]),Q.useEffect(()=>{const E=localStorage.getItem("isDarkMode");E&&f(JSON.parse(E))},[]);const A=()=>{const E=!h;f(E),localStorage.setItem("isDarkMode",JSON.stringify(E))},D=()=>{c(!0),k(""),T(!1)},F=()=>{c(!1),T(!1),k("")},U=E=>{e(E)},I=E=>{r(E)},v=async()=>{if(t&&n){const[E,P]=n.split(":"),R=new Date(t);R.setHours(parseInt(E)),R.setMinutes(parseInt(P)),R.setSeconds(0),s(R),await Cd(ws(Es,"countdown","countdownDate"),{date:R.toISOString()}),await Cd(ws(Es,"countdown","countdownStatus"),{isReunited:!1}),F()}else alert("Please select both date and time")},S=()=>{w===_?T(!0):alert("Incorrect password!")};return O.jsxs("div",{className:`${h?"bg-[#181818] text-white":"bg-white text-[#181818]"} flex flex-col items-center justify-center min-h-screen p-4 transition-colors duration-500`,children:[O.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-4",children:[O.jsx("button",{onClick:D,className:`px-4 py-2 rounded-full ${h?"bg-white text-[#181818]":"bg-[#181818] text-white"} hover:opacity-80 transition-colors duration-300`,children:i||m?"Reset Date":"Select Date"}),O.jsx("button",{onClick:A,className:"text-2xl focus:outline-none",children:h?O.jsx(pP,{}):O.jsx(fP,{})})]}),O.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Serina & Joe Reunion Countdown"}),m?O.jsxs(O.Fragment,{children:[O.jsx(CM,{numberOfPieces:150,gravity:.3,friction:.99,wind:0}),O.jsx("div",{className:"text-center",children:O.jsx("h2",{className:"text-4xl font-bold mb-4",children:"We're reunited!"})})]}):i?O.jsx("div",{className:"text-center",children:O.jsx("div",{className:"text-6xl font-extrabold mb-4",children:o})}):O.jsx("p",{className:"text-lg mt-4",children:"Please choose our reunion date and time!"}),u&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:O.jsx("div",{className:`${h?"bg-[#282828] text-white":"bg-white text-[#181818]"} p-6 rounded-lg w-80`,children:x?O.jsxs(O.Fragment,{children:[O.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Select a Date and Time"}),O.jsx(Yk,{onChange:U,value:t||new Date,className:`${h?"bg-[#383838] text-white":"bg-gray-100 text-[#181818]"} rounded-lg p-4`}),O.jsx(FL,{onChange:I,value:n,className:`${h?"react-time-picker--dark":""} mt-4`,clockIcon:null,disableClock:!0}),O.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[O.jsx("button",{type:"button",onClick:F,className:`px-4 py-2 rounded ${h?"bg-[#383838] text-white":"bg-gray-300 text-[#181818]"} hover:opacity-80 transition-colors duration-300`,children:"Cancel"}),O.jsx("button",{type:"button",onClick:v,className:`px-4 py-2 rounded ${h?"bg-white text-[#181818]":"bg-[#181818] text-white"} hover:opacity-80 transition-colors duration-300`,children:"Submit"})]})]}):O.jsxs(O.Fragment,{children:[O.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Enter Password"}),O.jsx("input",{type:"password",value:w,onChange:E=>k(E.target.value),className:`w-full p-2 mb-4 rounded ${h?"bg-[#383838] text-white":"bg-gray-100 text-[#181818]"}`}),O.jsxs("div",{className:"flex justify-end space-x-2",children:[O.jsx("button",{onClick:F,className:`px-4 py-2 rounded ${h?"bg-[#383838] text-white":"bg-gray-300 text-[#181818]"} hover:opacity-80 transition-colors duration-300`,children:"Cancel"}),O.jsx("button",{onClick:S,className:`px-4 py-2 rounded ${h?"bg-white text-[#181818]":"bg-[#181818] text-white"} hover:opacity-80 transition-colors duration-300`,children:"Submit"})]})]})})})]})};function UL(){return O.jsx("div",{className:"App",children:O.jsx(jL,{})})}DE(document.getElementById("root")).render(O.jsx(Q.StrictMode,{children:O.jsx(UL,{})}));
